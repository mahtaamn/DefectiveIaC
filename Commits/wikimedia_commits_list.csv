,repo_name,commit_sha,commit_msg,commit_html,file_name,file_status
0,analytics-vagrant-build,d18472db677e6252a85d49f5c3449cb00c81f80d,"Not including cloudera apt source by default.

Change-Id: Icf00dd0b99a1d9900f81935eaaa561e0def42359",https://github.com/wikimedia/analytics-vagrant-build/commit/d18472db677e6252a85d49f5c3449cb00c81f80d,puppet/manifests/base.pp,modified
1,analytics-vagrant-build,3a0114594d642184e57b108b946a95759c69cb06,"Upping memory, installing apt-file and git-core by default

Change-Id: I5ae5f5a56e1f49aae44fc99e237d4fa1bb7b4fd0",https://github.com/wikimedia/analytics-vagrant-build/commit/3a0114594d642184e57b108b946a95759c69cb06,puppet/manifests/site.pp,modified
2,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/manifests/base.pp,added
3,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/manifests/site.pp,added
4,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/apt/manifests/conf.pp,added
5,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/apt/manifests/init.pp,added
6,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/apt/manifests/pin.pp,added
7,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/apt/manifests/repository.pp,added
8,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/apt/manifests/update.pp,added
9,analytics-vagrant-build,f432ac668aabe432da94932bf0d3cabfb9355301,Initial commit,https://github.com/wikimedia/analytics-vagrant-build/commit/f432ac668aabe432da94932bf0d3cabfb9355301,puppet/modules/java/manifests/init.pp,added
10,analytics-vagrant-kraken,9d6cf175bee374ee3ac29d732ab21bb4d309f340,Removing commented stuff,https://github.com/wikimedia/analytics-vagrant-kraken/commit/9d6cf175bee374ee3ac29d732ab21bb4d309f340,puppet/manifests/site.pp,modified
11,analytics-vagrant-kraken,e76ca2c0e2b827032c06e5896dd8dc94c8317143,Removing unused stuff from base.pp,https://github.com/wikimedia/analytics-vagrant-kraken/commit/e76ca2c0e2b827032c06e5896dd8dc94c8317143,puppet/manifests/base.pp,modified
12,analytics-vagrant-kraken,c3fcc69156ad71e07d505696a0c0ef0dce07885f,Updates for hadoop and zookeeper,https://github.com/wikimedia/analytics-vagrant-kraken/commit/c3fcc69156ad71e07d505696a0c0ef0dce07885f,puppet/manifests/base.pp,modified
13,analytics-vagrant-kraken,c3fcc69156ad71e07d505696a0c0ef0dce07885f,Updates for hadoop and zookeeper,https://github.com/wikimedia/analytics-vagrant-kraken/commit/c3fcc69156ad71e07d505696a0c0ef0dce07885f,puppet/manifests/kraken.pp,removed
14,analytics-vagrant-kraken,c3fcc69156ad71e07d505696a0c0ef0dce07885f,Updates for hadoop and zookeeper,https://github.com/wikimedia/analytics-vagrant-kraken/commit/c3fcc69156ad71e07d505696a0c0ef0dce07885f,puppet/manifests/site.pp,modified
15,analytics-vagrant-kraken,c92aff88c66fbe9cb0d9a2f8a367e56152860a60,Commenting out kraken::config usage.  Not using this. (Yet?),https://github.com/wikimedia/analytics-vagrant-kraken/commit/c92aff88c66fbe9cb0d9a2f8a367e56152860a60,puppet/manifests/kraken.pp,modified
16,analytics-vagrant-kraken,eb2e0106d672696495e94aa603a3e0cb1e26ef72,Only including Hadoop in vagrant VM by default right now.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/eb2e0106d672696495e94aa603a3e0cb1e26ef72,puppet/manifests/base.pp,modified
17,analytics-vagrant-kraken,eb2e0106d672696495e94aa603a3e0cb1e26ef72,Only including Hadoop in vagrant VM by default right now.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/eb2e0106d672696495e94aa603a3e0cb1e26ef72,puppet/manifests/kraken.pp,modified
18,analytics-vagrant-kraken,eb2e0106d672696495e94aa603a3e0cb1e26ef72,Only including Hadoop in vagrant VM by default right now.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/eb2e0106d672696495e94aa603a3e0cb1e26ef72,puppet/manifests/site.pp,modified
19,analytics-vagrant-kraken,ce8833a86b9c20780c345f6866f313eb134cab46,Adding kraken configs.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/ce8833a86b9c20780c345f6866f313eb134cab46,puppet/manifests/base.pp,modified
20,analytics-vagrant-kraken,ce8833a86b9c20780c345f6866f313eb134cab46,Adding kraken configs.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/ce8833a86b9c20780c345f6866f313eb134cab46,puppet/manifests/kraken.pp,added
21,analytics-vagrant-kraken,ce8833a86b9c20780c345f6866f313eb134cab46,Adding kraken configs.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/ce8833a86b9c20780c345f6866f313eb134cab46,puppet/manifests/site.pp,modified
22,analytics-vagrant-kraken,2cd79f9af392b2b49952984578559f9c2bd19d69,"Adding java module.
Including java in base.pp.

Adding kafka module.
Including kafka in base.pp",https://github.com/wikimedia/analytics-vagrant-kraken/commit/2cd79f9af392b2b49952984578559f9c2bd19d69,puppet/manifests/base.pp,modified
23,analytics-vagrant-kraken,2cd79f9af392b2b49952984578559f9c2bd19d69,"Adding java module.
Including java in base.pp.

Adding kafka module.
Including kafka in base.pp",https://github.com/wikimedia/analytics-vagrant-kraken/commit/2cd79f9af392b2b49952984578559f9c2bd19d69,puppet/manifests/site.pp,modified
24,analytics-vagrant-kraken,2cd79f9af392b2b49952984578559f9c2bd19d69,"Adding java module.
Including java in base.pp.

Adding kafka module.
Including kafka in base.pp",https://github.com/wikimedia/analytics-vagrant-kraken/commit/2cd79f9af392b2b49952984578559f9c2bd19d69,puppet/modules/java/manifests/init.pp,added
25,analytics-vagrant-kraken,ff05fd751ee21eb883fa668a632fc131dfada435,Using apt module to install wikimedia apt repo settings,https://github.com/wikimedia/analytics-vagrant-kraken/commit/ff05fd751ee21eb883fa668a632fc131dfada435,puppet/manifests/base.pp,added
26,analytics-vagrant-kraken,ff05fd751ee21eb883fa668a632fc131dfada435,Using apt module to install wikimedia apt repo settings,https://github.com/wikimedia/analytics-vagrant-kraken/commit/ff05fd751ee21eb883fa668a632fc131dfada435,puppet/manifests/site.pp,modified
27,analytics-vagrant-kraken,6c3a578dcdbdaace282ebaa427803300e0a95877,Adding apt module,https://github.com/wikimedia/analytics-vagrant-kraken/commit/6c3a578dcdbdaace282ebaa427803300e0a95877,puppet/modules/apt/manifests/conf.pp,added
28,analytics-vagrant-kraken,6c3a578dcdbdaace282ebaa427803300e0a95877,Adding apt module,https://github.com/wikimedia/analytics-vagrant-kraken/commit/6c3a578dcdbdaace282ebaa427803300e0a95877,puppet/modules/apt/manifests/init.pp,added
29,analytics-vagrant-kraken,6c3a578dcdbdaace282ebaa427803300e0a95877,Adding apt module,https://github.com/wikimedia/analytics-vagrant-kraken/commit/6c3a578dcdbdaace282ebaa427803300e0a95877,puppet/modules/apt/manifests/pin.pp,added
30,analytics-vagrant-kraken,6c3a578dcdbdaace282ebaa427803300e0a95877,Adding apt module,https://github.com/wikimedia/analytics-vagrant-kraken/commit/6c3a578dcdbdaace282ebaa427803300e0a95877,puppet/modules/apt/manifests/repository.pp,added
31,analytics-vagrant-kraken,6c3a578dcdbdaace282ebaa427803300e0a95877,Adding apt module,https://github.com/wikimedia/analytics-vagrant-kraken/commit/6c3a578dcdbdaace282ebaa427803300e0a95877,puppet/modules/apt/manifests/update.pp,added
32,analytics-vagrant-kraken,4590a29518efeb24cef5b340ba958ef77c7684e6,First commit of Kraken Vagrant VM.,https://github.com/wikimedia/analytics-vagrant-kraken/commit/4590a29518efeb24cef5b340ba958ef77c7684e6,puppet/manifests/site.pp,added
33,puppet,609c65d29c984b15b51efa1f1126205d2a4cb91f,"certspotter: temporarily disable certspotter (and the systemd timer)

As discussed in T318911, there are various issues with certspotter that
prevent it from being useful. Pending those issues being fixed,
certspotter doesn't provide any meaningful data that is being currently
reviewed because of the low signal-to-noise ratio.

As per discussions in the Traffic meeting, we are disabling certspotter
till we can improve it or fix the issues mentioned in T318911.

Bug: T318911
Hosts: O:alerting_host
Change-Id: Ib45e0115ae9050c417f5297c35c864a0d44f889b",https://github.com/wikimedia/puppet/commit/609c65d29c984b15b51efa1f1126205d2a4cb91f,modules/certspotter/manifests/init.pp,modified
34,puppet,2c69d0f3a56221f1d9151232640d6193eaf660b4,"Remove remaining Puppet references to ganeti5002 (decommed)

Change-Id: Ia67a8e756668dd63ff14bd87eb0d2e2ea69c258a",https://github.com/wikimedia/puppet/commit/2c69d0f3a56221f1d9151232640d6193eaf660b4,manifests/site.pp,modified
35,puppet,f4cc06edd279ab0c01f17d35c79f6e5a0d55c019,"site.pp: role::test for test-reimage2001.

Bug: T324744
Change-Id: Iae8cf3cf41a5eeef7902a59a9dde82b08f305033",https://github.com/wikimedia/puppet/commit/f4cc06edd279ab0c01f17d35c79f6e5a0d55c019,manifests/site.pp,modified
36,puppet,1f1e676ee06ad660dd20447810a2afe02728b8bf,"site: Productionise mc2039 too

Change-Id: Ib301541aa013915a3fa610ffae2256844e81db72",https://github.com/wikimedia/puppet/commit/1f1e676ee06ad660dd20447810a2afe02728b8bf,manifests/site.pp,modified
37,puppet,0ac764b45dd296dcf7c32303a932044a2cd55ef6,"site: Productionise mc20[39-55]

Putting new memcached servers ready for production.

Bug: T293012
Change-Id: Ibb2e5bca9f573248de01f867b58a3508873b63fc",https://github.com/wikimedia/puppet/commit/0ac764b45dd296dcf7c32303a932044a2cd55ef6,manifests/site.pp,modified
38,puppet,b81307d8be75cbd2519b2341484ad616494a9d7b,"P:mediawiki::php:monitoring: Retry opcache probe

Warn after 1h (6 retries at 10 minute intervals) of opcache hit ratio
under 99.99%.
This should clear the ""normal"" warnings after a deployment while opcache
warms up, and still alert us if it doesn't because a server is not getting
traffic or there is a mediawiki issue.

Bug: T324649
Change-Id: Ib6a02d0a430c2c4ec60671ad26751b8b0984f576",https://github.com/wikimedia/puppet/commit/b81307d8be75cbd2519b2341484ad616494a9d7b,modules/profile/manifests/mediawiki/php/monitoring.pp,modified
39,puppet,6573e1a22adcc2e5c96864368f3e1761be537dcb,"prometheus: Enable profile::auto_restarts::service for Envoy

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each business day (on Mo-Fr).

Tested on prometheus4001 following the latest glibc security update.

Bug: T135991
Change-Id: I2357e74a753f0e485239e14ec5a0638093bc059b",https://github.com/wikimedia/puppet/commit/6573e1a22adcc2e5c96864368f3e1761be537dcb,modules/profile/manifests/prometheus/web.pp,modified
40,puppet,ab46f78ff0e18d67cc4b66a6370fc9378d03a1f9,"Make ganeti5005 a Ganeti node

Bug: T324610
Change-Id: Ia6f8073ab49f495b389a29934a64491428291648",https://github.com/wikimedia/puppet/commit/ab46f78ff0e18d67cc4b66a6370fc9378d03a1f9,manifests/site.pp,modified
41,puppet,51e3d58e69d4160f2331f7b2a5b372476dba8bfe,"phabricator: rm code from before system user was created with systemd

Bug: T280597
Change-Id: I6dc257fe479c843079bec4e16d567732039af5c5",https://github.com/wikimedia/puppet/commit/51e3d58e69d4160f2331f7b2a5b372476dba8bfe,modules/phabricator/manifests/phd.pp,modified
42,puppet,b45ed269f91bf06ad68e88356866666a5e40c56c,"phabricator: Add SPDX headers

Bug: T308013
Change-Id: I5213e12e125ef76ab4a590e57accc528bb6b0ef9",https://github.com/wikimedia/puppet/commit/b45ed269f91bf06ad68e88356866666a5e40c56c,modules/profile/manifests/phabricator/aphlict.pp,modified
43,puppet,b45ed269f91bf06ad68e88356866666a5e40c56c,"phabricator: Add SPDX headers

Bug: T308013
Change-Id: I5213e12e125ef76ab4a590e57accc528bb6b0ef9",https://github.com/wikimedia/puppet/commit/b45ed269f91bf06ad68e88356866666a5e40c56c,modules/profile/manifests/phabricator/httpd.pp,modified
44,puppet,b45ed269f91bf06ad68e88356866666a5e40c56c,"phabricator: Add SPDX headers

Bug: T308013
Change-Id: I5213e12e125ef76ab4a590e57accc528bb6b0ef9",https://github.com/wikimedia/puppet/commit/b45ed269f91bf06ad68e88356866666a5e40c56c,modules/profile/manifests/phabricator/main.pp,modified
45,puppet,b45ed269f91bf06ad68e88356866666a5e40c56c,"phabricator: Add SPDX headers

Bug: T308013
Change-Id: I5213e12e125ef76ab4a590e57accc528bb6b0ef9",https://github.com/wikimedia/puppet/commit/b45ed269f91bf06ad68e88356866666a5e40c56c,modules/profile/manifests/phabricator/monitoring.pp,modified
46,puppet,b45ed269f91bf06ad68e88356866666a5e40c56c,"phabricator: Add SPDX headers

Bug: T308013
Change-Id: I5213e12e125ef76ab4a590e57accc528bb6b0ef9",https://github.com/wikimedia/puppet/commit/b45ed269f91bf06ad68e88356866666a5e40c56c,modules/profile/manifests/phabricator/performance.pp,modified
47,puppet,31c251c8885b13fc10ebb32db9396e404d6c46f9,"doc: Enable profile::auto_restarts::service for Envoy

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each business day (on Mo-Fr).

Tested on doc1002 following the latest glibc security update.

Bug: T135991
Change-Id: I25e72f5b070f635c9e4b3f41b2f08c32a2bb855a",https://github.com/wikimedia/puppet/commit/31c251c8885b13fc10ebb32db9396e404d6c46f9,modules/profile/manifests/doc.pp,modified
48,puppet,43d0d20800214fe2b14f33365c166253208623bd,"wdqs: Bring wdqs20[09,10,11,12] online

Add new hosts into rotation.

Hosts: wdqs2003.codfw.wmnet,wdqs1003.eqiad.wmnet
Hosts: wdqs2009.codfw.wmnet,wcqs2001.codfw.wmnet
Bug: T301167
Change-Id: Ibd686325fc04a9f5ea670bf67d81c5625304091f",https://github.com/wikimedia/puppet/commit/43d0d20800214fe2b14f33365c166253208623bd,manifests/site.pp,modified
49,puppet,9face1ca07bc2ae7bc957f9b4fca6a417853ec9d,"lvs5006: set as secondary LVS and remove lvs5003 (decomm)

Bug: T323830
Change-Id: I42440c3d3e271cc5880daa94d7a7c7f70b914512",https://github.com/wikimedia/puppet/commit/9face1ca07bc2ae7bc957f9b4fca6a417853ec9d,manifests/site.pp,modified
50,puppet,9face1ca07bc2ae7bc957f9b4fca6a417853ec9d,"lvs5006: set as secondary LVS and remove lvs5003 (decomm)

Bug: T323830
Change-Id: I42440c3d3e271cc5880daa94d7a7c7f70b914512",https://github.com/wikimedia/puppet/commit/9face1ca07bc2ae7bc957f9b4fca6a417853ec9d,modules/profile/manifests/lvs/configuration.pp,modified
51,puppet,7f6215e039d90840f4617c1e8278e1dd51abf2ea,"gerrit: raise H2 compaction time

For caches backed up by a disk, Gerrit uses the H2 Database. It is also
used to keep track of files that have been reviewed in
`account_patch_reviews.h2.db`.

When doing the Gerrit 3.4 > 3.5 upgrade, the online reindexing of all
changes caused some entries to be added to two of the largest caches
`gerrit_file_diff` (8G) and `git_file_diff` (11G). That has lead to the
disk (40G) filling up entirely and turned the maintenance window to an
outage.

The disk size reported by Gerrit were respectively 157M and 158M which
has lead me to believe the files were not vacuumed to reclaim freed data
blocks. A gzip of one of the file yields a 32MBytes archive, a good
indication the large files are mostly empty.

We have most probably been carrying out the caches from a server to
another one since we first installed Gerrit (2010?). The H2 databases
are compacted upon disconnection and only allows a 200 milliseconds
window for that. That is not enough.

We can allocate 15 seconds (15 000 milliseconds) to the driver by
passing to the jdbc URL `;MAX_COMPACT_TIME`. The URL is in the Gerrit
java code and not configurable though. I found out H2 looks up settings
down to system properties in camel case. Thus the equivalent of
`MAX_COMPACT_TIME` is the property `h2.maxCompactTime`.

To activate the setting, the Gerrit JVM will have to be restarted. Upon
the next restart, H2 should then further compact the files.

NOTE: Gerrit currently takes a long time to shutdown and ends up being
SIGKILL by systemd after 90 seconds. It is a different problem though.

Bug: T323754
Hosts: O:gerrit
Change-Id: I0b141bcbf509d8e5e0614d14d3b817afbe25a0a1",https://github.com/wikimedia/puppet/commit/7f6215e039d90840f4617c1e8278e1dd51abf2ea,modules/gerrit/manifests/init.pp,modified
52,puppet,482e33aacf997c8750571d0c063930fd5174f2d4,"Revert ""ci::master: hack to bootstrap new server contint1002""

This reverts commit e946a527783e499e7ba691678c992d2bae4fe0fc.

Reason for revert: only needed for one puppet run, the first one

Change-Id: Ia1fef45769eebe8e57c72383ca92c8d5842f9e4d",https://github.com/wikimedia/puppet/commit/482e33aacf997c8750571d0c063930fd5174f2d4,modules/role/manifests/ci/master.pp,modified
53,puppet,e946a527783e499e7ba691678c992d2bae4fe0fc,"ci::master: hack to bootstrap new server contint1002

There is currently a puppet error when the ci::master role
is applied on a brandnew host, like contint1002.

It seems to have been introduced by Ie1b87c9f896bcb0
which expects an admin group, contint-admins, to exist
to be used in helm-related classes, before the admin
group has actually been created.

As a hack to get around this and bootstrap contint1002 for now,
since contint1001 is breaking, just comment it out for a moment.

Then will disable puppet on all contint*, run puppet only on
contint1002 and then revert this change.

This should get around the problem and a long-term fix can be
found separately.

Bug: T313832
Change-Id: I1dd23fb80f8a025955301607eba87e2167be3286",https://github.com/wikimedia/puppet/commit/e946a527783e499e7ba691678c992d2bae4fe0fc,modules/role/manifests/ci/master.pp,modified
54,puppet,edee03d6b0640c34abb27f4f098a1511175d314a,"lvs5006: commission new LVS host (eqsin hardware refresh)

lvs5006 will be the new secondary LVS host.

Bug: T322048
Change-Id: If194fc816912e93fea83c42d6a84c0e60fb405b0",https://github.com/wikimedia/puppet/commit/edee03d6b0640c34abb27f4f098a1511175d314a,manifests/site.pp,modified
55,puppet,edee03d6b0640c34abb27f4f098a1511175d314a,"lvs5006: commission new LVS host (eqsin hardware refresh)

lvs5006 will be the new secondary LVS host.

Bug: T322048
Change-Id: If194fc816912e93fea83c42d6a84c0e60fb405b0",https://github.com/wikimedia/puppet/commit/edee03d6b0640c34abb27f4f098a1511175d314a,modules/profile/manifests/lvs/configuration.pp,modified
56,puppet,4a02250cfe5aaf007a012f84ce1adc455256e241,"contint: add ci::master to contint1002

This is the preliminary Puppet provisionning to bring up contint1002 has
a secondary CI system. Ultimately it will run the zuul-merger and be
attached as a Jenkins agent (that is done manually).

None of Jenkins, Zuul scheduler or the Zuul merger should run at this
point. The services can be disabled via hiera data passed to the
profiles which I have applied in contint1002.yaml. The role::ci::master
defaults for each three services being:

- Jenkins is masked/stopped
- Zuul merger is running
- Zuul server is running/enabled

Add the new host to various access lists which thus also affect the
current primary (contint2001) and contint1001.

The new host contint1002 is intentionally not added to the scap dsh
group yet since it needs this change to provision it as a scap target.

Bug: T313832
Hosts: contint1001.wikimedia.org
Hosts: contint1002.wikimedia.org
Hosts: contint2001.wikimedia.org
Change-Id: I3d6568404b7d62f60bf161d12f832abfe5ac07f1",https://github.com/wikimedia/puppet/commit/4a02250cfe5aaf007a012f84ce1adc455256e241,manifests/site.pp,modified
57,puppet,c6f6a2554aaaf9d7ba52232855dbe4d71fd0d0f8,"netmon: Remove rsync quickdatacopy failover restrictions

Bug: T309074
Change-Id: Ib43f79044c6f2bb0969647ecc9573a0867f60111",https://github.com/wikimedia/puppet/commit/c6f6a2554aaaf9d7ba52232855dbe4d71fd0d0f8,modules/profile/manifests/librenms.pp,modified
58,puppet,c6f6a2554aaaf9d7ba52232855dbe4d71fd0d0f8,"netmon: Remove rsync quickdatacopy failover restrictions

Bug: T309074
Change-Id: Ib43f79044c6f2bb0969647ecc9573a0867f60111",https://github.com/wikimedia/puppet/commit/c6f6a2554aaaf9d7ba52232855dbe4d71fd0d0f8,modules/profile/manifests/rancid.pp,modified
59,puppet,071288aa7099547c27e38b5ba5ec0fde990ce018,"lvs5005: set as high-traffic2 primary LVS and remove lvs5002 (decomm)

Bug: T323830
Change-Id: I14f7229d9234ead776ccaa8c998b757e20efc4b2",https://github.com/wikimedia/puppet/commit/071288aa7099547c27e38b5ba5ec0fde990ce018,manifests/site.pp,modified
60,puppet,071288aa7099547c27e38b5ba5ec0fde990ce018,"lvs5005: set as high-traffic2 primary LVS and remove lvs5002 (decomm)

Bug: T323830
Change-Id: I14f7229d9234ead776ccaa8c998b757e20efc4b2",https://github.com/wikimedia/puppet/commit/071288aa7099547c27e38b5ba5ec0fde990ce018,modules/profile/manifests/lvs/configuration.pp,modified
61,puppet,f705e4181a71faad8d9b2b122de4f4d03615aee1,"Fix typo for sretest2002 node in site.pp

Bug: T322578
Change-Id: I44a62d1a02ac02e90ec5188b379f906f4c57a4fa",https://github.com/wikimedia/puppet/commit/f705e4181a71faad8d9b2b122de4f4d03615aee1,manifests/site.pp,modified
62,puppet,c63afea58e1bdc37f86cb48cd6fc3ab3a7595a16,"updating role

set incorrect role inititally

Bug: T322048
Change-Id: I1e04c9e618c35253f9f8fddde8b8bd25ce4a2929",https://github.com/wikimedia/puppet/commit/c63afea58e1bdc37f86cb48cd6fc3ab3a7595a16,manifests/site.pp,modified
63,puppet,94f6523979a103f544136c24120ec1aa3dfb469a,"updateing site.pp for kubernetes servers to change role to insetup::serviceops

Bug: T313873
Change-Id: I2096d9119b59b08821934d5a337e8a28b09b36ae",https://github.com/wikimedia/puppet/commit/94f6523979a103f544136c24120ec1aa3dfb469a,manifests/site.pp,modified
64,puppet,08473debd240f3801196733876dc4a4af6b95ed0,"Enable profile::auto_restarts::service for Apache/FPM/Envoy on mwmaint/noc

Automatically restart Apache/FPM/Envoy if underlying runtime library
dependencies have been upgraded (e.g. openssl). The restart is splayed
across each day (on Mo-Fr).

Tested on mwmaint1002 following the latest glibc security update.

Bug: T135991
Change-Id: I760268fd25ad88aad0dca5458e57b14b761885a2",https://github.com/wikimedia/puppet/commit/08473debd240f3801196733876dc4a4af6b95ed0,modules/noc/manifests/init.pp,modified
65,puppet,ce288dbf5d095a30a6ca632a23a99ee42c59b960,"search: drop search-drop-query-clicks systemd timer (2/2)

Hosts: stat1007.eqiad.wmnet
Change-Id: Iebc0a5213b43398bfe6d474d4b5fae8470beb7ec",https://github.com/wikimedia/puppet/commit/ce288dbf5d095a30a6ca632a23a99ee42c59b960,modules/profile/manifests/analytics/search/jobs.pp,removed
66,puppet,ce288dbf5d095a30a6ca632a23a99ee42c59b960,"search: drop search-drop-query-clicks systemd timer (2/2)

Hosts: stat1007.eqiad.wmnet
Change-Id: Iebc0a5213b43398bfe6d474d4b5fae8470beb7ec",https://github.com/wikimedia/puppet/commit/ce288dbf5d095a30a6ca632a23a99ee42c59b960,modules/profile/manifests/statistics/explorer/misc_jobs.pp,modified
67,puppet,a869a71e9accba1f9013aa0772daa288cc545ef8,"Promote Cassandra 3.11.13 to '3.x' (aka stable)

New versions of Cassandra are introduced as `target_version: 'dev'`.
Once rolled out everywhere (once the new version has become de facto
stable) it becomes `target_version: '3.x'`, freeing up `dev` for the
next upgrade.

Hosts: aqs1010.eqiad.wmnet
Hosts: restbase2013.codfw.wmnet
Hosts: sessionstore1001.eqiad.wmnet
Change-Id: I2560d60c4d6752aeadf51fb9aa97307c368229f0",https://github.com/wikimedia/puppet/commit/a869a71e9accba1f9013aa0772daa288cc545ef8,modules/cassandra/manifests/init.pp,modified
68,puppet,bdbc2d425d6c2d068a25d68032cf4ee3440ed186,"lvs5005: commission new LVS host (eqsin hardware refresh)

lvs5005 will be the new high-traffic2 primary LVS host.

Bug: T322048
Change-Id: Ibfc8207ebb53cd3c7279c40f0f6ca0e91e2c5879",https://github.com/wikimedia/puppet/commit/bdbc2d425d6c2d068a25d68032cf4ee3440ed186,manifests/site.pp,modified
69,puppet,bdbc2d425d6c2d068a25d68032cf4ee3440ed186,"lvs5005: commission new LVS host (eqsin hardware refresh)

lvs5005 will be the new high-traffic2 primary LVS host.

Bug: T322048
Change-Id: Ibfc8207ebb53cd3c7279c40f0f6ca0e91e2c5879",https://github.com/wikimedia/puppet/commit/bdbc2d425d6c2d068a25d68032cf4ee3440ed186,modules/profile/manifests/lvs/configuration.pp,modified
70,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery.pp,modified
71,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/event_service_config.pp,modified
72,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/canary_events.pp,modified
73,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/config.pp,modified
74,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/data_check.pp,modified
75,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/data_purge.pp,modified
76,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/druid_load.pp,modified
77,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/eventlogging_to_druid_job.pp,modified
78,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/gobblin.pp,modified
79,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/gobblin_job.pp,modified
80,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/hdfs_cleaner.pp,modified
81,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/import_commons_mediainfo_dumps.pp,modified
82,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/import_mediawiki_dumps.pp,modified
83,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/import_mediawiki_dumps_config.pp,modified
84,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/import_wikibase_dumps_config.pp,modified
85,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/import_wikidata_entities_dumps.pp,modified
86,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/java_job.pp,modified
87,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/project_namespace_map.pp,modified
88,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/refine.pp,modified
89,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/refine_job.pp,modified
90,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/refine_sanitize.pp,modified
91,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/refine_sanitize_salt_rotate.pp,modified
92,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/spark_job.pp,modified
93,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/sqoop_mediawiki.pp,modified
94,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/test/data_purge.pp,modified
95,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/test/druid_load.pp,modified
96,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/test/gobblin.pp,modified
97,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/test/refine.pp,modified
98,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/job/test/refine_sanitize.pp,modified
99,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/network_region_config.pp,modified
100,puppet,fc98a524be9be65935b8d80b506ca33af5d442b2,"analytics::refinery: Add SPDX headers

Bug: T308013
Change-Id: I197a6ad1572b8229c1e0453f0945b26299d0f24b",https://github.com/wikimedia/puppet/commit/fc98a524be9be65935b8d80b506ca33af5d442b2,modules/profile/manifests/analytics/refinery/repository.pp,modified
101,puppet,95b8af3f58425c637041e3c2a69c10bcba692461,"Enable profile::auto_restarts::service for Superset

Automatically restart Superset if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on an-tool1005 following the latest glibc security update.

Bug: T135991
Change-Id: I49a82f2dd6df0c3f7d269d93786c9e509918407a",https://github.com/wikimedia/puppet/commit/95b8af3f58425c637041e3c2a69c10bcba692461,modules/superset/manifests/init.pp,modified
102,puppet,c56009076ae0e386682540a535ba104cf55f351b,"yarn: Enable profile::auto_restarts::service for Envoy

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on an-tool1008 following the latest glibc security update.

Bug: T135991
Change-Id: I33852b3c752561051b6bf0cac926257e18a98aca",https://github.com/wikimedia/puppet/commit/c56009076ae0e386682540a535ba104cf55f351b,modules/profile/manifests/hadoop/yarn_proxy.pp,modified
103,puppet,343af81dd28f4019d054d9f266048e33567d8924,"hue: Enable profile::auto_restarts::service for Envoy

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on an-tool1009 following the latest glibc security update.

Bug: T135991
Change-Id: Ic942aae6ef6b1940eab59653b431355ad6022960",https://github.com/wikimedia/puppet/commit/343af81dd28f4019d054d9f266048e33567d8924,modules/profile/manifests/hue.pp,modified
104,puppet,c701a95a7dc9ad3642720f0f9647e2feb3dfb84e,"superset: Enable profile::auto_restarts::service for Envoy

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on an-tool1010 following the latest glibc security update.

Bug: T135991
Change-Id: I3c20d16cab53020006dc5545d28615e4695f47ca",https://github.com/wikimedia/puppet/commit/c701a95a7dc9ad3642720f0f9647e2feb3dfb84e,modules/superset/manifests/init.pp,modified
105,puppet,0291603fd0d69bd2f90057834549921575a93377,"package_builder: Don't fail on cleanup jobs

In some cases a few files might fail to get cleanup up (due to dangling
mounts from a test suite or similar). That's no reaon to fail the timers,
though (which otherwise shows up as an error in monitoring).

Change-Id: If94aa13be596abe75fb75bfba577309986843b60",https://github.com/wikimedia/puppet/commit/0291603fd0d69bd2f90057834549921575a93377,modules/package_builder/manifests/init.pp,modified
106,puppet,1f2e95b1733656b073c24bfb041ad815eae47834,"cloudcumin: setup the 2 new VMs

* With the cluster::cloud_management role
* With the virtual partman recipe as they are VMs
* With the settings for the DHCP

Bug: T319401
Change-Id: Iff11a09608fda41ce627d34db30104ff92360e6e",https://github.com/wikimedia/puppet/commit/1f2e95b1733656b073c24bfb041ad815eae47834,manifests/site.pp,modified
107,puppet,36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,"cluster::cloud_management: create new role

* Add a new role for the cloudcumin* hosts that will work as cumin and
  spicerack masters for the WMCS team, managing both WMCS-owned
  production hosts and the Openstack VPS hosts.
* Add the related cumin alias and a cumin-all alias.

Bug: T319401
Change-Id: Ibaa53c5f2fcab9066a6490a4604c931cefdb4b59",https://github.com/wikimedia/puppet/commit/36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,modules/profile/manifests/cumin/master.pp,modified
108,puppet,36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,"cluster::cloud_management: create new role

* Add a new role for the cloudcumin* hosts that will work as cumin and
  spicerack masters for the WMCS team, managing both WMCS-owned
  production hosts and the Openstack VPS hosts.
* Add the related cumin alias and a cumin-all alias.

Bug: T319401
Change-Id: Ibaa53c5f2fcab9066a6490a4604c931cefdb4b59",https://github.com/wikimedia/puppet/commit/36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,modules/profile/manifests/spicerack.pp,modified
109,puppet,36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,"cluster::cloud_management: create new role

* Add a new role for the cloudcumin* hosts that will work as cumin and
  spicerack masters for the WMCS team, managing both WMCS-owned
  production hosts and the Openstack VPS hosts.
* Add the related cumin alias and a cumin-all alias.

Bug: T319401
Change-Id: Ibaa53c5f2fcab9066a6490a4604c931cefdb4b59",https://github.com/wikimedia/puppet/commit/36dc0f2f9a3f0f0b380147b3691cfce80225a0bc,modules/role/manifests/cluster/cloud_management.pp,added
110,puppet,616302cc6b4eb6e2b29262f1276eb5675153cb08,"Add an-presto1008-1015 to presto cluster

Add presto node an-presto1008-1015 to presto cluster

Bug: T323783
Change-Id: I5b94971a999dda26d5c2c92b397f7c8b6b4460d5",https://github.com/wikimedia/puppet/commit/616302cc6b4eb6e2b29262f1276eb5675153cb08,manifests/site.pp,modified
111,puppet,8db9f52318e4eef02b498591aec1a3093b30b59a,"base: remove support for plaintext remote syslog

Bug: T301762
Change-Id: I4b021ee5fc2a0e3b1a750f42e06260f41b26e35d",https://github.com/wikimedia/puppet/commit/8db9f52318e4eef02b498591aec1a3093b30b59a,modules/base/manifests/remote_syslog.pp,modified
112,puppet,8db9f52318e4eef02b498591aec1a3093b30b59a,"base: remove support for plaintext remote syslog

Bug: T301762
Change-Id: I4b021ee5fc2a0e3b1a750f42e06260f41b26e35d",https://github.com/wikimedia/puppet/commit/8db9f52318e4eef02b498591aec1a3093b30b59a,modules/profile/manifests/base.pp,modified
113,puppet,a421157ad207ab002a37fa0b0e32029d92920f38,"C:systemd::syslog: Do not filebucket logfiles

Set backup => false for created syslog directories and files, avoiding
filebucketting large files on absenting a systemd resource.

Bug: T324437
Hosts: deploy1002.eqiad.wmnet,mwmaint1002.eqiad.wmnet
Change-Id: I3f0d1ab713ce4a928090e1a0a6835c927564df76",https://github.com/wikimedia/puppet/commit/a421157ad207ab002a37fa0b0e32029d92920f38,modules/systemd/manifests/syslog.pp,modified
114,puppet,23836358217fb8cbe16aa6da1816f0668c691171,"C:vopsbot: Notify service on config change

Hosts: alert1001.wikimedia.org
Change-Id: I2281e50b1ee85fb85614bfd64939322618fbe07f",https://github.com/wikimedia/puppet/commit/23836358217fb8cbe16aa6da1816f0668c691171,modules/vopsbot/manifests/init.pp,modified
115,puppet,c79d08508167c5d6fd2c9c2d34a616a35e5aeb9e,"Enable profile::auto_restarts::service for Burrow

Automatically restart Burrow if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each business day (on Mo-Fr).

Tested on kafkamon2002 with the logging-codfw topic following
the latest glibc update.

There's also prior evidence at T196158 that the restarts are not causing
false positives (and otherwise we can still fine-tune as needed).

Hosts: kafkamon2002.codfw.wmnet,kafkamon1002.eqiad.wmnet
Bug: T135991
Change-Id: If8d5caa8f4e875b704d1926c7688dffd0bb83e33",https://github.com/wikimedia/puppet/commit/c79d08508167c5d6fd2c9c2d34a616a35e5aeb9e,modules/profile/manifests/kafka/burrow.pp,modified
116,puppet,7e59ffa51987da352f5411dca3b7145e0a13a8b6,"site.pp: Clarify db1206 isn't production ready

db1206 is a host testing the new PERC 755, should only be serving
traffic during work hours for now.

Change-Id: I43a18211784d921907a230841be8a9370fad55de",https://github.com/wikimedia/puppet/commit/7e59ffa51987da352f5411dca3b7145e0a13a8b6,manifests/site.pp,modified
117,puppet,de52d54909335918d88f5155c634a4cc7a031bda,"Adding kubernetes1023/1024 to site.pp

Bug: T313873
Change-Id: I1b144b1f51be00b87d051350c4328be82d639159",https://github.com/wikimedia/puppet/commit/de52d54909335918d88f5155c634a4cc7a031bda,manifests/site.pp,modified
118,puppet,665d58f6677e145f8dfbe8fc854e6c438784e708,"Adding cephosd servers to site.pp insetup role

Bug: T322760
Change-Id: I5bd65cf64a013a19c648520212796b487387ac69",https://github.com/wikimedia/puppet/commit/665d58f6677e145f8dfbe8fc854e6c438784e708,manifests/site.pp,modified
119,puppet,60bc2e867eb86a6482a92f92f410ae96b969691f,"adding eqsin ganeti

adding new eqsin ganeti hosts as role insetup

Bug: T322048
Change-Id: I3b2ae314b1a67c2818935acab48f41934a3bc1c4",https://github.com/wikimedia/puppet/commit/60bc2e867eb86a6482a92f92f410ae96b969691f,manifests/site.pp,modified
120,puppet,17fab457c80e77d7dda919dd1bd881a6fa332b34,"Add new sretest codfw node to site.pp and netboot.cfg

Bug: T322578
Change-Id: I5917dd2e257d820fff12eba81bef3ae0d3b306ad",https://github.com/wikimedia/puppet/commit/17fab457c80e77d7dda919dd1bd881a6fa332b34,manifests/site.pp,modified
121,puppet,07f4664181e85a7932519fea5ed3dbf5c050869d,"search: drop search-drop-query-clicks systemd timer (1/2)

Hosts: stat1007.eqiad.wmnet
Change-Id: Ie419a42231665cff287381d79fe74474dc2705eb",https://github.com/wikimedia/puppet/commit/07f4664181e85a7932519fea5ed3dbf5c050869d,modules/profile/manifests/analytics/search/jobs.pp,modified
122,puppet,0f1fb4a96700f02b49bd899cd0b93933843c1239,"exim: Disable IPv6 on mail hosts on cloud vms

Bug: T324051
Hosts: P:mail::smarthost
Hosts: P:toolforge::mailrelay
Hosts: C:toolserver_legacy
Change-Id: Iab3c8b090b8e402bea16ae8f8c8533721912932f",https://github.com/wikimedia/puppet/commit/0f1fb4a96700f02b49bd899cd0b93933843c1239,modules/profile/manifests/mail/smarthost.pp,modified
123,puppet,3fccffbf20d8812120cdddf0dda822cf5d6d93dd,"P:mediawiki::deployment::server: set helm env

Setup helm/helmfile environment variables in the systemd::timer for
train-presync.

Hosts: deploy1002.eqiad.wmnet
Bug: T324553
Change-Id: I0f6aede950501d69ab0000640aec019df4afd136",https://github.com/wikimedia/puppet/commit/3fccffbf20d8812120cdddf0dda822cf5d6d93dd,modules/profile/manifests/kubernetes/deployment_server.pp,modified
124,puppet,3fccffbf20d8812120cdddf0dda822cf5d6d93dd,"P:mediawiki::deployment::server: set helm env

Setup helm/helmfile environment variables in the systemd::timer for
train-presync.

Hosts: deploy1002.eqiad.wmnet
Bug: T324553
Change-Id: I0f6aede950501d69ab0000640aec019df4afd136",https://github.com/wikimedia/puppet/commit/3fccffbf20d8812120cdddf0dda822cf5d6d93dd,modules/profile/manifests/mediawiki/deployment/server.pp,modified
125,puppet,6a982c1bf03d065954f8a79a3ed965eff181f0d8,"maps: remove tilerator::regen

This is no longer needed and is causing icinga noise

Bug: T298246
Change-Id: Ifc31550caef67753cb86968ed6f8d7bbcadf83f1",https://github.com/wikimedia/puppet/commit/6a982c1bf03d065954f8a79a3ed965eff181f0d8,modules/profile/manifests/maps/osm_master.pp,modified
126,puppet,6a982c1bf03d065954f8a79a3ed965eff181f0d8,"maps: remove tilerator::regen

This is no longer needed and is causing icinga noise

Bug: T298246
Change-Id: Ifc31550caef67753cb86968ed6f8d7bbcadf83f1",https://github.com/wikimedia/puppet/commit/6a982c1bf03d065954f8a79a3ed965eff181f0d8,modules/tilerator/manifests/regen.pp,removed
127,puppet,ed81cc4d99403f0a4d43e484ae46a44e3ae12df0,"Add python-is-python3 package

Add python-is-python3 to the presto servers running debian 11 bullseye.
python on /usr/bin/python is unversioned in bullseye
the debian package adds a symlink to python3
fix package name

Bug: T323783
Change-Id: I34fd285953bdb42d3834c59f6867b7f93aae5b84",https://github.com/wikimedia/puppet/commit/ed81cc4d99403f0a4d43e484ae46a44e3ae12df0,modules/presto/manifests/server.pp,modified
128,puppet,ffa2049fa0abd39a3e68b54b18f4807021ede2ec,"icinga: move mgmt_parents to icinga

This hash is used in facilites module to map PDUs to their parent
switch.

Bug: T310266
Change-Id: I64011fa84a65ea78500ae5a604c205c72b347085",https://github.com/wikimedia/puppet/commit/ffa2049fa0abd39a3e68b54b18f4807021ede2ec,modules/monitoring/manifests/init.pp,modified
129,puppet,ffa2049fa0abd39a3e68b54b18f4807021ede2ec,"icinga: move mgmt_parents to icinga

This hash is used in facilites module to map PDUs to their parent
switch.

Bug: T310266
Change-Id: I64011fa84a65ea78500ae5a604c205c72b347085",https://github.com/wikimedia/puppet/commit/ffa2049fa0abd39a3e68b54b18f4807021ede2ec,modules/profile/manifests/monitoring.pp,modified
130,puppet,be95447a60571c19525983f88f71d964eb6ecf4e,"site: remove phab1001

This host has been decom'ed by the cookbook now.

Bug: T323418
Change-Id: I53c60f32ef1c226944ed8fd89609b22db739f6fd",https://github.com/wikimedia/puppet/commit/be95447a60571c19525983f88f71d964eb6ecf4e,manifests/site.pp,modified
131,puppet,009efea662841d577d4fd771183240f06399eb50,"site/phabricator: fix insetup role name which is now team specific

The generic ""insetup"" role does not exist anymore, only team
specific ones.

Bug: T323418
Change-Id: I6e9c6a426fdbf413bb79a7b59d7b1fa680c67ceb",https://github.com/wikimedia/puppet/commit/009efea662841d577d4fd771183240f06399eb50,manifests/site.pp,modified
132,puppet,2bf287f9256dafceb7223d5e136fcad71e01671c,"rsyslog: allow specifying TLS client auth settings and filename property

Bug: T127717
Change-Id: Ib6d88c2ae4aeb34e2a40d4b23f9037f760fa734b",https://github.com/wikimedia/puppet/commit/2bf287f9256dafceb7223d5e136fcad71e01671c,modules/base/manifests/remote_syslog.pp,modified
133,puppet,2bf287f9256dafceb7223d5e136fcad71e01671c,"rsyslog: allow specifying TLS client auth settings and filename property

Bug: T127717
Change-Id: Ib6d88c2ae4aeb34e2a40d4b23f9037f760fa734b",https://github.com/wikimedia/puppet/commit/2bf287f9256dafceb7223d5e136fcad71e01671c,modules/profile/manifests/base.pp,modified
134,puppet,2bf287f9256dafceb7223d5e136fcad71e01671c,"rsyslog: allow specifying TLS client auth settings and filename property

Bug: T127717
Change-Id: Ib6d88c2ae4aeb34e2a40d4b23f9037f760fa734b",https://github.com/wikimedia/puppet/commit/2bf287f9256dafceb7223d5e136fcad71e01671c,modules/profile/manifests/syslog/centralserver.pp,modified
135,puppet,2bf287f9256dafceb7223d5e136fcad71e01671c,"rsyslog: allow specifying TLS client auth settings and filename property

Bug: T127717
Change-Id: Ib6d88c2ae4aeb34e2a40d4b23f9037f760fa734b",https://github.com/wikimedia/puppet/commit/2bf287f9256dafceb7223d5e136fcad71e01671c,modules/rsyslog/manifests/receiver.pp,modified
136,puppet,207bacae9bfcb42ee3718d3ee128e9e3109e65de,"phabricator: remove production role from phab1001

Bug: T280597
Bug: T323418
Change-Id: I01c6258ae2f36fd41dc22bcd3722624bfa4c8694",https://github.com/wikimedia/puppet/commit/207bacae9bfcb42ee3718d3ee128e9e3109e65de,manifests/site.pp,modified
137,puppet,2a8ab69313723ea11a46ba9f278854abe059c1c6,"cp5016: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: Ibafe6027cc002f670a189471f03e3c48c12fe339",https://github.com/wikimedia/puppet/commit/2a8ab69313723ea11a46ba9f278854abe059c1c6,manifests/site.pp,modified
138,puppet,6a8a6442cf890cd1c6001f09e15195ce3faaa7f9,"cp5015: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: I6511074938579c95839e8e2c5a888804ae47ba2d",https://github.com/wikimedia/puppet/commit/6a8a6442cf890cd1c6001f09e15195ce3faaa7f9,manifests/site.pp,modified
139,puppet,82bdb6e0ab1876f382e0b733e66115e7bbcee25b,"cp5012, cp5014: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: I015f263370546d6ba70e6f3d5e7d061392c3e3d9",https://github.com/wikimedia/puppet/commit/82bdb6e0ab1876f382e0b733e66115e7bbcee25b,manifests/site.pp,modified
140,puppet,22f838a9b79dd595b16b216b2192f5d2f2802e8c,"cp5011, cp5013: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: If1c7bcefe1853843a46d3f44b7e9ca21f5739432",https://github.com/wikimedia/puppet/commit/22f838a9b79dd595b16b216b2192f5d2f2802e8c,manifests/site.pp,modified
141,puppet,4e8ba1f90c8d5faa446db5e507040112f1cae9f5,"zuul: Add SPDX headers

Bug: T308013
Change-Id: Ida0a38eecb3d7cb83f0fc3faf72bcd7f5edc74b3",https://github.com/wikimedia/puppet/commit/4e8ba1f90c8d5faa446db5e507040112f1cae9f5,modules/profile/manifests/zuul/merger.pp,modified
142,puppet,4e8ba1f90c8d5faa446db5e507040112f1cae9f5,"zuul: Add SPDX headers

Bug: T308013
Change-Id: Ida0a38eecb3d7cb83f0fc3faf72bcd7f5edc74b3",https://github.com/wikimedia/puppet/commit/4e8ba1f90c8d5faa446db5e507040112f1cae9f5,modules/profile/manifests/zuul/server.pp,modified
143,puppet,ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,"calico / dragonfly: Add SPDX headers

Bug: T308013
Change-Id: I59d3b063608eec1180efc72bdc553871aec4e10d",https://github.com/wikimedia/puppet/commit/ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,modules/profile/manifests/calico/kubernetes.pp,modified
144,puppet,ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,"calico / dragonfly: Add SPDX headers

Bug: T308013
Change-Id: I59d3b063608eec1180efc72bdc553871aec4e10d",https://github.com/wikimedia/puppet/commit/ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,modules/profile/manifests/dragonfly/dfdaemon.pp,modified
145,puppet,ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,"calico / dragonfly: Add SPDX headers

Bug: T308013
Change-Id: I59d3b063608eec1180efc72bdc553871aec4e10d",https://github.com/wikimedia/puppet/commit/ca0ed4b2bb3a66eb38cb48cd032305dc2c1932eb,modules/profile/manifests/dragonfly/supernode.pp,modified
146,puppet,bb0c2c569d461d6da5b586bda65f3bfbe684b12a,"mediawiki::maintenance::campaignevents: meta

Add a production periodic job for campaignevents timezone script on
metawiki.
Merge when extension has been deployed to production metawiki.

Bug: T320403
Hosts: mwmaint1002.eqiad.wmnet
Change-Id: Idf07e396ffcea2e64fde7c596c15346ce9b70ff1",https://github.com/wikimedia/puppet/commit/bb0c2c569d461d6da5b586bda65f3bfbe684b12a,modules/profile/manifests/mediawiki/maintenance/campaignevents.pp,modified
147,puppet,d8468122e11da677b37167e39c737e99950f7c13,"uwsgi: Add support for bookworm

Used by the puppetdb microservice.

Bug: T321783
Change-Id: Icf832ec363bee3282c142f59fa9d7b5f4df3cddd",https://github.com/wikimedia/puppet/commit/d8468122e11da677b37167e39c737e99950f7c13,modules/uwsgi/manifests/init.pp,modified
148,puppet,5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,"icinga: decom mgmt monitoring

We're probing ssh via Prometheus/Blackbox, thus remove mgmt hosts and
checks from Icinga.

Bug: T310266
Change-Id: I270559c2071ceaa7032c8979a86992675653828c",https://github.com/wikimedia/puppet/commit/5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,modules/monitoring/manifests/host.pp,modified
149,puppet,5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,"icinga: decom mgmt monitoring

We're probing ssh via Prometheus/Blackbox, thus remove mgmt hosts and
checks from Icinga.

Bug: T310266
Change-Id: I270559c2071ceaa7032c8979a86992675653828c",https://github.com/wikimedia/puppet/commit/5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,modules/monitoring/manifests/init.pp,modified
150,puppet,5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,"icinga: decom mgmt monitoring

We're probing ssh via Prometheus/Blackbox, thus remove mgmt hosts and
checks from Icinga.

Bug: T310266
Change-Id: I270559c2071ceaa7032c8979a86992675653828c",https://github.com/wikimedia/puppet/commit/5c6fcb2b16ed45cd20f22db76d0617e58f7a2b4b,modules/profile/manifests/monitoring.pp,modified
151,puppet,1b8acafba03e4600a067844a67cc9d0ee4e51d93,"envoy: Add SPDX headers

Bug: T308013
Change-Id: Ib68ec6ba16cacda2b28911a5ba37a5bbd2ab6bd5",https://github.com/wikimedia/puppet/commit/1b8acafba03e4600a067844a67cc9d0ee4e51d93,modules/profile/manifests/envoy.pp,modified
152,puppet,1b8acafba03e4600a067844a67cc9d0ee4e51d93,"envoy: Add SPDX headers

Bug: T308013
Change-Id: Ib68ec6ba16cacda2b28911a5ba37a5bbd2ab6bd5",https://github.com/wikimedia/puppet/commit/1b8acafba03e4600a067844a67cc9d0ee4e51d93,modules/profile/manifests/envoy/builder.pp,modified
153,puppet,2ab655712eb6ea0b7851643d7a4f6ee3327afd98,"presto: Add SPDX headers

Bug: T308013
Change-Id: I907e64435aeed348f87135f7d612e27a3f46ae25",https://github.com/wikimedia/puppet/commit/2ab655712eb6ea0b7851643d7a4f6ee3327afd98,modules/profile/manifests/presto/client.pp,modified
154,puppet,2ab655712eb6ea0b7851643d7a4f6ee3327afd98,"presto: Add SPDX headers

Bug: T308013
Change-Id: I907e64435aeed348f87135f7d612e27a3f46ae25",https://github.com/wikimedia/puppet/commit/2ab655712eb6ea0b7851643d7a4f6ee3327afd98,modules/profile/manifests/presto/monitoring/server.pp,modified
155,puppet,2ab655712eb6ea0b7851643d7a4f6ee3327afd98,"presto: Add SPDX headers

Bug: T308013
Change-Id: I907e64435aeed348f87135f7d612e27a3f46ae25",https://github.com/wikimedia/puppet/commit/2ab655712eb6ea0b7851643d7a4f6ee3327afd98,modules/profile/manifests/presto/server.pp,modified
156,puppet,39fe4fbbe80d3a2359c7cfc6c585c2b594067853,"postgresql::server: Add bookworm support

Hosts: auto
Bug: T321783
Change-Id: I202866b396f020450299af2932fa1d632f91ea89",https://github.com/wikimedia/puppet/commit/39fe4fbbe80d3a2359c7cfc6c585c2b594067853,modules/postgresql/manifests/server.pp,modified
157,puppet,489297fa833ac555b4aed58d744ce61d4c96575a,"lvs5004: set as high-traffic1 primary LVS and remove lvs5001 (decomm)

Bug: T323830
Change-Id: I2519ed8f1a25afc8275887b13b61347a3ebe2278",https://github.com/wikimedia/puppet/commit/489297fa833ac555b4aed58d744ce61d4c96575a,manifests/site.pp,modified
158,puppet,489297fa833ac555b4aed58d744ce61d4c96575a,"lvs5004: set as high-traffic1 primary LVS and remove lvs5001 (decomm)

Bug: T323830
Change-Id: I2519ed8f1a25afc8275887b13b61347a3ebe2278",https://github.com/wikimedia/puppet/commit/489297fa833ac555b4aed58d744ce61d4c96575a,modules/profile/manifests/lvs/configuration.pp,modified
159,puppet,c03e20616ec39367428bde383b40464907729304,"profile::pybal: expand the lvs hostname regexen.

We run into this often when installing new LVS machines.  It makes
sense for now to expand all the sites' regexes here (well, other
than drmrs) to cover future lvs hostnames automatically.

Bug: T322048
Change-Id: I0bd01bdf72fa7ecd9f7e1f7b0bdc336da7d51e8f",https://github.com/wikimedia/puppet/commit/c03e20616ec39367428bde383b40464907729304,modules/profile/manifests/pybal.pp,modified
160,puppet,9614b0499a9fff37578dcfd7b84f483e92bb75e4,"netmon: Open LibreNMS port for netmon2002.

Bug: T315523
Change-Id: I9164aaa4ddb71135fd0f872fd57ac2952c98e011",https://github.com/wikimedia/puppet/commit/9614b0499a9fff37578dcfd7b84f483e92bb75e4,modules/profile/manifests/mariadb/ferm_misc.pp,modified
161,puppet,cf046dcd04e20f9d62584b0bdcf30ebe33c0d714,"Revert ""Revert ""lvs5004: commission new LVS host (eqsin hardware refresh)""""

This reverts commit 82984eb938bbe9427f640495e684a6c553d50e9f.

Reason for revert: reimaging time

Change-Id: Ia08eb1584008ee1d39367392447db3ff8f168520",https://github.com/wikimedia/puppet/commit/cf046dcd04e20f9d62584b0bdcf30ebe33c0d714,manifests/site.pp,modified
162,puppet,cf046dcd04e20f9d62584b0bdcf30ebe33c0d714,"Revert ""Revert ""lvs5004: commission new LVS host (eqsin hardware refresh)""""

This reverts commit 82984eb938bbe9427f640495e684a6c553d50e9f.

Reason for revert: reimaging time

Change-Id: Ia08eb1584008ee1d39367392447db3ff8f168520",https://github.com/wikimedia/puppet/commit/cf046dcd04e20f9d62584b0bdcf30ebe33c0d714,modules/profile/manifests/lvs/configuration.pp,modified
163,puppet,f6a617c7552dbfff58f6708faa5b3b2b30fe9757,"P:dns::auth::update: increase git clone timeout

As discussed in T324334, try increasing the git::clone timeout as a
short-term solution for the cloning issues that lead to cascading Puppet
failures during the reimage of dns5004.

Bug: T324334
Hosts: dns5002.wikimedia.org
Change-Id: Iae6185f352fbb6c63efd44874be89b39f03e5c24",https://github.com/wikimedia/puppet/commit/f6a617c7552dbfff58f6708faa5b3b2b30fe9757,modules/profile/manifests/dns/auth/update.pp,modified
164,puppet,946f9c2d434cbf44282c66e94cd4e97ecc5b94fe,"harbor: fix interpolation in onlyif detecting compose

There was a bug introduced when escaping dollars in the heredoc
string.
This time made sure it's exactly as tested in the puppetmaster.

Bug: T324314
Signed-off-by: David Caro <dcaro@wikimedia.org>
Change-Id: I17c9be04e885f2f0d70bb4d08e37a3abc0721021
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/946f9c2d434cbf44282c66e94cd4e97ecc5b94fe,modules/profile/manifests/toolforge/harbor.pp,modified
165,puppet,ea50819813078027b51cab14ec31793a683e0ccc,"Add an-presto1007 to presto cluster

Add presto node an-presto1007 to presto cluster with
python-is-python3 package preinstalled

Bug: T323783
Change-Id: Ib5d7c6ef4f0b51e21b75bb6fdb30417922671224",https://github.com/wikimedia/puppet/commit/ea50819813078027b51cab14ec31793a683e0ccc,manifests/site.pp,modified
166,puppet,2860aabd52a850982b9911ad500e11b08e20b599,"ldap:client:utils remove outdated ldaplist util.

We have been meaning to remove ldaputils for 7 years.
The code is still Python2 and people should have
migrated to ldapsearch by now.

Bug: T114063
Change-Id: Id1035506d5cead7b7c82ef577672a7bc9d6bac9b",https://github.com/wikimedia/puppet/commit/2860aabd52a850982b9911ad500e11b08e20b599,modules/ldap/manifests/client/utils.pp,modified
167,puppet,b2c3915084e9f9c23c0c3d165d6859bdbc1d3304,"mwdebug_deploy: remove deployment timer

Deployments to the K8s cluster (including mwdebug releases) now
happen during scap deployments

Change-Id: Ic2cc211b7a380fe4bd3345a0d3a8ee6224960cf2",https://github.com/wikimedia/puppet/commit/b2c3915084e9f9c23c0c3d165d6859bdbc1d3304,modules/profile/manifests/kubernetes/deployment_server/mediawiki/mwdebug_deploy.pp,modified
168,puppet,f56b6c7c336bf32b15af83f304de36f32deb0a02,"Remove ganeti5001 from Puppet

To be decommissioned.

Bug: T322048
Change-Id: I54e2753da6e8ab21236ea86815c1e72598ca7381",https://github.com/wikimedia/puppet/commit/f56b6c7c336bf32b15af83f304de36f32deb0a02,manifests/site.pp,modified
169,puppet,a7ab0d02262209fcfbc7ee1e0ac3c296741d4c7f,"site.pp: db1132 is no longer special

We have more 10.6 hosts.

Change-Id: I1408a0d8279f6f7feb0f839e72ccf3b82a52fc64",https://github.com/wikimedia/puppet/commit/a7ab0d02262209fcfbc7ee1e0ac3c296741d4c7f,manifests/site.pp,modified
170,puppet,c624cdd1e8129673f36a7124dcf9e58f0e101d17,"mariadb: Add db1206 to s1

Bug: T324181
Change-Id: I2bc6099b4a1add3020cd6238eb977793bbe00a48",https://github.com/wikimedia/puppet/commit/c624cdd1e8129673f36a7124dcf9e58f0e101d17,manifests/site.pp,modified
171,puppet,82984eb938bbe9427f640495e684a6c553d50e9f,"Revert ""lvs5004: commission new LVS host (eqsin hardware refresh)""

This reverts commit 0567c7bc67da200c75b8315596d717a647093989.

Reason for revert: reimaging will happen tomorrow, so removing Puppet
patch for now just in case it alerts or something.

Change-Id: I1d038d3d1af6158a9638ff854207a7b0b8a90a11",https://github.com/wikimedia/puppet/commit/82984eb938bbe9427f640495e684a6c553d50e9f,manifests/site.pp,modified
172,puppet,82984eb938bbe9427f640495e684a6c553d50e9f,"Revert ""lvs5004: commission new LVS host (eqsin hardware refresh)""

This reverts commit 0567c7bc67da200c75b8315596d717a647093989.

Reason for revert: reimaging will happen tomorrow, so removing Puppet
patch for now just in case it alerts or something.

Change-Id: I1d038d3d1af6158a9638ff854207a7b0b8a90a11",https://github.com/wikimedia/puppet/commit/82984eb938bbe9427f640495e684a6c553d50e9f,modules/profile/manifests/lvs/configuration.pp,modified
173,puppet,78a07930d7944710ef8e69aea9d3804d4d10147a,"site: remove old appservers

Bug: T306162
Change-Id: I11f6598729e9fef328b39e3191593ca274d05ed8",https://github.com/wikimedia/puppet/commit/78a07930d7944710ef8e69aea9d3804d4d10147a,manifests/site.pp,modified
174,puppet,6873f12ce42ddf4b20bb3778d567a496ce712f63,"varnish: Remove unused dstat plugins

These were committed back in 2016 and haven't been in use for quite some
time. They still refer to the long-since abandoned frontend/backend
Varnish deployments and likely don't even work any more.

Change-Id: Ia2284581e067b5d1c62681ef8675b7d4df6339d2",https://github.com/wikimedia/puppet/commit/6873f12ce42ddf4b20bb3778d567a496ce712f63,modules/varnish/manifests/common.pp,modified
175,puppet,36a76e7054a9d011623b3d8bda2b22e01191d6f6,"snapshot: Parallelize cirrus dumps by db shard

CirrusSearch changed over to use a more resilient, but slower, method
of generating the dumps in Ifb5f043e3d. To get the dumps to complete
in a reasonable time frame parallelize the dumps by running the script
once for each database shard.

As part of this the dump of CirrusSearch's metastore index has been
removed. With the sharding it would have been repeatedly dumped for
each shard, fixing would mean another timer/script to only dump this
index. The index itself has been less used over time, it's rarely
referenced in production other than for state of a process that loops
through the other indices checking for out-of-date revisions.

Bug: T265056
Hosts: snapshot1008.eqiad.wmnet
Change-Id: I311f99a0b95517c568a63256ef6afa19de867e8e",https://github.com/wikimedia/puppet/commit/36a76e7054a9d011623b3d8bda2b22e01191d6f6,modules/snapshot/manifests/systemdjobs/cirrussearch.pp,modified
176,puppet,0567c7bc67da200c75b8315596d717a647093989,"lvs5004: commission new LVS host (eqsin hardware refresh)

lvs5004 will be the new high-traffic1 primary LVS host.

Bug: T322048
Change-Id: Ie613712cd8c11b4bddbb9cd4bdf54e0f88beeb94",https://github.com/wikimedia/puppet/commit/0567c7bc67da200c75b8315596d717a647093989,manifests/site.pp,modified
177,puppet,0567c7bc67da200c75b8315596d717a647093989,"lvs5004: commission new LVS host (eqsin hardware refresh)

lvs5004 will be the new high-traffic1 primary LVS host.

Bug: T322048
Change-Id: Ie613712cd8c11b4bddbb9cd4bdf54e0f88beeb94",https://github.com/wikimedia/puppet/commit/0567c7bc67da200c75b8315596d717a647093989,modules/profile/manifests/lvs/configuration.pp,modified
178,puppet,5492e0735967f81b37da10bb9d8bbfaf228d92e5,"growthexperiments: Use min edit limit for user impact refresh

mediawiki::maintenance::growthexperiments: Use --hasEditsAtLeast=3
in refreshUserImpactData.php to limit the amount of users processed.

(The corresponding MediaWiki change is in wmf.12 but the script is
behind a feature flag and disabled until wmf.12 is deployed, so
this is safe to merge.)

Bug: T323958
Change-Id: Ic96d481a3f80e274de55ab170fb7a11335e5a5f4
Depends-On: Id5c17c3601a0096b5b1ac88a1b3c74a1646e060f",https://github.com/wikimedia/puppet/commit/5492e0735967f81b37da10bb9d8bbfaf228d92e5,modules/profile/manifests/mediawiki/maintenance/growthexperiments.pp,modified
179,puppet,0bfc0f8fe96298ee696a20a850fd619eabaf39f7,"P:cache::haproxy: harden systemd unit

The haproxy systemd unit utilized by the cp hosts should be hardened,
and this commit is a first step towards that. The plan is to work on
incrementally hardening the unit by first starting with the ""obvious""
sandboxing options and then restricting the service capabilities even
further.

Bug: T323944
Hosts: cp4045.ulsfo.wmnet
Change-Id: I4f25608ba9e3f7b4b796c4b48d4ede146e7b9d72",https://github.com/wikimedia/puppet/commit/0bfc0f8fe96298ee696a20a850fd619eabaf39f7,modules/profile/manifests/cache/haproxy.pp,modified
180,puppet,be1c67235b3e1917f15b2a7df2424f140c87850e,"idp::standalone: correct permissions

Change-Id: I1d4e548babdd3cc08b4b22d86114e86a3227d33c",https://github.com/wikimedia/puppet/commit/be1c67235b3e1917f15b2a7df2424f140c87850e,modules/profile/manifests/idp/standalone.pp,modified
181,puppet,ad1f72d659cb36bbca1f7f3a5e78b292586751fb,"Add new cloudvirt node to site.pp

Bug: T313983
Change-Id: I390a959df44c2ff1aca125f2522acaf7c5f498f1",https://github.com/wikimedia/puppet/commit/ad1f72d659cb36bbca1f7f3a5e78b292586751fb,manifests/site.pp,modified
182,puppet,bac601c5edd4eae7e4bd1c533e5ce81192742b7b,"idp::standlone: corrcet file name

Change-Id: I541cdb314dd50be7a99e1686fc929da616480287",https://github.com/wikimedia/puppet/commit/bac601c5edd4eae7e4bd1c533e5ce81192742b7b,modules/profile/manifests/idp/standalone.pp,modified
183,puppet,bca32f699f431d8deeecf14a88b5fe0441be3256,"idp::standalone: config is not a hash

Change-Id: I413d69fceada9fb420c3868e5286455bf2a504e2",https://github.com/wikimedia/puppet/commit/bca32f699f431d8deeecf14a88b5fe0441be3256,modules/profile/manifests/idp/standalone.pp,modified
184,puppet,2aba2f2ddb5a9e27350ea72b5cc1c6e039c97e76,"idp::standalone: correct name of local_settings

Change-Id: I94127a7e4819f212b96c0b2ad2ad5f9bfaa8486d",https://github.com/wikimedia/puppet/commit/2aba2f2ddb5a9e27350ea72b5cc1c6e039c97e76,modules/profile/manifests/idp/standalone.pp,modified
185,puppet,1ec58ca676d7669508c4e6e2c3a5e33b3ad67ff9,"idp::standalon: use production value for oidc_endpoint

Change-Id: I4c66db8f25170ab27cdc707f8e04a6091792d5bc",https://github.com/wikimedia/puppet/commit/1ec58ca676d7669508c4e6e2c3a5e33b3ad67ff9,modules/profile/manifests/idp/standalone.pp,modified
186,puppet,7a251df7c09f32134250bed3f2a14fa104d5a6a6,"idp::standalon: Add OIDC config

Hosts: auto
Hosts: P:idp::client::httpd
Bug: T311999
Change-Id: I022f0336d84d85bb490ac2172a5bca8b1eab6ee3",https://github.com/wikimedia/puppet/commit/7a251df7c09f32134250bed3f2a14fa104d5a6a6,modules/apereo_cas/types/urls.pp,modified
187,puppet,7a251df7c09f32134250bed3f2a14fa104d5a6a6,"idp::standalon: Add OIDC config

Hosts: auto
Hosts: P:idp::client::httpd
Bug: T311999
Change-Id: I022f0336d84d85bb490ac2172a5bca8b1eab6ee3",https://github.com/wikimedia/puppet/commit/7a251df7c09f32134250bed3f2a14fa104d5a6a6,modules/profile/manifests/idp/standalone.pp,modified
188,puppet,31fccceb6d9a3dfc217ba76ade43aab212bbc07d,"Promote the aqs_next role to be aqs

Now that we have finished decommissioning the old aqs Cassandra2 servers
we can carry out these cleanup operations to rename the aqs_next role
back to aqs.

We will want to be careful about deploying this, since it will need to
take into account linked changes to the private repo as well.

Hosts: auto
Bug: T302278
Change-Id: I5b34cc727c6c1e6cb1a1bb78705efe6bdd0ea7d0",https://github.com/wikimedia/puppet/commit/31fccceb6d9a3dfc217ba76ade43aab212bbc07d,manifests/site.pp,modified
189,puppet,31fccceb6d9a3dfc217ba76ade43aab212bbc07d,"Promote the aqs_next role to be aqs

Now that we have finished decommissioning the old aqs Cassandra2 servers
we can carry out these cleanup operations to rename the aqs_next role
back to aqs.

We will want to be careful about deploying this, since it will need to
take into account linked changes to the private repo as well.

Hosts: auto
Bug: T302278
Change-Id: I5b34cc727c6c1e6cb1a1bb78705efe6bdd0ea7d0",https://github.com/wikimedia/puppet/commit/31fccceb6d9a3dfc217ba76ade43aab212bbc07d,modules/profile/manifests/prometheus/analytics.pp,modified
190,puppet,31fccceb6d9a3dfc217ba76ade43aab212bbc07d,"Promote the aqs_next role to be aqs

Now that we have finished decommissioning the old aqs Cassandra2 servers
we can carry out these cleanup operations to rename the aqs_next role
back to aqs.

We will want to be careful about deploying this, since it will need to
take into account linked changes to the private repo as well.

Hosts: auto
Bug: T302278
Change-Id: I5b34cc727c6c1e6cb1a1bb78705efe6bdd0ea7d0",https://github.com/wikimedia/puppet/commit/31fccceb6d9a3dfc217ba76ade43aab212bbc07d,modules/role/manifests/aqs.pp,modified
191,puppet,31fccceb6d9a3dfc217ba76ade43aab212bbc07d,"Promote the aqs_next role to be aqs

Now that we have finished decommissioning the old aqs Cassandra2 servers
we can carry out these cleanup operations to rename the aqs_next role
back to aqs.

We will want to be careful about deploying this, since it will need to
take into account linked changes to the private repo as well.

Hosts: auto
Bug: T302278
Change-Id: I5b34cc727c6c1e6cb1a1bb78705efe6bdd0ea7d0",https://github.com/wikimedia/puppet/commit/31fccceb6d9a3dfc217ba76ade43aab212bbc07d,modules/role/manifests/aqs_next.pp,removed
192,puppet,5ef7b10a41c860a9c1020bdd364dc05a9f07beb1,"idp::standalone: add django oidc app

Change-Id: I77afcdd876b9eb772a280d03932f62cf9418f5b2",https://github.com/wikimedia/puppet/commit/5ef7b10a41c860a9c1020bdd364dc05a9f07beb1,modules/profile/manifests/idp/standalone.pp,modified
193,puppet,d25de37e466e6c14380a4321953bc0308dc67820,"postgresql: Add bookworm support

Bug: T321783
Change-Id: I7c132ea358906ba5ab700ee52b6c8192b28e93d4",https://github.com/wikimedia/puppet/commit/d25de37e466e6c14380a4321953bc0308dc67820,modules/postgresql/manifests/master.pp,modified
194,puppet,d25de37e466e6c14380a4321953bc0308dc67820,"postgresql: Add bookworm support

Bug: T321783
Change-Id: I7c132ea358906ba5ab700ee52b6c8192b28e93d4",https://github.com/wikimedia/puppet/commit/d25de37e466e6c14380a4321953bc0308dc67820,modules/postgresql/manifests/slave.pp,modified
195,puppet,2b2d181358dc4afd0d189fa11222450499b6387c,"kube-env: Move environments and services to config

Add kube-env alias to kube_env function
Add new helpers kube{-,_}{environments,services} to list environments
and services. You can also use the KUBE_ENV_ENVIRONMENTS and
KUBE_ENV_SERVICES environment variables

Bug: T324091
Hosts: deploy1002.eqiad.wmnet
Change-Id: I694fba3b2b83d4986654487a6b4584e8bd596604",https://github.com/wikimedia/puppet/commit/2b2d181358dc4afd0d189fa11222450499b6387c,modules/profile/manifests/kubernetes/deployment_server.pp,modified
196,puppet,65a4e074f8c047900e9babf73b469342f9637d99,"Add an-presto1006 to presto cluster

Add presto node an-presto1006 to presto cluster
fix server regex typo

Bug: T323783
Change-Id: I0a01421edb806721a2fe88ee7de7aaca64ee938c",https://github.com/wikimedia/puppet/commit/65a4e074f8c047900e9babf73b469342f9637d99,manifests/site.pp,modified
197,puppet,d050033b942118f52a4cfe0b23a375e35a213c92,"Make ganeti5004 a Ganeti node

Change-Id: I1047b84fa239f17cc285b89d077349d4186e3a40",https://github.com/wikimedia/puppet/commit/d050033b942118f52a4cfe0b23a375e35a213c92,manifests/site.pp,modified
198,puppet,ecbbc11cf1fc1144f74a1704d3c3528c1ea68ff3,"harbor: ensure that it's started

This makes sure that the containers are up (or tries to start them),
this still requires some other alerting system to notify when they go
down for long.

Bug: T267616
Change-Id: Ib18b238b4bb35885fc6d6335abc03c8e8665c6b8
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/ecbbc11cf1fc1144f74a1704d3c3528c1ea68ff3,modules/profile/manifests/toolforge/harbor.pp,modified
199,puppet,d328877191b84ef1b4402cbc5f275f93397344d4,"toolforge harbor: update certs with acmechief

Acmechief certs are not where the container reads them from, and nginx
needs to be notified when they update anyway. This should have puppet
copy the certs from the local files when they are changed and then send
a docker-compose exec to reload nginx.

Bug: T267616
Change-Id: If9972d079fd6757bbd6e53709d3f36f4cb19a95f
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/d328877191b84ef1b4402cbc5f275f93397344d4,modules/profile/manifests/toolforge/harbor.pp,modified
200,puppet,5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,"harbor: remove unused harbor::db module/role

Bug: T267616
Change-Id: I4343dbbe2434667af788aea25b0f710f4192e2ac
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,modules/profile/manifests/toolforge/harbor.pp,modified
201,puppet,5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,"harbor: remove unused harbor::db module/role

Bug: T267616
Change-Id: I4343dbbe2434667af788aea25b0f710f4192e2ac
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,modules/profile/manifests/toolforge/harbor/db.pp,removed
202,puppet,5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,"harbor: remove unused harbor::db module/role

Bug: T267616
Change-Id: I4343dbbe2434667af788aea25b0f710f4192e2ac
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/5c4a65dcad1b0dc149aa2c6a1d64bfa58d9b1cac,modules/role/manifests/wmcs/toolforge/harbor/db.pp,removed
203,puppet,a274b6af9fbcff92f00447d97ab231ff37ec0a44,"harbor: remove support for <bullseye

We are using bullseye everywhere now

Bug: T267616
Change-Id: I95692a671968dbd5d0f1bf37167393cff7fda30b
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/a274b6af9fbcff92f00447d97ab231ff37ec0a44,modules/profile/manifests/toolforge/harbor.pp,modified
204,puppet,654d2f9c61847526cb1dc8504b883d60b36560f2,"cp5027: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I3b85656549a549ba26b7a0e779d55fdbc80357f7",https://github.com/wikimedia/puppet/commit/654d2f9c61847526cb1dc8504b883d60b36560f2,manifests/site.pp,modified
205,puppet,e36d009e36f21094999c638575248946926f50c7,"cp5026: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I1718a87216fa32e09dc4e10810bd1487b7bcdc66",https://github.com/wikimedia/puppet/commit/e36d009e36f21094999c638575248946926f50c7,manifests/site.pp,modified
206,puppet,bb45e091dc788669554e0cbd6f4c63d2cfd36d50,"cp5025: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I208f63b50a88b48958b825e85bbde4198730b99f",https://github.com/wikimedia/puppet/commit/bb45e091dc788669554e0cbd6f4c63d2cfd36d50,manifests/site.pp,modified
207,puppet,55ff7c6a2b42b0eb14940b8359c9fc2514718f22,"site: add vrts2001 role insetup

Bug: T323515
Change-Id: Iec1e56a8b53963e9c9d20634d79a263205e71a52",https://github.com/wikimedia/puppet/commit/55ff7c6a2b42b0eb14940b8359c9fc2514718f22,manifests/site.pp,modified
208,puppet,dbc4cd98b6ace96e951536b1a681ca42de7603af,"cp5024: update site.pp and related configs for cp role

Bug: T322048
Change-Id: Id58f1736f5fdd03a01e5f6787946a26a5baf84c5",https://github.com/wikimedia/puppet/commit/dbc4cd98b6ace96e951536b1a681ca42de7603af,manifests/site.pp,modified
209,puppet,8f1a909e7e7cffb7da519992f425ae3d77d2fa93,"cp5023: update site.pp and related configs for cp role

Bug: T322048
Change-Id: If2ec1f62fbf652f1e1e8cb4f1cec9123be94fd9c",https://github.com/wikimedia/puppet/commit/8f1a909e7e7cffb7da519992f425ae3d77d2fa93,manifests/site.pp,modified
210,puppet,3976049873ee5f999c17cd4cd3355dd9963284d8,"cp5022: update site.pp and related configs for cp role

Bug: T322048
Change-Id: Iccd1bcd31e1243683298ec1063628a9c497a95c3",https://github.com/wikimedia/puppet/commit/3976049873ee5f999c17cd4cd3355dd9963284d8,manifests/site.pp,modified
211,puppet,8905bd57f30ae2578a15f3a5e4c3613e5fb6742e,"profile::openstack::base::cinder::backup: more keystone_authtoken refactor

followup to fc4b4590db3a898fb577df7759b39acc1f15da0a

Change-Id: I9add7a8d3af865d494b26204c5595bb172ae6e0f",https://github.com/wikimedia/puppet/commit/8905bd57f30ae2578a15f3a5e4c3613e5fb6742e,modules/profile/manifests/openstack/base/cinder/backup.pp,modified
212,puppet,1dcbe3fa899e0919804eff451c18073dd9a943f9,"mediawiki: Add quarterly cleanup of flaggedtemplates table

This table can grow way too big if this script is not run. I have made
improvements on the script to make it runnable but it's still too
expensive to be run every month.

Bug: T290769
Change-Id: I0aed28ab95a6cf49265c5eb3cf8426cf80224a8b",https://github.com/wikimedia/puppet/commit/1dcbe3fa899e0919804eff451c18073dd9a943f9,modules/profile/manifests/mediawiki/maintenance.pp,modified
213,puppet,1dcbe3fa899e0919804eff451c18073dd9a943f9,"mediawiki: Add quarterly cleanup of flaggedtemplates table

This table can grow way too big if this script is not run. I have made
improvements on the script to make it runnable but it's still too
expensive to be run every month.

Bug: T290769
Change-Id: I0aed28ab95a6cf49265c5eb3cf8426cf80224a8b",https://github.com/wikimedia/puppet/commit/1dcbe3fa899e0919804eff451c18073dd9a943f9,modules/profile/manifests/mediawiki/maintenance/purge_flaggedrevs.pp,added
214,puppet,ab39f9717ddec4a7109a8ef154274b8cb043a9be,"Add ganeti5004 to site.pp

Change-Id: Id92a4425342c9431eccc52cd8dd42dd0c2b0d536",https://github.com/wikimedia/puppet/commit/ab39f9717ddec4a7109a8ef154274b8cb043a9be,manifests/site.pp,modified
215,puppet,0a1984aab646c525d6f77a258e1c5e72f6f5f6e4,"idp::standalone: add chdir for uwsgi app

Change-Id: I070c63443105955cf4916d243ce97e9cb638ff5b",https://github.com/wikimedia/puppet/commit/0a1984aab646c525d6f77a258e1c5e72f6f5f6e4,modules/profile/manifests/idp/standalone.pp,modified
216,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/barbican/service.pp,modified
217,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/barbican/service/yoga.pp,modified
218,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/cinder/config/yoga.pp,modified
219,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/designate/service.pp,modified
220,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/glance/service.pp,modified
221,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/glance/service/yoga.pp,modified
222,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/heat/service.pp,modified
223,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/heat/service/yoga.pp,modified
224,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/magnum/service.pp,modified
225,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/magnum/service/yoga.pp,modified
226,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/neutron/common.pp,modified
227,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/neutron/common/yoga.pp,modified
228,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/nova/common.pp,modified
229,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/placement/service.pp,modified
230,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/placement/service/yoga.pp,modified
231,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/trove/service.pp,modified
232,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/openstack/manifests/trove/service/yoga.pp,modified
233,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/barbican.pp,modified
234,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/cinder.pp,modified
235,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/designate/service.pp,modified
236,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/glance.pp,modified
237,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/heat.pp,modified
238,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/magnum.pp,modified
239,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/neutron/common.pp,modified
240,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/nova/common.pp,modified
241,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/placement.pp,modified
242,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/base/trove.pp,modified
243,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/codfw1dev/designate/service.pp,modified
244,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/codfw1dev/nova/common.pp,modified
245,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/eqiad1/designate/service.pp,modified
246,puppet,fc4b4590db3a898fb577df7759b39acc1f15da0a,"Openstack config: move keystone_authtoken into a shared template

This replaces www_authenticate_url with www_authenticate_uri in
many places but oddly www_authenticate_url doesn't seem to be
documented in modern OpenStack anyway.

This also moves the internal and public keystone ports
out of a hiera lookup and into a template. This is a bit
less flexible but it greatly simplifies the manifests
so I think it's worth it.

Change-Id: Ie867100b0f6843e48a2fc429e35fbf511d2e203f",https://github.com/wikimedia/puppet/commit/fc4b4590db3a898fb577df7759b39acc1f15da0a,modules/profile/manifests/openstack/eqiad1/nova/common.pp,modified
247,puppet,9e48cd92612a0a60ea345ae078a197b60047f038,"P:idp::standalone: create virtual env for idp-test-login app

Change-Id: Id7a72cce8c47259858b0735b627629d42b10927d",https://github.com/wikimedia/puppet/commit/9e48cd92612a0a60ea345ae078a197b60047f038,modules/profile/manifests/idp/standalone.pp,modified
248,puppet,bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,"Modify jupyterhub config to point to conda-analytics instead of anaconda-wmf.

This is part of the work to deprecate and replace anaconda-wmf with the lightweight
conda-analytics. Changes assume that jupyterhub and jupyterlab are now being installed
by conda-analytics.

Bug: T321088
Change-Id: I5007c533308a1c99161c5c3a410cadf42c1ee528",https://github.com/wikimedia/puppet/commit/bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,modules/jupyterhub/manifests/server.pp,modified
249,puppet,bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,"Modify jupyterhub config to point to conda-analytics instead of anaconda-wmf.

This is part of the work to deprecate and replace anaconda-wmf with the lightweight
conda-analytics. Changes assume that jupyterhub and jupyterlab are now being installed
by conda-analytics.

Bug: T321088
Change-Id: I5007c533308a1c99161c5c3a410cadf42c1ee528",https://github.com/wikimedia/puppet/commit/bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,modules/profile/manifests/analytics/jupyterhub.pp,modified
250,puppet,bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,"Modify jupyterhub config to point to conda-analytics instead of anaconda-wmf.

This is part of the work to deprecate and replace anaconda-wmf with the lightweight
conda-analytics. Changes assume that jupyterhub and jupyterlab are now being installed
by conda-analytics.

Bug: T321088
Change-Id: I5007c533308a1c99161c5c3a410cadf42c1ee528",https://github.com/wikimedia/puppet/commit/bc44582b08e2ecf5ac2cda4c0e917513cbb012e0,modules/role/manifests/statistics/explorer.pp,modified
251,puppet,b2a8b246ba46fa6de5e9116e152d3d9b4fc880b5,"P:idp: move flask test script to a file

Change-Id: I2ac6f197dc6f4b31251590fced3d5e1b3cda05b1",https://github.com/wikimedia/puppet/commit/b2a8b246ba46fa6de5e9116e152d3d9b4fc880b5,modules/profile/manifests/idp/standalone.pp,modified
252,puppet,f9ae88eeabf48a438679a3702007dceeb5a3726b,"apero_cas: (WIP) add addtional paramas for OIDC

Hosts: auto
Bug: T311999
Change-Id: I9ab79fa46965ffc6e1d65f345df3048ef3077f9b",https://github.com/wikimedia/puppet/commit/f9ae88eeabf48a438679a3702007dceeb5a3726b,modules/apereo_cas/manifests/init.pp,modified
253,puppet,4b8943c1ee5c723d1e50254e841971d693b85578,"graphite: move alerts to graphite1005

Bug: T318903
Change-Id: Ie529854384de294c7f71a3b284795020cadd9be6",https://github.com/wikimedia/puppet/commit/4b8943c1ee5c723d1e50254e841971d693b85578,modules/graphite/manifests/monitoring/graphite.pp,modified
254,puppet,6f546ab49871fb2288c32d77b7306c2868322c70,"stats: failover writes to graphite1005

Bug: T318903
Change-Id: Iafd41a9d9604d021a421cb8bd0a3457846ddb07c",https://github.com/wikimedia/puppet/commit/6f546ab49871fb2288c32d77b7306c2868322c70,modules/profile/manifests/monitoring.pp,modified
255,puppet,f4a9dd4a94eb5ba1acb716b0097f9652fda38070,"Enable profile::auto_restarts::service for prometheus-ipmi-exporter

Automatically restart the Prometheus exporter if underlying runtime library
dependencies have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on pki2002 following the latest glibc update.

Bug: T135991
Change-Id: I585291f6dadad3ed170f8aa7bcfa4a4672e3ff14",https://github.com/wikimedia/puppet/commit/f4a9dd4a94eb5ba1acb716b0097f9652fda38070,modules/prometheus/manifests/ipmi_exporter.pp,modified
256,puppet,92aa46766f3351457cc41e37855609f98ca59a63,"Enable profile::auto_restarts::service for dragonfly-supernode

Automatically restart dragonfly-supernode if underlying runtime
library dependencies have been upgraded (e.g. openssl). The
restart is splayed across each day (on Mo-Fr).

Tested on dragonfly-supernode2001 following the latest glibc
security update.

Bug: T135991
Change-Id: Idcc836646d1682c80e1946e98bd636fa04d18907",https://github.com/wikimedia/puppet/commit/92aa46766f3351457cc41e37855609f98ca59a63,modules/dragonfly/manifests/supernode.pp,modified
257,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch.pp,modified
258,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch/cirrus.pp,modified
259,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch/logstash.pp,modified
260,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch/monitor/base_checks.pp,modified
261,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch/relforge.pp,modified
262,puppet,bbb8955b32e09b2ad37752a8e56ee9995726773b,"elasticsearch: Add SPDX headers

Bug: T308013
Change-Id: I377178ef880cb1bd3fe9c31a1bbb51fdee99c49b",https://github.com/wikimedia/puppet/commit/bbb8955b32e09b2ad37752a8e56ee9995726773b,modules/profile/manifests/elasticsearch/toolforge.pp,modified
263,puppet,9d21b7f0d915b8e9dc179a12683710810f4b9cc1,"Openstack config: move oslo_messaging_rabbit into a shared template

Bug: T318816
Change-Id: I967645ff6af78fa9043b567878ee628379350b8f",https://github.com/wikimedia/puppet/commit/9d21b7f0d915b8e9dc179a12683710810f4b9cc1,modules/openstack/manifests/cinder/config/yoga.pp,modified
264,puppet,9d21b7f0d915b8e9dc179a12683710810f4b9cc1,"Openstack config: move oslo_messaging_rabbit into a shared template

Bug: T318816
Change-Id: I967645ff6af78fa9043b567878ee628379350b8f",https://github.com/wikimedia/puppet/commit/9d21b7f0d915b8e9dc179a12683710810f4b9cc1,modules/openstack/manifests/heat/service/yoga.pp,modified
265,puppet,9d21b7f0d915b8e9dc179a12683710810f4b9cc1,"Openstack config: move oslo_messaging_rabbit into a shared template

Bug: T318816
Change-Id: I967645ff6af78fa9043b567878ee628379350b8f",https://github.com/wikimedia/puppet/commit/9d21b7f0d915b8e9dc179a12683710810f4b9cc1,modules/openstack/manifests/magnum/service/yoga.pp,modified
266,puppet,9d21b7f0d915b8e9dc179a12683710810f4b9cc1,"Openstack config: move oslo_messaging_rabbit into a shared template

Bug: T318816
Change-Id: I967645ff6af78fa9043b567878ee628379350b8f",https://github.com/wikimedia/puppet/commit/9d21b7f0d915b8e9dc179a12683710810f4b9cc1,modules/openstack/manifests/neutron/common/yoga.pp,modified
267,puppet,9d21b7f0d915b8e9dc179a12683710810f4b9cc1,"Openstack config: move oslo_messaging_rabbit into a shared template

Bug: T318816
Change-Id: I967645ff6af78fa9043b567878ee628379350b8f",https://github.com/wikimedia/puppet/commit/9d21b7f0d915b8e9dc179a12683710810f4b9cc1,modules/openstack/manifests/trove/service/yoga.pp,modified
268,puppet,adf304032c2934d6d7af72beeaef09a24f87603e,"Enable profile::auto_restarts::service for Envoy on releases*

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on releases1002 following the latest glibc security update.

Bug: T135991
Change-Id: I7b52d09174d2e8be7ba4983d94cb64d08e3c930a",https://github.com/wikimedia/puppet/commit/adf304032c2934d6d7af72beeaef09a24f87603e,modules/profile/manifests/releases/common.pp,modified
269,puppet,670e351b4e3b531e0749137940d530e8e67b2f79,"apereo_cas: fix delegated authentication config

Also give write permissions to config dir.  required to write
/etc/cas/config/keystore.jwks

Hosts: auto
Change-Id: I41919258199cf77e68940961acd5a9b8eb346849",https://github.com/wikimedia/puppet/commit/670e351b4e3b531e0749137940d530e8e67b2f79,modules/apereo_cas/manifests/init.pp,modified
270,puppet,670e351b4e3b531e0749137940d530e8e67b2f79,"apereo_cas: fix delegated authentication config

Also give write permissions to config dir.  required to write
/etc/cas/config/keystore.jwks

Hosts: auto
Change-Id: I41919258199cf77e68940961acd5a9b8eb346849",https://github.com/wikimedia/puppet/commit/670e351b4e3b531e0749137940d530e8e67b2f79,modules/apereo_cas/types/delegate/cas.pp,modified
271,puppet,e846e0b5dd4fe9dda836fbbd94ea58fe8bd34a5d,"cp5021: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I6f824723577f3bfc3418e5015b91a87e24a666a4",https://github.com/wikimedia/puppet/commit/e846e0b5dd4fe9dda836fbbd94ea58fe8bd34a5d,manifests/site.pp,modified
272,puppet,dd23db58dbbfe8693e6a0b728302a27797b1e7c3,"P:idp::standalone: fix minor formating issues

Change-Id: Id74728bfed66ccd99c0b91870e2b3fdf645cb9dc",https://github.com/wikimedia/puppet/commit/dd23db58dbbfe8693e6a0b728302a27797b1e7c3,modules/profile/manifests/idp/standalone.pp,modified
273,puppet,393d32daa19e03aa93bc76353f1d4e89844d1ba7,"Add new db node to site.pp and netboot.cfg

Bug: T313978
Change-Id: Id58ec535c0000608cfbc5af6cc9cdf64bc3281e1",https://github.com/wikimedia/puppet/commit/393d32daa19e03aa93bc76353f1d4e89844d1ba7,manifests/site.pp,modified
274,puppet,339fa9aa070f1ac58d233206b85900a39aa7cea6,"mediabackups: Add new policy intended for admin deletion of files

Files can be searched and restored with the minio (S3 API) user
for automated restores. However, it cannot delete files.

As automation right now uses the same account, add a new policy
to list, read (download) and delete files, and apply it to
the restore user.

In the future we may want to have a separate account just to
allow listing and deletion, but this will unblock for now
deletions without needing to affect admin procedure.

Bug: T323796
Change-Id: I2e7d519d93bc96c328ddb72d486aeb15504aed44",https://github.com/wikimedia/puppet/commit/339fa9aa070f1ac58d233206b85900a39aa7cea6,modules/mediabackup/manifests/worker.pp,modified
275,puppet,a27ade3dee6ebcee87c04609ffc2174c71199cb5,"puppetdb: Bump postgres version for bookworm

postgresql-14 has been removed from bookworm in favour of -15. And
puppetdb in the latest upload is also compatible with it.

Change-Id: Ia65f125ee4ea962518ed420614e0c470b6ef10d7",https://github.com/wikimedia/puppet/commit/a27ade3dee6ebcee87c04609ffc2174c71199cb5,modules/profile/manifests/puppetdb/database.pp,modified
276,puppet,17698f3afe2357a571b03ae774233109052381e1,"Remove one more obsolete package after bullseye->bookworm upgrade

Change-Id: I58e1de2752e6034e2e2109cab3f71865dbba847f",https://github.com/wikimedia/puppet/commit/17698f3afe2357a571b03ae774233109052381e1,modules/base/manifests/standard_packages.pp,modified
277,puppet,913353d6306b63d19c924c3d0af066ebe2330e29,"archiva/piwik: Add SPDX headers

Bug: T308013
Change-Id: If494b2342a78cab34382b04dec8f317e4af0dd8c",https://github.com/wikimedia/puppet/commit/913353d6306b63d19c924c3d0af066ebe2330e29,modules/profile/manifests/archiva/proxy.pp,modified
278,puppet,913353d6306b63d19c924c3d0af066ebe2330e29,"archiva/piwik: Add SPDX headers

Bug: T308013
Change-Id: If494b2342a78cab34382b04dec8f317e4af0dd8c",https://github.com/wikimedia/puppet/commit/913353d6306b63d19c924c3d0af066ebe2330e29,modules/profile/manifests/piwik/database.pp,modified
279,puppet,913353d6306b63d19c924c3d0af066ebe2330e29,"archiva/piwik: Add SPDX headers

Bug: T308013
Change-Id: If494b2342a78cab34382b04dec8f317e4af0dd8c",https://github.com/wikimedia/puppet/commit/913353d6306b63d19c924c3d0af066ebe2330e29,modules/profile/manifests/piwik/instance.pp,modified
280,puppet,913353d6306b63d19c924c3d0af066ebe2330e29,"archiva/piwik: Add SPDX headers

Bug: T308013
Change-Id: If494b2342a78cab34382b04dec8f317e4af0dd8c",https://github.com/wikimedia/puppet/commit/913353d6306b63d19c924c3d0af066ebe2330e29,modules/profile/manifests/piwik/webserver.pp,modified
281,puppet,55fbf9e712ec301887d432694c3376e71e342104,"P:openstack: explicit rules for haproxy backend traffic POC

This is going to be needed for the cloudlb project, since we can no
longer rely on the rules added in openstack::haproxy::site.

Change-Id: If94fba74f01c0c8ba5799828e8b6507f75448cbd",https://github.com/wikimedia/puppet/commit/55fbf9e712ec301887d432694c3376e71e342104,modules/profile/manifests/openstack/base/nova/api/service.pp,modified
282,puppet,55fbf9e712ec301887d432694c3376e71e342104,"P:openstack: explicit rules for haproxy backend traffic POC

This is going to be needed for the cloudlb project, since we can no
longer rely on the rules added in openstack::haproxy::site.

Change-Id: If94fba74f01c0c8ba5799828e8b6507f75448cbd",https://github.com/wikimedia/puppet/commit/55fbf9e712ec301887d432694c3376e71e342104,modules/profile/manifests/openstack/codfw1dev/nova/api/service.pp,modified
283,puppet,55fbf9e712ec301887d432694c3376e71e342104,"P:openstack: explicit rules for haproxy backend traffic POC

This is going to be needed for the cloudlb project, since we can no
longer rely on the rules added in openstack::haproxy::site.

Change-Id: If94fba74f01c0c8ba5799828e8b6507f75448cbd",https://github.com/wikimedia/puppet/commit/55fbf9e712ec301887d432694c3376e71e342104,modules/profile/manifests/openstack/eqiad1/nova/api/service.pp,modified
284,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/kartotherian/manifests/init.pp,modified
285,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/profile/manifests/cassandra/single_instance.pp,removed
286,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/profile/manifests/maps/apps.pp,modified
287,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/profile/manifests/maps/cassandra.pp,removed
288,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/profile/manifests/prometheus/services.pp,modified
289,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/role/manifests/maps/master.pp,modified
290,puppet,05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,"maps: remove Cassandra and Tilerator service

Remove Cassandra, tilerator and tileratorui components. Leave much of
their configuration information in place as these are used in various
places and should be removed piecemeal *after* this change to ensure
we don't break things.

Bug: T298246
Change-Id: I6fa81001607500b9a9241ad9ce3502d58e82a042",https://github.com/wikimedia/puppet/commit/05f94e539b3d9a0a0a4ed1add01a441b0010d4f4,modules/role/manifests/maps/replica.pp,modified
291,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/kafka_shipper.pp,modified
292,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/kubernetes.pp,modified
293,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/netdev_kafka_relay.pp,modified
294,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/shellbox.pp,modified
295,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/udp_json_logback_compat.pp,modified
296,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/udp_localhost_compat.pp,modified
297,puppet,6da49580961d60e9ee0241839d190464eb030d1f,"rsyslog: Add SPDX headers

Bug: T308013
Change-Id: I83c676437001e7d98ae304e2145dfcdf6a1c475c",https://github.com/wikimedia/puppet/commit/6da49580961d60e9ee0241839d190464eb030d1f,modules/profile/manifests/rsyslog/udp_tee.pp,modified
298,puppet,d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,"puppetmaster: Add SPDX headers

Bug: T308013
Change-Id: I9cba8c52d144f3461b79f242c959861e54cd4ed3",https://github.com/wikimedia/puppet/commit/d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,modules/profile/manifests/puppetmaster/backend.pp,modified
299,puppet,d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,"puppetmaster: Add SPDX headers

Bug: T308013
Change-Id: I9cba8c52d144f3461b79f242c959861e54cd4ed3",https://github.com/wikimedia/puppet/commit/d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,modules/profile/manifests/puppetmaster/common.pp,modified
300,puppet,d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,"puppetmaster: Add SPDX headers

Bug: T308013
Change-Id: I9cba8c52d144f3461b79f242c959861e54cd4ed3",https://github.com/wikimedia/puppet/commit/d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,modules/profile/manifests/puppetmaster/frontend.pp,modified
301,puppet,d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,"puppetmaster: Add SPDX headers

Bug: T308013
Change-Id: I9cba8c52d144f3461b79f242c959861e54cd4ed3",https://github.com/wikimedia/puppet/commit/d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,modules/profile/manifests/puppetmaster/pontoon.pp,modified
302,puppet,d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,"puppetmaster: Add SPDX headers

Bug: T308013
Change-Id: I9cba8c52d144f3461b79f242c959861e54cd4ed3",https://github.com/wikimedia/puppet/commit/d2e9fcf79c6eb7a43a814d771f38b0a04d7170af,modules/profile/manifests/puppetmaster/updatenetboot.pp,modified
303,puppet,17a0ae6703d23ffa9d4f6408a94fec6de6c0c7f0,"site: assign new appservers to their roles

Bug: T313327
Change-Id: I6a8f7ded5e1d058ce051ac0d15e831785ac932df",https://github.com/wikimedia/puppet/commit/17a0ae6703d23ffa9d4f6408a94fec6de6c0c7f0,manifests/site.pp,modified
304,puppet,b5386f0c2fbca6f13932b799b9158df51e0bd283,"Fix typo on hostname

Bug: T319433
Change-Id: I21bf7588bb19a2cb38fb7d8d28bbe82d86b88c88",https://github.com/wikimedia/puppet/commit/b5386f0c2fbca6f13932b799b9158df51e0bd283,manifests/site.pp,modified
305,puppet,d4833002239b487cbbde2193bb7992b37029337b,"phabricator: switch mysql slave port for logmail to string

follow-up to Ia32bde56ca6db

Bug: T280597
Change-Id: I65be0e679f97c87921e9093cefa1a38cd37021ca",https://github.com/wikimedia/puppet/commit/d4833002239b487cbbde2193bb7992b37029337b,modules/phabricator/manifests/logmail.pp,modified
306,puppet,691d21ed9e5be03ed53b675517a4cfe43f998eec,"phabricator: change db ports to strings in tools class

follow-up to Ia32bde56ca6db

Bug: T280597
Change-Id: I89ac97591a9c26b1a0e22d59ba844163c55e3b8c",https://github.com/wikimedia/puppet/commit/691d21ed9e5be03ed53b675517a4cfe43f998eec,modules/phabricator/manifests/tools.pp,modified
307,puppet,fbe4fc01dfde90d151391c1208de43bab1a32cb2,"phabricator: quote mysql port numbers

Phabricator upstream checks these and wants them to be
strings or complains about it.

Bug: T280597
Change-Id: Ia32bde56ca6db9f56e668df5ac9f30fae9193b16",https://github.com/wikimedia/puppet/commit/fbe4fc01dfde90d151391c1208de43bab1a32cb2,modules/profile/manifests/phabricator/main.pp,modified
308,puppet,c1b1414f20fc64f07c2f965b0c31b68e5d2144bf,"cp5006: decommission host (eqsin hardware refresh)

Bug: T323830
Change-Id: Ic6664d36d3a8276bf932398ae1b5ba0d398234ca",https://github.com/wikimedia/puppet/commit/c1b1414f20fc64f07c2f965b0c31b68e5d2144bf,manifests/site.pp,modified
309,puppet,d9e70a5727605a371277a4a8ff160561698cf75c,"cp5005, cp5010: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: Id22c465fa0a23f72efe21bac7ad0f34aaea8fb85",https://github.com/wikimedia/puppet/commit/d9e70a5727605a371277a4a8ff160561698cf75c,manifests/site.pp,modified
310,puppet,ed0d8073ed1e653e9acd60f1b5dc9a4479a736f3,"cp5004, cp5009: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: Ie979ec04264c679b0a5a2a12298c63399b50350a",https://github.com/wikimedia/puppet/commit/ed0d8073ed1e653e9acd60f1b5dc9a4479a736f3,manifests/site.pp,modified
311,puppet,34eaaffa2139f59ab333124ce6a2c887655fe573,"p::phabricator::main: remove unused $cache_nodes

This was once used to derive $trusted_proxies , but that was
removed after the transition to envoy TLS termination for
phabricator in 66a12e66 a couple of years ago.

Bug: T270185
Bug: T237637
Change-Id: I3c0bac94bbfb32bf42c13def01ce9a8454a82300",https://github.com/wikimedia/puppet/commit/34eaaffa2139f59ab333124ce6a2c887655fe573,modules/profile/manifests/phabricator/main.pp,modified
312,puppet,b02c394e04b08dd363ca4c5d326acea50c33441b,"cp5003, cp5008: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: I7f2d6673308fb4294eda44944514f861178d401b",https://github.com/wikimedia/puppet/commit/b02c394e04b08dd363ca4c5d326acea50c33441b,manifests/site.pp,modified
313,puppet,a6c5c96b8dc54f4548f9cd8edc82dfde2c8a643e,"Enable profile::auto_restarts::service for Envoy on planet

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
ach day (on Mo-Fr).

Tested on planet2002 following the latest glibc update.

Bug: T135991
Change-Id: I7a94e061871ce24cb18be4723b32a3fa78763872",https://github.com/wikimedia/puppet/commit/a6c5c96b8dc54f4548f9cd8edc82dfde2c8a643e,modules/planet/manifests/init.pp,modified
314,puppet,ba097b7a11119e591e7601b6568d66626cdd5f05,"cp5002, cp5007: decommission hosts (eqsin hardware refresh)

Bug: T323830
Change-Id: I5a64935f2ecdf29f5b214053887667324c87d154",https://github.com/wikimedia/puppet/commit/ba097b7a11119e591e7601b6568d66626cdd5f05,manifests/site.pp,modified
315,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/datasets/cleanup.pp,modified
316,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/datasets/dumpstatusfiles_sync.pp,modified
317,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/datasets/rsync_config.pp,modified
318,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/ferm.pp,modified
319,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/mirrors/rsync_config.pp,modified
320,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/nfs.pp,modified
321,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/rsync.pp,modified
322,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/profile/manifests/dumps/distribution/web.pp,modified
323,puppet,a66e47b833bb93d4e23bd917c24be7e0187df974,"dumps/distribution: add more data types to parameters

Add data types to parameters of many classes under dumps/distribution.

Add a few data type for dumps mirrors to wmflib and use it.

Hosts: auto
Change-Id: I4cdcc1b67873f9379e7e30ab2a02b6fac47b91e7",https://github.com/wikimedia/puppet/commit/a66e47b833bb93d4e23bd917c24be7e0187df974,modules/wmflib/types/dumps/mirror.pp,added
324,puppet,39f37b04a91a1c13db0543c8dd89df2067402f06,"Patch cinder volume_type api to allow non-uuid project ids.

Uniquely among the entire OpenStack ecosystem, the cinder
'volume type' APIs validate the project ID and reject
it if it isn't a UUID. This is /technically correct/ but
breaks our use of project_id==project_name convention.

This causes the 'openstack volume type set --project' command
to fail.

This is upstream patch
https://review.opendev.org/c/openstack/cinder/+/864585

Bug: T301949
Change-Id: Iaeb338904f1f2f3107e76dafc60a4068d4745fae",https://github.com/wikimedia/puppet/commit/39f37b04a91a1c13db0543c8dd89df2067402f06,modules/openstack/manifests/cinder/service.pp,modified
325,puppet,4ca5e3e1946c0512337b49de29b00990ca7c83a0,"glance: use memcached for token caching

""Using the in-process token cache is deprecated as of
the 4.2.0 release and may be removed in the 5.0.0 release
or the 'O' development cycle.""

Bug: T323319
Change-Id: I3763d167441bdf516e0688aa25cb52d2282a17e9",https://github.com/wikimedia/puppet/commit/4ca5e3e1946c0512337b49de29b00990ca7c83a0,modules/openstack/manifests/glance/service.pp,modified
326,puppet,4ca5e3e1946c0512337b49de29b00990ca7c83a0,"glance: use memcached for token caching

""Using the in-process token cache is deprecated as of
the 4.2.0 release and may be removed in the 5.0.0 release
or the 'O' development cycle.""

Bug: T323319
Change-Id: I3763d167441bdf516e0688aa25cb52d2282a17e9",https://github.com/wikimedia/puppet/commit/4ca5e3e1946c0512337b49de29b00990ca7c83a0,modules/openstack/manifests/glance/service/yoga.pp,modified
327,puppet,4ca5e3e1946c0512337b49de29b00990ca7c83a0,"glance: use memcached for token caching

""Using the in-process token cache is deprecated as of
the 4.2.0 release and may be removed in the 5.0.0 release
or the 'O' development cycle.""

Bug: T323319
Change-Id: I3763d167441bdf516e0688aa25cb52d2282a17e9",https://github.com/wikimedia/puppet/commit/4ca5e3e1946c0512337b49de29b00990ca7c83a0,modules/profile/manifests/openstack/base/glance.pp,modified
328,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/auth/deploy.pp,modified
329,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/auth/load_all.pp,modified
330,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/client/rbd_cloudbackup.pp,modified
331,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/client/rbd_cloudcontrol.pp,modified
332,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/client/rbd_glance.pp,modified
333,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/client/rbd_libvirt.pp,modified
334,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/mon.pp,modified
335,puppet,0e7fd8263e54e300c30a323aa6042c3e650ae3ae,"ceph: Add SPDX headers

Bug: T308013
Change-Id: I29eeccece595bcbcb605164fe5ea7f6a5e6bd5bc",https://github.com/wikimedia/puppet/commit/0e7fd8263e54e300c30a323aa6042c3e650ae3ae,modules/profile/manifests/ceph/osd.pp,modified
336,puppet,9e37f647f7ca74aa83a9ef41d0a69540974889b4,"opentelemetry::collector: Fix config template

Bug: T320565
Hosts: O:sretest
Change-Id: I9646d7ecaa601c80a6ff506a6691738542d69e63",https://github.com/wikimedia/puppet/commit/9e37f647f7ca74aa83a9ef41d0a69540974889b4,modules/opentelemetry/manifests/collector.pp,modified
337,puppet,affbfe7ae5428d533d0e55459d662340d3baafa4,"zookeeper: Add SPDX headers

Bug: T308013
Change-Id: Ifa166deec37283e5739fef4ceb75ad72d2dca9c1",https://github.com/wikimedia/puppet/commit/affbfe7ae5428d533d0e55459d662340d3baafa4,modules/profile/manifests/zookeeper/firewall.pp,modified
338,puppet,affbfe7ae5428d533d0e55459d662340d3baafa4,"zookeeper: Add SPDX headers

Bug: T308013
Change-Id: Ifa166deec37283e5739fef4ceb75ad72d2dca9c1",https://github.com/wikimedia/puppet/commit/affbfe7ae5428d533d0e55459d662340d3baafa4,modules/profile/manifests/zookeeper/monitoring/server.pp,modified
339,puppet,affbfe7ae5428d533d0e55459d662340d3baafa4,"zookeeper: Add SPDX headers

Bug: T308013
Change-Id: Ifa166deec37283e5739fef4ceb75ad72d2dca9c1",https://github.com/wikimedia/puppet/commit/affbfe7ae5428d533d0e55459d662340d3baafa4,modules/profile/manifests/zookeeper/server.pp,modified
340,puppet,b7d583e5778adbb73643c57201135c218da44408,"opentelemetry::collector: Fix service ensure

Bug: T320565
Hosts: O:sretest
Change-Id: I799bec13f759ff0a3175136fbf4fc1806310f39e",https://github.com/wikimedia/puppet/commit/b7d583e5778adbb73643c57201135c218da44408,modules/opentelemetry/manifests/collector.pp,modified
341,puppet,5d16d4de851487c27cb7c847a167372c7cd6bbc1,"opentelemetry-collector: Basic install

Creates basic module, role and profile for opentelemetry collector, and
install it on sretest.

Hosts: O:sretest
Change-Id: I8877e4056a61a419a23344ba62000b43d639e341",https://github.com/wikimedia/puppet/commit/5d16d4de851487c27cb7c847a167372c7cd6bbc1,modules/opentelemetry/manifests/collector.pp,added
342,puppet,5d16d4de851487c27cb7c847a167372c7cd6bbc1,"opentelemetry-collector: Basic install

Creates basic module, role and profile for opentelemetry collector, and
install it on sretest.

Hosts: O:sretest
Change-Id: I8877e4056a61a419a23344ba62000b43d639e341",https://github.com/wikimedia/puppet/commit/5d16d4de851487c27cb7c847a167372c7cd6bbc1,modules/profile/manifests/opentelemetry/collector.pp,added
343,puppet,5d16d4de851487c27cb7c847a167372c7cd6bbc1,"opentelemetry-collector: Basic install

Creates basic module, role and profile for opentelemetry collector, and
install it on sretest.

Hosts: O:sretest
Change-Id: I8877e4056a61a419a23344ba62000b43d639e341",https://github.com/wikimedia/puppet/commit/5d16d4de851487c27cb7c847a167372c7cd6bbc1,modules/role/manifests/sretest.pp,modified
344,puppet,170282a96e59851fe4a3e041a6dc11ba74b78ff2,"Remove support for overriding LDAP client stack

This removes two hiera parameters, sudo_flavor and
profile::ldap::client::labs::client_stack, that could be used to
override the OS-specific defaults for the LDAP client stack (NSS or
SSSD) used by Cloud VPS instances to load users from LDAP. The only
project overriding the defaults was Toolforge, which is fully on Buster
or newer now and so doesn't need the overrides anymore. This lets us
somewhat simplify the LDAP code, and prepares for removing NSS support
after all Stretch VMs (and the Toolforge NFS servers) have been
upgraded/removed.

Also used the opportunity to clean up some backwards compability code
from profile::ldap::client::labs.

Change-Id: I212fa3a4b2311a7695de2e38e660a3e969b866d5",https://github.com/wikimedia/puppet/commit/170282a96e59851fe4a3e041a6dc11ba74b78ff2,modules/profile/manifests/ldap/client/labs.pp,modified
345,puppet,170282a96e59851fe4a3e041a6dc11ba74b78ff2,"Remove support for overriding LDAP client stack

This removes two hiera parameters, sudo_flavor and
profile::ldap::client::labs::client_stack, that could be used to
override the OS-specific defaults for the LDAP client stack (NSS or
SSSD) used by Cloud VPS instances to load users from LDAP. The only
project overriding the defaults was Toolforge, which is fully on Buster
or newer now and so doesn't need the overrides anymore. This lets us
somewhat simplify the LDAP code, and prepares for removing NSS support
after all Stretch VMs (and the Toolforge NFS servers) have been
upgraded/removed.

Also used the opportunity to clean up some backwards compability code
from profile::ldap::client::labs.

Change-Id: I212fa3a4b2311a7695de2e38e660a3e969b866d5",https://github.com/wikimedia/puppet/commit/170282a96e59851fe4a3e041a6dc11ba74b78ff2,modules/profile/manifests/wmcs/instance.pp,modified
346,puppet,170282a96e59851fe4a3e041a6dc11ba74b78ff2,"Remove support for overriding LDAP client stack

This removes two hiera parameters, sudo_flavor and
profile::ldap::client::labs::client_stack, that could be used to
override the OS-specific defaults for the LDAP client stack (NSS or
SSSD) used by Cloud VPS instances to load users from LDAP. The only
project overriding the defaults was Toolforge, which is fully on Buster
or newer now and so doesn't need the overrides anymore. This lets us
somewhat simplify the LDAP code, and prepares for removing NSS support
after all Stretch VMs (and the Toolforge NFS servers) have been
upgraded/removed.

Also used the opportunity to clean up some backwards compability code
from profile::ldap::client::labs.

Change-Id: I212fa3a4b2311a7695de2e38e660a3e969b866d5",https://github.com/wikimedia/puppet/commit/170282a96e59851fe4a3e041a6dc11ba74b78ff2,modules/sudo/manifests/group.pp,modified
347,puppet,170282a96e59851fe4a3e041a6dc11ba74b78ff2,"Remove support for overriding LDAP client stack

This removes two hiera parameters, sudo_flavor and
profile::ldap::client::labs::client_stack, that could be used to
override the OS-specific defaults for the LDAP client stack (NSS or
SSSD) used by Cloud VPS instances to load users from LDAP. The only
project overriding the defaults was Toolforge, which is fully on Buster
or newer now and so doesn't need the overrides anymore. This lets us
somewhat simplify the LDAP code, and prepares for removing NSS support
after all Stretch VMs (and the Toolforge NFS servers) have been
upgraded/removed.

Also used the opportunity to clean up some backwards compability code
from profile::ldap::client::labs.

Change-Id: I212fa3a4b2311a7695de2e38e660a3e969b866d5",https://github.com/wikimedia/puppet/commit/170282a96e59851fe4a3e041a6dc11ba74b78ff2,modules/sudo/manifests/user.pp,modified
348,puppet,0d227615fc4b344f00b20966671ae701eafe62e0,"Enable profile::auto_restarts::service for envoyproxy on Grafana

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on grafana2001 following the latest glibc update.

Bug: T135991
Change-Id: Ieef5ff6e0c7ce054f6ca31e1ebfa9cb77cd6e803",https://github.com/wikimedia/puppet/commit/0d227615fc4b344f00b20966671ae701eafe62e0,modules/profile/manifests/grafana.pp,modified
349,puppet,79769c9b5f2a0389267f9f9c86ea024ce26fcbcc,"P:mediawiki::maintenance: CampaignEvents periodic

Add a daily run of mediawiki/extensions/CampaignEvents/maintenance/UpdateUTCTimestamps.php
on:
- beta: metawiki
- prod: testwiki, test2wiki and officewiki.
(cf. wmf-config/InitialiseSettings.php wmgUseCampaignEvents)

Bug: T320403
Hosts: auto
Change-Id: I3ea6e13b39df26f9e23971007ac53cff27a5d36c",https://github.com/wikimedia/puppet/commit/79769c9b5f2a0389267f9f9c86ea024ce26fcbcc,modules/profile/manifests/mediawiki/maintenance.pp,modified
350,puppet,79769c9b5f2a0389267f9f9c86ea024ce26fcbcc,"P:mediawiki::maintenance: CampaignEvents periodic

Add a daily run of mediawiki/extensions/CampaignEvents/maintenance/UpdateUTCTimestamps.php
on:
- beta: metawiki
- prod: testwiki, test2wiki and officewiki.
(cf. wmf-config/InitialiseSettings.php wmgUseCampaignEvents)

Bug: T320403
Hosts: auto
Change-Id: I3ea6e13b39df26f9e23971007ac53cff27a5d36c",https://github.com/wikimedia/puppet/commit/79769c9b5f2a0389267f9f9c86ea024ce26fcbcc,modules/profile/manifests/mediawiki/maintenance/campaignevents.pp,added
351,puppet,66d175647f90c3646f162b102b7303757d767753,"graphite: mirror traffic to graphite1005

Bug: T318903
Change-Id: I3341a288783538360074f317c51d6922de48489e",https://github.com/wikimedia/puppet/commit/66d175647f90c3646f162b102b7303757d767753,modules/profile/manifests/graphite/production.pp,modified
352,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/profile/manifests/openstack/base/designate/firewall/api.pp,removed
353,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/profile/manifests/openstack/codfw1dev/designate/firewall/api.pp,removed
354,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/profile/manifests/openstack/codfw1dev/haproxy.pp,modified
355,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/profile/manifests/openstack/eqiad1/designate/firewall/api.pp,removed
356,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/profile/manifests/openstack/eqiad1/haproxy.pp,modified
357,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/role/manifests/wmcs/openstack/codfw1dev/control.pp,modified
358,puppet,6149a4bd07783416ffb64935b9f3da8387c5d55c,"P:openstack::designate: remove separate profile for firewall rules

Change-Id: I50a008f8d25d0b958975918911608ff73af05d6d",https://github.com/wikimedia/puppet/commit/6149a4bd07783416ffb64935b9f3da8387c5d55c,modules/role/manifests/wmcs/openstack/eqiad1/control.pp,modified
359,puppet,3c6b953cd3510c5cc83a1dd5e2f6f8943561256d,"Make ganeti2032 a Ganeti node

Bug: T313856
Change-Id: Iad9013c9ba3fee4fda3d35bcb0de533ca069042e",https://github.com/wikimedia/puppet/commit/3c6b953cd3510c5cc83a1dd5e2f6f8943561256d,manifests/site.pp,modified
360,puppet,31db377c352d492b426f301f049ceb88c87fb5be,"graphite: Add SPDX headers

Bug: T308013
Change-Id: Ia90dc4916ead51b70e6dbd73d6d0f9c847e91bb0",https://github.com/wikimedia/puppet/commit/31db377c352d492b426f301f049ceb88c87fb5be,modules/profile/manifests/graphite/alerts.pp,modified
361,puppet,31db377c352d492b426f301f049ceb88c87fb5be,"graphite: Add SPDX headers

Bug: T308013
Change-Id: Ia90dc4916ead51b70e6dbd73d6d0f9c847e91bb0",https://github.com/wikimedia/puppet/commit/31db377c352d492b426f301f049ceb88c87fb5be,modules/profile/manifests/graphite/base.pp,modified
362,puppet,31db377c352d492b426f301f049ceb88c87fb5be,"graphite: Add SPDX headers

Bug: T308013
Change-Id: Ia90dc4916ead51b70e6dbd73d6d0f9c847e91bb0",https://github.com/wikimedia/puppet/commit/31db377c352d492b426f301f049ceb88c87fb5be,modules/profile/manifests/graphite/production.pp,modified
363,puppet,ca3ebe6cd20baf670a09b3dae144779c0fae1961,"Make ganeti2031 a Ganeti node

Change-Id: I13c9208edfdf3cd26beeebf68626db32a369cecf",https://github.com/wikimedia/puppet/commit/ca3ebe6cd20baf670a09b3dae144779c0fae1961,manifests/site.pp,modified
364,puppet,960bd4648d67bc822a0aa03afc917438bb28d901,"Enable profile::auto_restarts::service for Envoy on debmonitor

Automatically restart Envoy if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on debmonitor1002 following the latest glibc update.

Bug: T135991
Change-Id: Ia08ba2d5bd2adae2644038b2a9ec7b50c26dd1e5",https://github.com/wikimedia/puppet/commit/960bd4648d67bc822a0aa03afc917438bb28d901,modules/profile/manifests/debmonitor/server.pp,modified
365,puppet,92bd6c58df200b36b7acb73d17f3fe42877c51cf,"Enable profile::auto_restarts::service for virtlogd

Automatically restart virtlogd if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on cloudvirt-wdqs1001 following the latest pcre2 security update.

Bug: T135991
Change-Id: I77dac563bf785b1a5f74ab5b65cc96486f543910",https://github.com/wikimedia/puppet/commit/92bd6c58df200b36b7acb73d17f3fe42877c51cf,modules/openstack/manifests/nova/compute/service.pp,modified
366,puppet,35ed6283aa8569668a0452c90f776e4ca83075eb,"systemd::timer::job: add monitoring_url to unit file

Add the monitoring url so that it shows up under the Doc heading when
running `systemd status $unit`

I have also updated the following to instruct users to check for this when troubleshooting

https://wikitech.wikimedia.org/wiki/Monitoring/systemd_unit_state

Hosts: basic
Change-Id: I99600f8d9648d76850e3648ba29a555123c1f679",https://github.com/wikimedia/puppet/commit/35ed6283aa8569668a0452c90f776e4ca83075eb,modules/systemd/manifests/timer/job.pp,modified
367,puppet,97972e3c605e8749130286621dd6b07105efe090,"systemd::timer::job: update documentation and fix minor lint issues

Change-Id: Idd10e1b2217b153534729e24bcf040ad141b7e22",https://github.com/wikimedia/puppet/commit/97972e3c605e8749130286621dd6b07105efe090,modules/systemd/manifests/timer/job.pp,modified
368,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/backup/namenode.pp,modified
369,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/balancer.pp,modified
370,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/common.pp,modified
371,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/firewall/master.pp,modified
372,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/httpd.pp,modified
373,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/master.pp,modified
374,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/master/standby.pp,modified
375,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/datanode.pp,modified
376,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/history.pp,modified
377,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/journalnode.pp,modified
378,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/namenode.pp,modified
379,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/nodemanager.pp,modified
380,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/monitoring/resourcemanager.pp,modified
381,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/spark2.pp,modified
382,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/worker.pp,modified
383,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/worker/clients.pp,modified
384,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/yarn_proxy.pp,modified
385,puppet,205804e4d587ca41532c2003f4cad2621839ceea,"hadoop: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(I5ffc7aabfea781b913dbabb88ac4e0e9dded7032), but the code in question
no longer exists.

Bug: T308013
Change-Id: Ifd46b527334c766fab15ba0be30ad30981d5c5d2",https://github.com/wikimedia/puppet/commit/205804e4d587ca41532c2003f4cad2621839ceea,modules/profile/manifests/hadoop/yarn_proxy_testcluster.pp,modified
386,puppet,57c83e5a5d9113d40dbd5481be478c9790053646,"k8s builder: allow deployers to sudo update-mediawiki-tools-release

I think this should unblock backports for users with base-level
deployment permissions.

Bug: T323735
Change-Id: Ic9cff398f01773ccce296fbaf0c93678eef708ef",https://github.com/wikimedia/puppet/commit/57c83e5a5d9113d40dbd5481be478c9790053646,modules/profile/manifests/kubernetes/deployment_server/mediawiki/builder.pp,modified
387,puppet,340f87fb0328a03fc2061462dbfde416c4d19e44,"Remove graphite2003

Bug: T323718
Change-Id: If66d3e01ea9262bd13f13985d395cb665cb5668d",https://github.com/wikimedia/puppet/commit/340f87fb0328a03fc2061462dbfde416c4d19e44,manifests/site.pp,modified
388,puppet,340f87fb0328a03fc2061462dbfde416c4d19e44,"Remove graphite2003

Bug: T323718
Change-Id: If66d3e01ea9262bd13f13985d395cb665cb5668d",https://github.com/wikimedia/puppet/commit/340f87fb0328a03fc2061462dbfde416c4d19e44,modules/profile/manifests/graphite/production.pp,modified
389,puppet,bb46a57262c553cf5822fd7bd06bffd9252d2399,"lvs4010: set as secondary LVS and remove lvs4007 (decom)

Bug: T317247
Change-Id: I6374ec4f75d6962f207d3960077b92b5998eb8de",https://github.com/wikimedia/puppet/commit/bb46a57262c553cf5822fd7bd06bffd9252d2399,modules/profile/manifests/lvs/configuration.pp,modified
390,puppet,eb1f7a06d1feb485f4dc11a7bcfbc1ff9b7dd2fa,"Add arclam1001 to site.pp and netboot.cfg

Bug: T3194330
Change-Id: Ia32b6d796d7dc3ccd6bb80bf6599262a4a73c2cf",https://github.com/wikimedia/puppet/commit/eb1f7a06d1feb485f4dc11a7bcfbc1ff9b7dd2fa,manifests/site.pp,modified
391,puppet,4736b630160c52026b82ca2330d7f5ebf5f51505,"Add contint1002 to site.pp and netboot.cfg

Bug: T313830
Change-Id: I5b23c7cfd58788257bef6ee8e7cd2a04a3d28e9a",https://github.com/wikimedia/puppet/commit/4736b630160c52026b82ca2330d7f5ebf5f51505,manifests/site.pp,modified
392,puppet,193741fb39e183eca2394237751f4d7c3065cebb,"lvs4010: commission new LVS host (ulsfo hardware refresh)

lvs4010 will be the new secondary LVS host, replacing lvs4007.

Bug: T317247
Change-Id: I7c4623daf22bf1c36567189ee85c43235bfa5a42",https://github.com/wikimedia/puppet/commit/193741fb39e183eca2394237751f4d7c3065cebb,manifests/site.pp,modified
393,puppet,193741fb39e183eca2394237751f4d7c3065cebb,"lvs4010: commission new LVS host (ulsfo hardware refresh)

lvs4010 will be the new secondary LVS host, replacing lvs4007.

Bug: T317247
Change-Id: I7c4623daf22bf1c36567189ee85c43235bfa5a42",https://github.com/wikimedia/puppet/commit/193741fb39e183eca2394237751f4d7c3065cebb,modules/profile/manifests/lvs/configuration.pp,modified
394,puppet,30bc961f0a1269f8339802362fe41e51045cf212,"Enable profile::auto_restarts::service for Turnilo

Automatically restart Turnilo if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on an-tool1011 following the latest pcre2 security update.

Bug: T135991
Change-Id: Id1b02b04a9b3c6fc2b86c86b0b4b13b4056cb49a",https://github.com/wikimedia/puppet/commit/30bc961f0a1269f8339802362fe41e51045cf212,modules/turnilo/manifests/init.pp,modified
395,puppet,56fc4a4ea19093876d1fef496ba4f9b6bf36402b,"swift: base the object number on the scsi path

Hosts: auto
Bug: T308677
Change-Id: Id56647097d048117faf3c591fd16c3e2586af0f1",https://github.com/wikimedia/puppet/commit/56fc4a4ea19093876d1fef496ba4f9b6bf36402b,modules/profile/manifests/swift/storage/configure_disks.pp,modified
396,puppet,3995854525d7c20de1652adc74d201af10bc9f39,"P:netbox::host: create a motd for the status

and colour code the status to highlight issues


Bug: T320696
Change-Id: I6b7d401c84376b8e829e5b855a58010c581eb2f5
Hosts: sretest1001.eqiad.wmnet",https://github.com/wikimedia/puppet/commit/3995854525d7c20de1652adc74d201af10bc9f39,modules/profile/manifests/netbox/host.pp,modified
397,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/atlasexporter.pp,modified
398,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/cluster/management/backup.pp,modified
399,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/ganeti.pp,modified
400,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/keyholder/server.pp,modified
401,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/librenms.pp,modified
402,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/librenms/web.pp,modified
403,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/netops/ripeatlas/cli.pp,modified
404,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/openldap_corp.pp,modified
405,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/ping_offload.pp,modified
406,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/pmacct.pp,modified
407,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/puppetdb.pp,modified
408,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/puppetdb/database.pp,modified
409,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/puppetdb/microservice.pp,modified
410,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/python38.pp,modified
411,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/requesttracker.pp,modified
412,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/resolving.pp,modified
413,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/rpkivalidator.pp,modified
414,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/sre/check_user.pp,modified
415,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/sre/os_updates.pp,modified
416,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/statograph.pp,modified
417,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/tcp_fast_open.pp,modified
418,puppet,684897507f63c539cc61dc9ed16915e996fa0991,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I53a462d2adbdad33ad761549e4817d5904dd10dc",https://github.com/wikimedia/puppet/commit/684897507f63c539cc61dc9ed16915e996fa0991,modules/profile/manifests/url_downloader.pp,modified
419,puppet,8b9c3e678466add27fbcd445186d0fccac1b1561,"pontoon: Add .crt filename suffix to PKI root CA

Follow up for I0f043d858f8c5e60beb7c64dfb1611e0281b3fcb. The
certificates filename needs to end with .crt

Bug: T319163
Change-Id: I21fa3074f695aa1a0e15920c1caf0a1dad4ae4de",https://github.com/wikimedia/puppet/commit/8b9c3e678466add27fbcd445186d0fccac1b1561,modules/profile/manifests/pontoon/base.pp,modified
420,puppet,2435c0471c7d379c13b09f8ebc543a1a2b32f3a7,"rsync::quickdatacopy: Allow having multiple destination hosts

$dest_host now accepts a single host or an array of hosts for cases
where you want to have multiple destination hosts, like
deployment::rsync. Stdlib::Host is used instead so IP addresses can
be provided in addition to fqdns.

Change-Id: I3964a58b736892f5f7d978606d7b80cb5b3e0ddf",https://github.com/wikimedia/puppet/commit/2435c0471c7d379c13b09f8ebc543a1a2b32f3a7,modules/rsync/manifests/quickdatacopy.pp,modified
421,puppet,61cce870ea5c59d19ce4b06e03872ca31ae1c23c,"Add puppetdb1003 and dbprov1004 to site.pp and netboox.cfg

Bug: T317892
Bug: T321122
Change-Id: I7f8d3656e09f8eb600f6e1559f19f7481ef661c6",https://github.com/wikimedia/puppet/commit/61cce870ea5c59d19ce4b06e03872ca31ae1c23c,manifests/site.pp,modified
422,puppet,93780319f9d06d8e7e9f4ca613f8d83a0e2d2e5c,"lvs4009: set as high-traffic2 primary LVS and remove lvs4006 (decomm)

Bug: T317247
Change-Id: Ifcddd654a7bc7e6603b9147b04b10630eb60bffa",https://github.com/wikimedia/puppet/commit/93780319f9d06d8e7e9f4ca613f8d83a0e2d2e5c,modules/profile/manifests/lvs/configuration.pp,modified
423,puppet,1c4fc973b07abd0c292ed670dd8f97911cdd9263,"webperf: Add SPDX headers

Bug: T308013
Change-Id: I3a04faafd56d2aca017bea87a4fe5fda729e8eb5",https://github.com/wikimedia/puppet/commit/1c4fc973b07abd0c292ed670dd8f97911cdd9263,modules/profile/manifests/webperf/arclamp.pp,modified
424,puppet,1c4fc973b07abd0c292ed670dd8f97911cdd9263,"webperf: Add SPDX headers

Bug: T308013
Change-Id: I3a04faafd56d2aca017bea87a4fe5fda729e8eb5",https://github.com/wikimedia/puppet/commit/1c4fc973b07abd0c292ed670dd8f97911cdd9263,modules/profile/manifests/webperf/coal_web.pp,modified
425,puppet,1c4fc973b07abd0c292ed670dd8f97911cdd9263,"webperf: Add SPDX headers

Bug: T308013
Change-Id: I3a04faafd56d2aca017bea87a4fe5fda729e8eb5",https://github.com/wikimedia/puppet/commit/1c4fc973b07abd0c292ed670dd8f97911cdd9263,modules/profile/manifests/webperf/processors.pp,modified
426,puppet,1c4fc973b07abd0c292ed670dd8f97911cdd9263,"webperf: Add SPDX headers

Bug: T308013
Change-Id: I3a04faafd56d2aca017bea87a4fe5fda729e8eb5",https://github.com/wikimedia/puppet/commit/1c4fc973b07abd0c292ed670dd8f97911cdd9263,modules/profile/manifests/webperf/site.pp,modified
427,puppet,1c4fc973b07abd0c292ed670dd8f97911cdd9263,"webperf: Add SPDX headers

Bug: T308013
Change-Id: I3a04faafd56d2aca017bea87a4fe5fda729e8eb5",https://github.com/wikimedia/puppet/commit/1c4fc973b07abd0c292ed670dd8f97911cdd9263,modules/profile/manifests/webperf/xhgui.pp,modified
428,puppet,06314f16651df304790bf90c3db77d38afe1f379,"swift: Allow for mounting using the device directly

Hosts: auto
Bug: T308677
Change-Id: If4494ec363b11f30a260102a9325f228236f7690",https://github.com/wikimedia/puppet/commit/06314f16651df304790bf90c3db77d38afe1f379,modules/profile/manifests/swift/storage/configure_disks.pp,modified
429,puppet,06314f16651df304790bf90c3db77d38afe1f379,"swift: Allow for mounting using the device directly

Hosts: auto
Bug: T308677
Change-Id: If4494ec363b11f30a260102a9325f228236f7690",https://github.com/wikimedia/puppet/commit/06314f16651df304790bf90c3db77d38afe1f379,modules/swift/manifests/mount_filesystem.pp,modified
430,puppet,68cd0dbd2d0b530562f78e446091fbda5be1d9d6,"swift::mount_filesystem: allow overriding the mount point

Hosts: auto
Bug: T308677
Change-Id: I38dec987d21eb295f9357449cb73dc5312491883",https://github.com/wikimedia/puppet/commit/68cd0dbd2d0b530562f78e446091fbda5be1d9d6,modules/profile/manifests/swift/storage/configure_disks.pp,modified
431,puppet,68cd0dbd2d0b530562f78e446091fbda5be1d9d6,"swift::mount_filesystem: allow overriding the mount point

Hosts: auto
Bug: T308677
Change-Id: I38dec987d21eb295f9357449cb73dc5312491883",https://github.com/wikimedia/puppet/commit/68cd0dbd2d0b530562f78e446091fbda5be1d9d6,modules/swift/manifests/mount_filesystem.pp,modified
432,puppet,a9ce7c4616dac4bf922a4055205595ed70c0f327,"P:swift::configure_disks: remove ensure_packages

Theses packages are installed elsewhere remove them from this profile
to avoid duplicate declatation

Change-Id: If9c7e225493fba9204143e09a771ad1848fcd213",https://github.com/wikimedia/puppet/commit/a9ce7c4616dac4bf922a4055205595ed70c0f327,modules/profile/manifests/swift/storage/configure_disks.pp,modified
433,puppet,efbfd7f02bf4d8fa6db078664672cded868da889,"prometheus: move webperf jobs to 'ext' instance

Total cardinality can reach ~2M over time. Just as a precaution and
because it is easy to do, move the metrics/jobs to 'ext' instance.

Bug: T175087
Change-Id: I58672e57cd1ce7bd00d493f70aace1cc87a66d8b",https://github.com/wikimedia/puppet/commit/efbfd7f02bf4d8fa6db078664672cded868da889,modules/profile/manifests/prometheus/ext.pp,modified
434,puppet,efbfd7f02bf4d8fa6db078664672cded868da889,"prometheus: move webperf jobs to 'ext' instance

Total cardinality can reach ~2M over time. Just as a precaution and
because it is easy to do, move the metrics/jobs to 'ext' instance.

Bug: T175087
Change-Id: I58672e57cd1ce7bd00d493f70aace1cc87a66d8b",https://github.com/wikimedia/puppet/commit/efbfd7f02bf4d8fa6db078664672cded868da889,modules/profile/manifests/prometheus/ops.pp,modified
435,puppet,bf616e601c8e5f7ba7003f7b4d9a864684bba75b,"P:swift::storage: add new resource to format via pci path

Add a new resource to partition the server based on the pci path of the
disks.  The provides a much more stable mapping of the disks

Bug: T308677
Hosts: P:swift::storage
Change-Id: Ide7457eb6bcceacd97d56cf3b250c0c65c6d84ef",https://github.com/wikimedia/puppet/commit/bf616e601c8e5f7ba7003f7b4d9a864684bba75b,modules/profile/manifests/swift/storage.pp,modified
436,puppet,bf616e601c8e5f7ba7003f7b4d9a864684bba75b,"P:swift::storage: add new resource to format via pci path

Add a new resource to partition the server based on the pci path of the
disks.  The provides a much more stable mapping of the disks

Bug: T308677
Hosts: P:swift::storage
Change-Id: Ide7457eb6bcceacd97d56cf3b250c0c65c6d84ef",https://github.com/wikimedia/puppet/commit/bf616e601c8e5f7ba7003f7b4d9a864684bba75b,modules/profile/manifests/swift/storage/configure_disks.pp,added
437,puppet,07bd0a19ae74ea9c503a96cfe6738f2fd10d39d3,"C:swift::storage: add variable for data directory

Bug: T308677
Hosts: C:swift::storage
Change-Id: I0740874aeb11527a701afa61153f8f8c8b3a7131",https://github.com/wikimedia/puppet/commit/07bd0a19ae74ea9c503a96cfe6738f2fd10d39d3,modules/swift/manifests/storage.pp,modified
438,puppet,076c4e88af3f292c93310e505e356579ba6f423c,"lvs4009: commission new LVS host (ulsfo hardware refresh)

lvs4009 will be the new high-traffic2 primary LVS host.

Bug: T317247
Change-Id: Ibb83d3a2200c2c7145d1b6d232e47c7c046a9827",https://github.com/wikimedia/puppet/commit/076c4e88af3f292c93310e505e356579ba6f423c,manifests/site.pp,modified
439,puppet,076c4e88af3f292c93310e505e356579ba6f423c,"lvs4009: commission new LVS host (ulsfo hardware refresh)

lvs4009 will be the new high-traffic2 primary LVS host.

Bug: T317247
Change-Id: Ibb83d3a2200c2c7145d1b6d232e47c7c046a9827",https://github.com/wikimedia/puppet/commit/076c4e88af3f292c93310e505e356579ba6f423c,modules/profile/manifests/lvs/configuration.pp,modified
440,puppet,d0a5260387b64549c8fc829e6414e96b25e6e98e,"dumps: fix http alert to check the new status

After Ib291c1c95cb1b5170882bdb6d2b9484b54ac28f2 the response status
changed, but the alert was not adapted.
This patch changes the alert to expect the new status.

Bug: T238720
Change-Id: I7fccdd1432504e00ddf04b40ed77a0927dcee476
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/d0a5260387b64549c8fc829e6414e96b25e6e98e,modules/dumps/manifests/web/xmldumps.pp,modified
441,puppet,e5a6a588043a91282a36f5473c270be81d1137a5,"scap::dsh: support querying puppetdb, use for k8s-workers

Why:
  The conftool list of k8s worker nodes includes some nodes
  that are dedicated to other uses and won't be involved in
  mw on k8s, and so they can't e.g. execute the commands from
  scap. We need to exclude them from the dsh list
What:
  Support puppetdb queries to fetch a list of nodes, and use
  it to find the nodes that correspond to our requirement.

Change-Id: Ic53709f2fb55f532d9162541a274d545cb3c29a9",https://github.com/wikimedia/puppet/commit/e5a6a588043a91282a36f5473c270be81d1137a5,modules/scap/manifests/dsh/group.pp,modified
442,puppet,c979f1a6b52866bfdda8b98daad999cea6f47aeb,"pontoon: write out puppet/pki CA certs

After a discussion with Janis we've concluded it is more intuitive (if
cheeky) to replace the ""expected"" or ""production"" certs filenames with
their Pontoon counterparts.

Bug: T319163
Change-Id: I0f043d858f8c5e60beb7c64dfb1611e0281b3fcb",https://github.com/wikimedia/puppet/commit/c979f1a6b52866bfdda8b98daad999cea6f47aeb,modules/pontoon/manifests/pki_root.pp,modified
443,puppet,c979f1a6b52866bfdda8b98daad999cea6f47aeb,"pontoon: write out puppet/pki CA certs

After a discussion with Janis we've concluded it is more intuitive (if
cheeky) to replace the ""expected"" or ""production"" certs filenames with
their Pontoon counterparts.

Bug: T319163
Change-Id: I0f043d858f8c5e60beb7c64dfb1611e0281b3fcb",https://github.com/wikimedia/puppet/commit/c979f1a6b52866bfdda8b98daad999cea6f47aeb,modules/profile/manifests/pontoon/base.pp,modified
444,puppet,c979f1a6b52866bfdda8b98daad999cea6f47aeb,"pontoon: write out puppet/pki CA certs

After a discussion with Janis we've concluded it is more intuitive (if
cheeky) to replace the ""expected"" or ""production"" certs filenames with
their Pontoon counterparts.

Bug: T319163
Change-Id: I0f043d858f8c5e60beb7c64dfb1611e0281b3fcb",https://github.com/wikimedia/puppet/commit/c979f1a6b52866bfdda8b98daad999cea6f47aeb,modules/profile/manifests/puppetmaster/pontoon.pp,modified
445,puppet,4f9a9a5ae16cc0084a083696641018141074873e,"confd: create /var/run/confd-template

Bug: T321678
Change-Id: I193f21b04dd5b40ab1f2610db54fc466394c8d65",https://github.com/wikimedia/puppet/commit/4f9a9a5ae16cc0084a083696641018141074873e,modules/confd/manifests/init.pp,modified
446,puppet,dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,"alertmanager: Add SPDX headers

Bug: T308013
Change-Id: Ia3dd2a3ae55a78623992c4a05be892cf4536b67a",https://github.com/wikimedia/puppet/commit/dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,modules/profile/manifests/alertmanager/ack.pp,modified
447,puppet,dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,"alertmanager: Add SPDX headers

Bug: T308013
Change-Id: Ia3dd2a3ae55a78623992c4a05be892cf4536b67a",https://github.com/wikimedia/puppet/commit/dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,modules/profile/manifests/alertmanager/api.pp,modified
448,puppet,dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,"alertmanager: Add SPDX headers

Bug: T308013
Change-Id: Ia3dd2a3ae55a78623992c4a05be892cf4536b67a",https://github.com/wikimedia/puppet/commit/dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,modules/profile/manifests/alertmanager/irc.pp,modified
449,puppet,dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,"alertmanager: Add SPDX headers

Bug: T308013
Change-Id: Ia3dd2a3ae55a78623992c4a05be892cf4536b67a",https://github.com/wikimedia/puppet/commit/dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,modules/profile/manifests/alertmanager/phab.pp,modified
450,puppet,dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,"alertmanager: Add SPDX headers

Bug: T308013
Change-Id: Ia3dd2a3ae55a78623992c4a05be892cf4536b67a",https://github.com/wikimedia/puppet/commit/dbf4ff4a6f9cfb725dd22d49597bdd9234575dc0,modules/profile/manifests/alertmanager/web.pp,modified
451,puppet,336010eeb40a557c7a8d9dac406291fc33a3ebd2,"graphite: start mirroring traffic to graphite2004

Bug: T315524
Change-Id: If289a51409cc06b0058eefcc1876d2dd796f0b8e",https://github.com/wikimedia/puppet/commit/336010eeb40a557c7a8d9dac406291fc33a3ebd2,modules/profile/manifests/graphite/production.pp,modified
452,puppet,4e1bc5dcc7801fade9fff0a5b062cd66f3f10759,"cp5031: Set cp role via site.pp and related config

Bug: T322048
Change-Id: Ibcf79c8868e20be89a23afbeeb3d30a5b8afb6ba",https://github.com/wikimedia/puppet/commit/4e1bc5dcc7801fade9fff0a5b062cd66f3f10759,manifests/site.pp,modified
453,puppet,29b8b6791ae8dd5ee7f23bbc0a51f2b4e3785a52,"phabricator: remove hardcoded ports, use parameters in my.cnf for admins

Avoid having the hardcoded port number in this template.

Use the existing class parameters to set the mysql_slave
host name and port instead.

Remove the use of $domain because the FQDN is in Hiera per DC
anyways.

To avoid having to add the parameters to the main phabricator class
and because it probably belongs there anyways, move this code
from the main module to the profile.

Bug: T280597
Change-Id: I9ea2a6d9a1e04e503f0a2de55c9b3cea5bf106be",https://github.com/wikimedia/puppet/commit/29b8b6791ae8dd5ee7f23bbc0a51f2b4e3785a52,modules/phabricator/manifests/init.pp,modified
454,puppet,29b8b6791ae8dd5ee7f23bbc0a51f2b4e3785a52,"phabricator: remove hardcoded ports, use parameters in my.cnf for admins

Avoid having the hardcoded port number in this template.

Use the existing class parameters to set the mysql_slave
host name and port instead.

Remove the use of $domain because the FQDN is in Hiera per DC
anyways.

To avoid having to add the parameters to the main phabricator class
and because it probably belongs there anyways, move this code
from the main module to the profile.

Bug: T280597
Change-Id: I9ea2a6d9a1e04e503f0a2de55c9b3cea5bf106be",https://github.com/wikimedia/puppet/commit/29b8b6791ae8dd5ee7f23bbc0a51f2b4e3785a52,modules/profile/manifests/phabricator/main.pp,modified
455,puppet,4fce29680a4799f6ecef61f99e6839fe2a5f17ea,"Add kafka-jumbo101[0-5] to site.pp and netboot.cfg

Bug: T306939
Change-Id: I7b864cb47bea503566cbb6faebab6a56f6df0b9f",https://github.com/wikimedia/puppet/commit/4fce29680a4799f6ecef61f99e6839fe2a5f17ea,manifests/site.pp,modified
456,puppet,13dcd4da6fc03b2c3a298f48dbd31fed21150f67,"role::cache: Remove text|upload_haproxy roles

- Remove dummy class profile::cache::varnish::frontend::upload
- Remove mentions to role::text|upload_haproxy roles in cumin aliases
- Switch prometheus::ops back to target cp hosts based on
  role::cache::text|upload

Bug: T323365
Change-Id: Ie7185980faa28d1e2a0c8d23612ee423296d6dff",https://github.com/wikimedia/puppet/commit/13dcd4da6fc03b2c3a298f48dbd31fed21150f67,modules/profile/manifests/cache/varnish/frontend/upload.pp,removed
457,puppet,13dcd4da6fc03b2c3a298f48dbd31fed21150f67,"role::cache: Remove text|upload_haproxy roles

- Remove dummy class profile::cache::varnish::frontend::upload
- Remove mentions to role::text|upload_haproxy roles in cumin aliases
- Switch prometheus::ops back to target cp hosts based on
  role::cache::text|upload

Bug: T323365
Change-Id: Ie7185980faa28d1e2a0c8d23612ee423296d6dff",https://github.com/wikimedia/puppet/commit/13dcd4da6fc03b2c3a298f48dbd31fed21150f67,modules/profile/manifests/prometheus/ops.pp,modified
458,puppet,13dcd4da6fc03b2c3a298f48dbd31fed21150f67,"role::cache: Remove text|upload_haproxy roles

- Remove dummy class profile::cache::varnish::frontend::upload
- Remove mentions to role::text|upload_haproxy roles in cumin aliases
- Switch prometheus::ops back to target cp hosts based on
  role::cache::text|upload

Bug: T323365
Change-Id: Ie7185980faa28d1e2a0c8d23612ee423296d6dff",https://github.com/wikimedia/puppet/commit/13dcd4da6fc03b2c3a298f48dbd31fed21150f67,modules/role/manifests/cache/text_haproxy.pp,removed
459,puppet,13dcd4da6fc03b2c3a298f48dbd31fed21150f67,"role::cache: Remove text|upload_haproxy roles

- Remove dummy class profile::cache::varnish::frontend::upload
- Remove mentions to role::text|upload_haproxy roles in cumin aliases
- Switch prometheus::ops back to target cp hosts based on
  role::cache::text|upload

Bug: T323365
Change-Id: Ie7185980faa28d1e2a0c8d23612ee423296d6dff",https://github.com/wikimedia/puppet/commit/13dcd4da6fc03b2c3a298f48dbd31fed21150f67,modules/role/manifests/cache/upload.pp,modified
460,puppet,13dcd4da6fc03b2c3a298f48dbd31fed21150f67,"role::cache: Remove text|upload_haproxy roles

- Remove dummy class profile::cache::varnish::frontend::upload
- Remove mentions to role::text|upload_haproxy roles in cumin aliases
- Switch prometheus::ops back to target cp hosts based on
  role::cache::text|upload

Bug: T323365
Change-Id: Ie7185980faa28d1e2a0c8d23612ee423296d6dff",https://github.com/wikimedia/puppet/commit/13dcd4da6fc03b2c3a298f48dbd31fed21150f67,modules/role/manifests/cache/upload_haproxy.pp,removed
461,puppet,0bfd1b65388846743f78c5e3906335d5c10b8dcf,"kubernetes::mediawiki_runner: allow ssh from the deployment servers

This will allow scap to trigger the preemptive pull of images.

Also, use the kubelet labels to avoid installing this class on nodes that
are dedicated to specific uses.

Change-Id: I3133a01a0868ee8a906084653d448a683400a3fc",https://github.com/wikimedia/puppet/commit/0bfd1b65388846743f78c5e3906335d5c10b8dcf,modules/profile/manifests/kubernetes/mediawiki_runner.pp,modified
462,puppet,0bfd1b65388846743f78c5e3906335d5c10b8dcf,"kubernetes::mediawiki_runner: allow ssh from the deployment servers

This will allow scap to trigger the preemptive pull of images.

Also, use the kubelet labels to avoid installing this class on nodes that
are dedicated to specific uses.

Change-Id: I3133a01a0868ee8a906084653d448a683400a3fc",https://github.com/wikimedia/puppet/commit/0bfd1b65388846743f78c5e3906335d5c10b8dcf,modules/scap/manifests/ferm.pp,modified
463,puppet,877caf8a80b6f855df0887283a822f75935356c0,"cp5030: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I477c7439ceac62043c9e4a75f7ce0039b46bccc3",https://github.com/wikimedia/puppet/commit/877caf8a80b6f855df0887283a822f75935356c0,manifests/site.pp,modified
464,puppet,a6bd9dc8ce6982d8666281c8b4e7a53bff97cab5,"site: Move cp nodes to role::cache:text|upload

Bug: T323365
Change-Id: Ie85fef9e031197581562afbd592984d75b46bdb4",https://github.com/wikimedia/puppet/commit/a6bd9dc8ce6982d8666281c8b4e7a53bff97cab5,manifests/site.pp,modified
465,puppet,9974885cf52d449176bd182fb0d1ec211f6aa8a9,"dumps: Keep only 13 latest growthmentorship dumps

growthmentorship dumps data of GrowthExperiments'
table growthexperiments_mentor_mentee. Each dump
is a full one, and it makes no sense to keep
the dumps indefinitely.

Let's keep last 13, same as with globalblocking
dump.

Hosts: dumpsdata1001.eqiad.wmnet, dumpsdata1002.eqiad.wmnet
Change-Id: Ic28f04aeeca005caf34f8db741d60d74f37c5071",https://github.com/wikimedia/puppet/commit/9974885cf52d449176bd182fb0d1ec211f6aa8a9,modules/dumps/manifests/web/cleanups/miscdumps.pp,modified
466,puppet,fd88d2e2778fbf157652672a21ab5f43c5806920,"prometheus: default to valid external url

Make the 'source' links work in alerts.w.o

Bug: T301944
Change-Id: I19f9b2086f20878981118f4ce720c2d4921d7c96",https://github.com/wikimedia/puppet/commit/fd88d2e2778fbf157652672a21ab5f43c5806920,modules/prometheus/manifests/server.pp,modified
467,puppet,7331f10e5d18b0c451e2669d405a372a07a54d0e,"role::cache_upload: Include profile:c:v:f:upload class

Bug: T323365
Change-Id: If11a405ea39c2796c9951e5e3ca703fb0cc1ab33",https://github.com/wikimedia/puppet/commit/7331f10e5d18b0c451e2669d405a372a07a54d0e,modules/role/manifests/cache/upload_haproxy.pp,modified
468,puppet,223f0c0d2b2a3d70b67338aa344d100a1fc52685,"prometheus::ops: Leverage varnish::frontend::text|upload classes

Use profile::cache::varnish::frontend::text and upload classes
to avoid duplicated definitions

Bug: T323365
Change-Id: I182a11959d999ac4655544c6ccd6ec9f0f5d96c5",https://github.com/wikimedia/puppet/commit/223f0c0d2b2a3d70b67338aa344d100a1fc52685,modules/profile/manifests/prometheus/ops.pp,modified
469,puppet,d895ffdacce616e303a02b94e9c2c9f3cc247da8,"P:mediawiki::maintenance::wikidata labs exception

There are no wdqs and no LVS on labs, skip this setup in labs because it
breaks the maintenance server in the beta cluster.

Hosts: mwmaint1002.eqiad.wmnet
Change-Id: I2ca76a23eec86a8feb2c5c1c6b3906a48a766e23",https://github.com/wikimedia/puppet/commit/d895ffdacce616e303a02b94e9c2c9f3cc247da8,modules/profile/manifests/mediawiki/maintenance/wikidata.pp,modified
470,puppet,aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,"cache: Create dummy profile class to tell between text/upload nodes

Hack to unbreak puppet on prometheus hosts and be able to tell
between text and upload nodes without using role::cache::(text|upload)
classes.

Bug: T323365
Change-Id: I3ad338a2405d8eef4a47a8888e2ec7b0faa8bed9",https://github.com/wikimedia/puppet/commit/aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,modules/profile/manifests/cache/varnish/frontend/upload.pp,added
471,puppet,aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,"cache: Create dummy profile class to tell between text/upload nodes

Hack to unbreak puppet on prometheus hosts and be able to tell
between text and upload nodes without using role::cache::(text|upload)
classes.

Bug: T323365
Change-Id: I3ad338a2405d8eef4a47a8888e2ec7b0faa8bed9",https://github.com/wikimedia/puppet/commit/aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,modules/profile/manifests/prometheus/ops.pp,modified
472,puppet,aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,"cache: Create dummy profile class to tell between text/upload nodes

Hack to unbreak puppet on prometheus hosts and be able to tell
between text and upload nodes without using role::cache::(text|upload)
classes.

Bug: T323365
Change-Id: I3ad338a2405d8eef4a47a8888e2ec7b0faa8bed9",https://github.com/wikimedia/puppet/commit/aae750d6a49e3d71d990dfe67dbcefb1ed96d2b3,modules/role/manifests/cache/upload.pp,modified
473,puppet,95c872f7c058186fd5bd50310eccc9bfbc06e0e0,"role::kubernetes::wroker: allow scap to pre-pull mediawiki images

Why:
 We need to ensure the mediawiki image is pulled on every node before
 deployments for performance reasons

What:
  Add a script that runs as root that does the downloading, plus install
  the mwdeploy user with the rights to execute that script as root

Bug: T323349
Change-Id: I7cc3a47158b1ad731b1dd3bca734d069e7b26d71",https://github.com/wikimedia/puppet/commit/95c872f7c058186fd5bd50310eccc9bfbc06e0e0,modules/profile/manifests/kubernetes/mediawiki_runner.pp,added
474,puppet,95c872f7c058186fd5bd50310eccc9bfbc06e0e0,"role::kubernetes::wroker: allow scap to pre-pull mediawiki images

Why:
 We need to ensure the mediawiki image is pulled on every node before
 deployments for performance reasons

What:
  Add a script that runs as root that does the downloading, plus install
  the mwdeploy user with the rights to execute that script as root

Bug: T323349
Change-Id: I7cc3a47158b1ad731b1dd3bca734d069e7b26d71",https://github.com/wikimedia/puppet/commit/95c872f7c058186fd5bd50310eccc9bfbc06e0e0,modules/role/manifests/kubernetes/worker.pp,modified
475,puppet,b47cade1916dd37b2645960169726e0f1761b16b,"cfssl: update pattern to be case insensetive

Hosts: P:pki::multirootca
Change-Id: If0c42687a5c1f34f6ee34a3a4b18191a28bd8094",https://github.com/wikimedia/puppet/commit/b47cade1916dd37b2645960169726e0f1761b16b,modules/cfssl/types/ca_name.pp,modified
476,puppet,973d37bdcb4819145d79c5f0e107add0c3060a94,"role::cache: Link/copy (text|upload)_haproxy to base roles

This makes cache::text functionally equivalent to
cache::text_haproxy, identical in every way except the name, by
copying the role and linking the hieradata over.

Doing this separately first may help avoid race conditions in the
followup patches to transition the nodes and remove the _haproxy
variants.

Bug: T323365
Change-Id: I6449dfdcf51ea5dbc7a6b4ce99b76be63c2ef830",https://github.com/wikimedia/puppet/commit/973d37bdcb4819145d79c5f0e107add0c3060a94,modules/profile/manifests/prometheus/ops.pp,modified
477,puppet,973d37bdcb4819145d79c5f0e107add0c3060a94,"role::cache: Link/copy (text|upload)_haproxy to base roles

This makes cache::text functionally equivalent to
cache::text_haproxy, identical in every way except the name, by
copying the role and linking the hieradata over.

Doing this separately first may help avoid race conditions in the
followup patches to transition the nodes and remove the _haproxy
variants.

Bug: T323365
Change-Id: I6449dfdcf51ea5dbc7a6b4ce99b76be63c2ef830",https://github.com/wikimedia/puppet/commit/973d37bdcb4819145d79c5f0e107add0c3060a94,modules/role/manifests/cache/text.pp,modified
478,puppet,973d37bdcb4819145d79c5f0e107add0c3060a94,"role::cache: Link/copy (text|upload)_haproxy to base roles

This makes cache::text functionally equivalent to
cache::text_haproxy, identical in every way except the name, by
copying the role and linking the hieradata over.

Doing this separately first may help avoid race conditions in the
followup patches to transition the nodes and remove the _haproxy
variants.

Bug: T323365
Change-Id: I6449dfdcf51ea5dbc7a6b4ce99b76be63c2ef830",https://github.com/wikimedia/puppet/commit/973d37bdcb4819145d79c5f0e107add0c3060a94,modules/role/manifests/cache/upload.pp,modified
479,puppet,94ba9f2c92d23ca1dae1d5bc9456eefdc8c1570a,"profile::kubernetes::node: add k8s_116 tag to infrapod's default

The current docker image pulled for the pause container should be
""latest"", since we have been having only one value in the registry
up to now. We are going to publish a new image soon, that will take
the ""latest"" tag becoming the default across clusters.

We pushed a new tag called ""k8s_116"", already tested in staging,
so let's change the hiera's default before publishing the new
pause image to the registry.

Hosts: auto
Bug: T322920
Change-Id: Iccf650ea9f7ad1ab8dbe48e4a10af4b87cd32825",https://github.com/wikimedia/puppet/commit/94ba9f2c92d23ca1dae1d5bc9456eefdc8c1570a,modules/profile/manifests/kubernetes/node.pp,modified
480,puppet,0d39fc321fbae8b7c0a81ba2efcf62504ec59980,"cp5029: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I53685353386658ea337e86a883a72d759455f5fe",https://github.com/wikimedia/puppet/commit/0d39fc321fbae8b7c0a81ba2efcf62504ec59980,manifests/site.pp,modified
481,puppet,56b6e0759bce1061dfcadeae309bb48fd4ec5797,"cp5028: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I372182c99bcd1527769174dd4dbc31d265d2441f",https://github.com/wikimedia/puppet/commit/56b6e0759bce1061dfcadeae309bb48fd4ec5797,manifests/site.pp,modified
482,puppet,21335f92d1c2d4cfff9c011f5a6ac6c1a4f3eb7c,"cp5020: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I8ce94e6f7c75845e3934d11dfd15ac48776f5504",https://github.com/wikimedia/puppet/commit/21335f92d1c2d4cfff9c011f5a6ac6c1a4f3eb7c,manifests/site.pp,modified
483,puppet,e8728813b73022184a0cc4153d4bd51d14f6068c,"cp5019: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I95907a9a2b8eb187f949a289e97080455ead1ea1",https://github.com/wikimedia/puppet/commit/e8728813b73022184a0cc4153d4bd51d14f6068c,manifests/site.pp,modified
484,puppet,367e27387cdb3c3d55a8723a3cc955a6a6dee479,"cp5018: Set cp role via site.pp and related config

Bug: T322048
Change-Id: I7863beb430087e3cd58e536894f0156b4ebfc807",https://github.com/wikimedia/puppet/commit/367e27387cdb3c3d55a8723a3cc955a6a6dee479,manifests/site.pp,modified
485,puppet,bcce5325dbfa663bfb4cd270540e677c7b4d497a,"dumps/distribution: move hardcoded host names to parameters

The goal is to get the hard-coded host names out of the puppet
code and into parameters and Hiera.

Add a parameter for the stat dump host and one for the phab dump host.

Also partially follow-up to T322221 though unrelated to the bug there.

And in preparation for the upcoming Phabricator server switch
where we will have to update the phab1001 host name soon.

Bug: T280597
Bug: T322221
Change-Id: I570768bb03df32f954aced32943a8af123e0b441",https://github.com/wikimedia/puppet/commit/bcce5325dbfa663bfb4cd270540e677c7b4d497a,modules/profile/manifests/dumps/distribution/datasets/fetcher.pp,modified
486,puppet,cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,"glance: use www_authenticate_uri

auth_uri and auth_url are deprecated.

Bug: T323319
Change-Id: Iaba60a7218b7f548b51c49ff01ae9cb695da8c8a",https://github.com/wikimedia/puppet/commit/cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,modules/openstack/manifests/glance/service.pp,modified
487,puppet,cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,"glance: use www_authenticate_uri

auth_uri and auth_url are deprecated.

Bug: T323319
Change-Id: Iaba60a7218b7f548b51c49ff01ae9cb695da8c8a",https://github.com/wikimedia/puppet/commit/cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,modules/openstack/manifests/glance/service/yoga.pp,modified
488,puppet,cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,"glance: use www_authenticate_uri

auth_uri and auth_url are deprecated.

Bug: T323319
Change-Id: Iaba60a7218b7f548b51c49ff01ae9cb695da8c8a",https://github.com/wikimedia/puppet/commit/cc369fbda0f1ac777e46ffa1e3846d5f0d2eb9bc,modules/profile/manifests/openstack/base/glance.pp,modified
489,puppet,656d726621cea15e929332958ea188f24d1ba33c,"cp5017: update site.pp and related configs for cp role

Bug: T322048
Change-Id: Ic640a7341a34e02c4509cba36cd7e02b77b823c1",https://github.com/wikimedia/puppet/commit/656d726621cea15e929332958ea188f24d1ba33c,manifests/site.pp,modified
490,puppet,d7d18f335840f4ebad69a2a0346f5e5531aed3b8,"prometheus: Remove old ats config export job

Now that these resources have been removed from production these can be
safely removed.

Bug: T292815
Change-Id: Id6f6e1ddd3fdf2a79337c48413c4eb7cd6038b75",https://github.com/wikimedia/puppet/commit/d7d18f335840f4ebad69a2a0346f5e5531aed3b8,modules/prometheus/manifests/node_trafficserver_config.pp,modified
491,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/cfssl/manifests/cert.pp,modified
492,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/cfssl/manifests/multirootca.pp,modified
493,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/cfssl/types/ca_name.pp,added
494,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/profile/manifests/pki/client.pp,modified
495,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/profile/manifests/pki/multirootca.pp,modified
496,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/profile/manifests/pki/root_ca.pp,modified
497,puppet,6b54862286f332de3205e5d51ea2efd8b9c454fc,"P:pki: add new type calidation for ca names

Hosts: auto
Change-Id: I4b10d8ccefbd32297dbeb4633efee5c3875885eb",https://github.com/wikimedia/puppet/commit/6b54862286f332de3205e5d51ea2efd8b9c454fc,modules/profile/manifests/pki/server.pp,modified
498,puppet,460e7dc3bb39b53f7ce2e0ed262a6fcca52fe85b,"puppet_compiler: bump version to 2.5.2

Hosts: auto
Change-Id: Ia5a96f99b0f32a68f1c1d2b9e18aabb631f481d3",https://github.com/wikimedia/puppet/commit/460e7dc3bb39b53f7ce2e0ed262a6fcca52fe85b,modules/puppet_compiler/manifests/init.pp,modified
499,puppet,03a34d3e43f3b67aa8421d5464351b18a7b05c61,"prometheus: drop cloudvirt ceph metrics generator

This is not in use. The metrics were never accurate and nowadays we have better ways
to account for ceph network traffic.

Bug: T271096
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I5e60545060aa3db238d6f4cb317537a64dba7e1f",https://github.com/wikimedia/puppet/commit/03a34d3e43f3b67aa8421d5464351b18a7b05c61,modules/profile/manifests/openstack/base/nova/compute/service.pp,modified
500,puppet,03a34d3e43f3b67aa8421d5464351b18a7b05c61,"prometheus: drop cloudvirt ceph metrics generator

This is not in use. The metrics were never accurate and nowadays we have better ways
to account for ceph network traffic.

Bug: T271096
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I5e60545060aa3db238d6f4cb317537a64dba7e1f",https://github.com/wikimedia/puppet/commit/03a34d3e43f3b67aa8421d5464351b18a7b05c61,modules/prometheus/manifests/node_cloudvirt_ceph_network.pp,modified
501,puppet,c6af6537ddd4fe974fe7dab435b6fd1d530a3a1a,"P:spicerack: ensure firmware directory is writable by dc-ops

Change-Id: Ic8ac8683d624259cf5125b32bab57fbf4b2aeb7a",https://github.com/wikimedia/puppet/commit/c6af6537ddd4fe974fe7dab435b6fd1d530a3a1a,modules/profile/manifests/spicerack.pp,modified
502,puppet,d2c6260554e690994721a63ed06f1b8e4ecdc4d2,"cloudvirts: introduce modern NIC setup and use it by default

This is controlled by a new hiera key, which implies:
 * use a single NIC for dataplane / controlplane traffic
 * make use of the `vlanXYZW` naming scheme
 * is the new default behaviour

This is to prevent problems with too long NIC names in the old scheme `eno1.XYZW` and
to eventually simplify the whole setup (once all cloudvirts are in the new scheme).

My previous approach of just using ""interface_primary.XYZW"" wont work in eqiad1
where several cloudvirts have long interface names.

The intended workflow would be to reimage each cloudvirt and merge a patch
removing unused host-level hiera to enable the single NIC setup.

This patch also moves cloudvirt2001-dev to the new setup. It will be reimaged.
Host-level hiera is introduced for 2002/2003 so they don't change until they
are reimaged.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I9a5de108f7cd535b87c92f9beb070025c5bbc85c",https://github.com/wikimedia/puppet/commit/d2c6260554e690994721a63ed06f1b8e4ecdc4d2,modules/profile/manifests/openstack/base/nova/compute/service.pp,modified
503,puppet,d2c6260554e690994721a63ed06f1b8e4ecdc4d2,"cloudvirts: introduce modern NIC setup and use it by default

This is controlled by a new hiera key, which implies:
 * use a single NIC for dataplane / controlplane traffic
 * make use of the `vlanXYZW` naming scheme
 * is the new default behaviour

This is to prevent problems with too long NIC names in the old scheme `eno1.XYZW` and
to eventually simplify the whole setup (once all cloudvirts are in the new scheme).

My previous approach of just using ""interface_primary.XYZW"" wont work in eqiad1
where several cloudvirts have long interface names.

The intended workflow would be to reimage each cloudvirt and merge a patch
removing unused host-level hiera to enable the single NIC setup.

This patch also moves cloudvirt2001-dev to the new setup. It will be reimaged.
Host-level hiera is introduced for 2002/2003 so they don't change until they
are reimaged.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I9a5de108f7cd535b87c92f9beb070025c5bbc85c",https://github.com/wikimedia/puppet/commit/d2c6260554e690994721a63ed06f1b8e4ecdc4d2,modules/profile/manifests/openstack/codfw1dev/nova/compute/service.pp,modified
504,puppet,d2c6260554e690994721a63ed06f1b8e4ecdc4d2,"cloudvirts: introduce modern NIC setup and use it by default

This is controlled by a new hiera key, which implies:
 * use a single NIC for dataplane / controlplane traffic
 * make use of the `vlanXYZW` naming scheme
 * is the new default behaviour

This is to prevent problems with too long NIC names in the old scheme `eno1.XYZW` and
to eventually simplify the whole setup (once all cloudvirts are in the new scheme).

My previous approach of just using ""interface_primary.XYZW"" wont work in eqiad1
where several cloudvirts have long interface names.

The intended workflow would be to reimage each cloudvirt and merge a patch
removing unused host-level hiera to enable the single NIC setup.

This patch also moves cloudvirt2001-dev to the new setup. It will be reimaged.
Host-level hiera is introduced for 2002/2003 so they don't change until they
are reimaged.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I9a5de108f7cd535b87c92f9beb070025c5bbc85c",https://github.com/wikimedia/puppet/commit/d2c6260554e690994721a63ed06f1b8e4ecdc4d2,modules/profile/manifests/openstack/eqiad1/nova/compute/service.pp,modified
505,puppet,1535061ddb2e382949797d82be55c4eec38f1d23,"openstack: nova: compute: cleanup unused code

This code reference servers that no longer exist.

Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I69f7e4ae4bbfab829542a32bfc81f33c506a6c1e",https://github.com/wikimedia/puppet/commit/1535061ddb2e382949797d82be55c4eec38f1d23,modules/openstack/manifests/nova/compute/partition.pp,removed
506,puppet,1535061ddb2e382949797d82be55c4eec38f1d23,"openstack: nova: compute: cleanup unused code

This code reference servers that no longer exist.

Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I69f7e4ae4bbfab829542a32bfc81f33c506a6c1e",https://github.com/wikimedia/puppet/commit/1535061ddb2e382949797d82be55c4eec38f1d23,modules/profile/manifests/openstack/base/nova/compute/service.pp,modified
507,puppet,766aa5ecc093b065961a3b438ccd8c948074037b,"pontoon: don't double-define ferm rules for metricsinfra prometheus

Partial revert of I5b6f858f35, see discussion there too

Change-Id: I29b76f22d61d792f12bf9c7af017baa9464c5671",https://github.com/wikimedia/puppet/commit/766aa5ecc093b065961a3b438ccd8c948074037b,modules/profile/manifests/pontoon/provider/cloud_vps.pp,modified
508,puppet,00f6654b6b74295fce8a7091974ea2459cb378f0,"prometheus: Refactor ATS config monitoring

The previous implementation suffered from overly complicated design:
Rather than using traffic_ctl to occasionally query configuration
options, we can merely re-use the existing hiera values. This removes
any delay between checks and keeps things simpler in general.

This will also help support multiple ATS environments more simply should
that be desired in future.

Bug: T292815
Change-Id: I28f84282e875ea3db647334086bef177f995783a",https://github.com/wikimedia/puppet/commit/00f6654b6b74295fce8a7091974ea2459cb378f0,modules/profile/manifests/trafficserver/backend.pp,modified
509,puppet,00f6654b6b74295fce8a7091974ea2459cb378f0,"prometheus: Refactor ATS config monitoring

The previous implementation suffered from overly complicated design:
Rather than using traffic_ctl to occasionally query configuration
options, we can merely re-use the existing hiera values. This removes
any delay between checks and keeps things simpler in general.

This will also help support multiple ATS environments more simply should
that be desired in future.

Bug: T292815
Change-Id: I28f84282e875ea3db647334086bef177f995783a",https://github.com/wikimedia/puppet/commit/00f6654b6b74295fce8a7091974ea2459cb378f0,modules/profile/manifests/trafficserver/monitoring.pp,modified
510,puppet,00f6654b6b74295fce8a7091974ea2459cb378f0,"prometheus: Refactor ATS config monitoring

The previous implementation suffered from overly complicated design:
Rather than using traffic_ctl to occasionally query configuration
options, we can merely re-use the existing hiera values. This removes
any delay between checks and keeps things simpler in general.

This will also help support multiple ATS environments more simply should
that be desired in future.

Bug: T292815
Change-Id: I28f84282e875ea3db647334086bef177f995783a",https://github.com/wikimedia/puppet/commit/00f6654b6b74295fce8a7091974ea2459cb378f0,modules/prometheus/manifests/node_trafficserver_config.pp,modified
511,puppet,e41990e9f39b27e211154c77afe78a7b93b86d28,"GrowthExperiments: Run updateIsActiveFlagForMentees weekly

This will review all users currently marked
as active via
growthexperiments_mentor_mentee.gemm_mentee_is_active.

Bug: T318457
Hosts: mwmaint1002.eqiad.wmnet
Change-Id: Id1ea2b2906b86dda7c83a6e2c77e4b919a09b67d",https://github.com/wikimedia/puppet/commit/e41990e9f39b27e211154c77afe78a7b93b86d28,modules/profile/manifests/mediawiki/maintenance/growthexperiments.pp,modified
512,puppet,403b515bf81530ebcc620eef806bc0deb27f69eb,"idp: Add missing/renamed keys

As we have now enabled web_authn and oauth we need to specify keys in
the private repo  to avoid them getting regenerated echoed to the
logfile on start up

This is the same for spring.security.user.password which got add in 6.5

Also add provisions for the following value which was renamed
 * cas.server.tomcat.http[0].enabled

Hosts: auto
Bug: T311235
Change-Id: I17a21672caf1391b7ee1321229b1b46dc551045f",https://github.com/wikimedia/puppet/commit/403b515bf81530ebcc620eef806bc0deb27f69eb,modules/apereo_cas/manifests/init.pp,modified
513,puppet,403b515bf81530ebcc620eef806bc0deb27f69eb,"idp: Add missing/renamed keys

As we have now enabled web_authn and oauth we need to specify keys in
the private repo  to avoid them getting regenerated echoed to the
logfile on start up

This is the same for spring.security.user.password which got add in 6.5

Also add provisions for the following value which was renamed
 * cas.server.tomcat.http[0].enabled

Hosts: auto
Bug: T311235
Change-Id: I17a21672caf1391b7ee1321229b1b46dc551045f",https://github.com/wikimedia/puppet/commit/403b515bf81530ebcc620eef806bc0deb27f69eb,modules/profile/manifests/idp.pp,modified
514,puppet,cc84b13a760bc888d9bdca5772eff441761c48ab,"cfssl: make keys optional

Hosts: basic
Hosts: P:pki::multirootca
Change-Id: I86478e8713e0fd2899e31d033c195dfde09ef83f",https://github.com/wikimedia/puppet/commit/cc84b13a760bc888d9bdca5772eff441761c48ab,modules/cfssl/types/name.pp,modified
515,puppet,b01a308fbfd4346ec48661d97ea2a7101e4a8c45,"profile::maps: remove chgrp_log

Currently maps-admins is the same user list as those who can sudo on
maps hosts. Remove this redundant chgrp to simplify our debugging.

Change-Id: I6edf383f25c9b59b0a7919197670345495397cd7",https://github.com/wikimedia/puppet/commit/b01a308fbfd4346ec48661d97ea2a7101e4a8c45,modules/profile/manifests/maps/postgresql_common.pp,modified
516,puppet,23734b47a751ea1ee47cec78ea2d3cbdd00106bf,"phabricator: pass missing mysql.port paramater to local settings

follow-up to I1e7495d14ea04fc

After further debugging we found out we did not pass the mysql.port
setting to the Phabricator local settings.

Bug: T280597
Change-Id: I487d8dcb7cac007fcb840870c6438a1ecf34399b",https://github.com/wikimedia/puppet/commit/23734b47a751ea1ee47cec78ea2d3cbdd00106bf,modules/profile/manifests/phabricator/main.pp,modified
517,puppet,061020d65d6fc80ab4d1666d9af81139cda45c23,"maps: enable postgres replication slots in eqiad

Bug: T290149
Change-Id: I6f06575fd75bb9b96055a783d94fce399738c306",https://github.com/wikimedia/puppet/commit/061020d65d6fc80ab4d1666d9af81139cda45c23,modules/profile/manifests/maps/osm_master.pp,modified
518,puppet,3d3d94d4fb2443fba92bde564f2fcd65750e5666,"aux-k8s: allow kubepods to talk to pki

Add kubepods & kubesvc network constants so we can allow kubepods to
talk to our pki

Bug: T321120
Hosts: O:pki::multirootca
Change-Id: I5be1a3f32610bfbd670f14961bf54153b33a97ac",https://github.com/wikimedia/puppet/commit/3d3d94d4fb2443fba92bde564f2fcd65750e5666,modules/network/manifests/constants.pp,modified
519,puppet,3d3d94d4fb2443fba92bde564f2fcd65750e5666,"aux-k8s: allow kubepods to talk to pki

Add kubepods & kubesvc network constants so we can allow kubepods to
talk to our pki

Bug: T321120
Hosts: O:pki::multirootca
Change-Id: I5be1a3f32610bfbd670f14961bf54153b33a97ac",https://github.com/wikimedia/puppet/commit/3d3d94d4fb2443fba92bde564f2fcd65750e5666,modules/profile/manifests/pki/multirootca.pp,modified
520,puppet,7cb3a7c364c6c1061c0bbc676e6fb57d9df4d6a5,"maps: add support for replication slots

Adding support for replication slots on the postgres hosts
running within maps*. This is noop.

Bug: T290149
Change-Id: I509bc5e3b3008cc3a256291a9210c6d3348d220a",https://github.com/wikimedia/puppet/commit/7cb3a7c364c6c1061c0bbc676e6fb57d9df4d6a5,modules/profile/manifests/maps/osm_master.pp,modified
521,puppet,7cb3a7c364c6c1061c0bbc676e6fb57d9df4d6a5,"maps: add support for replication slots

Adding support for replication slots on the postgres hosts
running within maps*. This is noop.

Bug: T290149
Change-Id: I509bc5e3b3008cc3a256291a9210c6d3348d220a",https://github.com/wikimedia/puppet/commit/7cb3a7c364c6c1061c0bbc676e6fb57d9df4d6a5,modules/profile/manifests/maps/osm_replica.pp,modified
522,puppet,1dc601ff5b1968b6d7b33fc1657231d43e31aff0,"C:postgresql::master: add support for multiple replicas

There is a minor bug in the manifest, which is hit when
we have more than one replica WALs.

Change-Id: I7d8fe42921149240e4a04b25a229a220055a97de",https://github.com/wikimedia/puppet/commit/1dc601ff5b1968b6d7b33fc1657231d43e31aff0,modules/postgresql/manifests/master.pp,modified
523,puppet,1ee1edc17c19110e461ca3def9ba9a56e78f3459,"benthos: fix required 'content' for absented systemd::service

'content' is required in all cases

Bug: T319214
Change-Id: I50effa157c923a2df1d62864af5603c4d5773574",https://github.com/wikimedia/puppet/commit/1ee1edc17c19110e461ca3def9ba9a56e78f3459,modules/benthos/manifests/instance.pp,modified
524,puppet,a27b107989d6332908d0eeb81a7d87cd38c3bf51,"benthos: fix service name

Bug: T319214
Change-Id: Idfe687eaf211f94c80ce105a089ee7383414f692",https://github.com/wikimedia/puppet/commit/a27b107989d6332908d0eeb81a7d87cd38c3bf51,modules/benthos/manifests/instance.pp,modified
525,puppet,7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,"cloudgw: cleanup unused code to support multiple NICs

All cloudgw are currently configured to use a single NIC for dataplane/controlplane
traffic. There is a bunch of configuration we no longer need to support the multiple NIC
setup. This patch drops it.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I38fe807d2f0bf31b7eb8fa3f2160685e1a253d64",https://github.com/wikimedia/puppet/commit/7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,modules/profile/manifests/openstack/base/cloudgw.pp,modified
526,puppet,7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,"cloudgw: cleanup unused code to support multiple NICs

All cloudgw are currently configured to use a single NIC for dataplane/controlplane
traffic. There is a bunch of configuration we no longer need to support the multiple NIC
setup. This patch drops it.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I38fe807d2f0bf31b7eb8fa3f2160685e1a253d64",https://github.com/wikimedia/puppet/commit/7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,modules/profile/manifests/openstack/codfw1dev/cloudgw.pp,modified
527,puppet,7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,"cloudgw: cleanup unused code to support multiple NICs

All cloudgw are currently configured to use a single NIC for dataplane/controlplane
traffic. There is a bunch of configuration we no longer need to support the multiple NIC
setup. This patch drops it.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I38fe807d2f0bf31b7eb8fa3f2160685e1a253d64",https://github.com/wikimedia/puppet/commit/7195a6defad9e5c0735d2acbed3ff5ce727dd3e4,modules/profile/manifests/openstack/eqiad1/cloudgw.pp,modified
528,puppet,54769e71af1f2dcf6232ba5b92d06fdee76c1390,"pontoon: serve public pki certs via fileserver

We fetch the private material from /etc/pontoon/pki
(profile::pki::multirootca::private_cert_base) via file() to make it
available to multirootca host.

For public material all cfssl clients need access to the intermediates
certificates (public). Serve those via the fileserver and adjust
profile::pki::client::bundles_source accordingly.

Bug: T319163
Change-Id: I81fdc0ffacce86d370e975e2f5f914ecab01698a",https://github.com/wikimedia/puppet/commit/54769e71af1f2dcf6232ba5b92d06fdee76c1390,modules/pontoon/manifests/pki_root.pp,modified
529,puppet,63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,"P:pontoon: include firewall rules to allow metricsinfra scraping

Change-Id: I5b6f858f3592e66cf04128a93dc97ec9fa8efa14",https://github.com/wikimedia/puppet/commit/63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,modules/profile/manifests/pontoon/base.pp,modified
530,puppet,63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,"P:pontoon: include firewall rules to allow metricsinfra scraping

Change-Id: I5b6f858f3592e66cf04128a93dc97ec9fa8efa14",https://github.com/wikimedia/puppet/commit/63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,modules/profile/manifests/pontoon/provider/cloud_vps.pp,added
531,puppet,63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,"P:pontoon: include firewall rules to allow metricsinfra scraping

Change-Id: I5b6f858f3592e66cf04128a93dc97ec9fa8efa14",https://github.com/wikimedia/puppet/commit/63ed4978c935f1e4c6cbd3669ece533a91a4dbb9,modules/profile/manifests/wmcs/instance.pp,modified
532,puppet,2001d7d698f3805fbe5feb3c5a7737f62bb4085b,"prometheus: add benthos jobs

Also add 'port' parameter to benthos::instance for Prometheus to pick
up.

Bug: T319214
Change-Id: Ia915a789c310531d8439f439632a2ef4964a4a8e",https://github.com/wikimedia/puppet/commit/2001d7d698f3805fbe5feb3c5a7737f62bb4085b,modules/benthos/manifests/instance.pp,modified
533,puppet,2001d7d698f3805fbe5feb3c5a7737f62bb4085b,"prometheus: add benthos jobs

Also add 'port' parameter to benthos::instance for Prometheus to pick
up.

Bug: T319214
Change-Id: Ia915a789c310531d8439f439632a2ef4964a4a8e",https://github.com/wikimedia/puppet/commit/2001d7d698f3805fbe5feb3c5a7737f62bb4085b,modules/profile/manifests/benthos.pp,modified
534,puppet,2001d7d698f3805fbe5feb3c5a7737f62bb4085b,"prometheus: add benthos jobs

Also add 'port' parameter to benthos::instance for Prometheus to pick
up.

Bug: T319214
Change-Id: Ia915a789c310531d8439f439632a2ef4964a4a8e",https://github.com/wikimedia/puppet/commit/2001d7d698f3805fbe5feb3c5a7737f62bb4085b,modules/profile/manifests/prometheus/ops.pp,modified
535,puppet,3c00da9bfd355b65cd3d1346406d794392fef462,"pontoon: install Puppet and PKI CAs as certificates

Instruct clients to trust the Puppet (and PKI, if enabled) CAs. The
mechanism is the same as production with wmf-certificates package.

Bug: T319163
Change-Id: I108399ccf235af854c94896d36a1c42570728157",https://github.com/wikimedia/puppet/commit/3c00da9bfd355b65cd3d1346406d794392fef462,modules/profile/manifests/pontoon/base.pp,modified
536,puppet,32081513cf33c28e666e8b671452b3fec3052bff,"pontoon: copy out the root pki ca

The PKI CA public cert needs to be trusted by clients, to this end make
it available to puppet. The cert will be then served in
profile::pontoon::base.

Bug: T319163
Change-Id: Iaf246a7e3a159a0a2a2aab25d11a5d4834e3a08d",https://github.com/wikimedia/puppet/commit/32081513cf33c28e666e8b671452b3fec3052bff,modules/pontoon/manifests/pki_root.pp,modified
537,puppet,32081513cf33c28e666e8b671452b3fec3052bff,"pontoon: copy out the root pki ca

The PKI CA public cert needs to be trusted by clients, to this end make
it available to puppet. The cert will be then served in
profile::pontoon::base.

Bug: T319163
Change-Id: Iaf246a7e3a159a0a2a2aab25d11a5d4834e3a08d",https://github.com/wikimedia/puppet/commit/32081513cf33c28e666e8b671452b3fec3052bff,modules/profile/manifests/puppetmaster/pontoon.pp,modified
538,puppet,fa38bca61f841f180f2d778949cb1d9ad809e672,"k8s: Add a central ipv6dualstack flag to enable dual stack

With k8s 1.16 we only had IPv6 dual stack enabled on kubelet.
With >=1.23 IPv6DualStack is GA and we can enable it everywhere (on
request).

Hosts: auto
Bug: T307943
Change-Id: I6d132e9a8cf96185b763b0456a0a27d4bfc57a11",https://github.com/wikimedia/puppet/commit/fa38bca61f841f180f2d778949cb1d9ad809e672,modules/k8s/manifests/apiserver.pp,modified
539,puppet,fa38bca61f841f180f2d778949cb1d9ad809e672,"k8s: Add a central ipv6dualstack flag to enable dual stack

With k8s 1.16 we only had IPv6 dual stack enabled on kubelet.
With >=1.23 IPv6DualStack is GA and we can enable it everywhere (on
request).

Hosts: auto
Bug: T307943
Change-Id: I6d132e9a8cf96185b763b0456a0a27d4bfc57a11",https://github.com/wikimedia/puppet/commit/fa38bca61f841f180f2d778949cb1d9ad809e672,modules/k8s/manifests/kubelet.pp,modified
540,puppet,fa38bca61f841f180f2d778949cb1d9ad809e672,"k8s: Add a central ipv6dualstack flag to enable dual stack

With k8s 1.16 we only had IPv6 dual stack enabled on kubelet.
With >=1.23 IPv6DualStack is GA and we can enable it everywhere (on
request).

Hosts: auto
Bug: T307943
Change-Id: I6d132e9a8cf96185b763b0456a0a27d4bfc57a11",https://github.com/wikimedia/puppet/commit/fa38bca61f841f180f2d778949cb1d9ad809e672,modules/k8s/manifests/proxy.pp,modified
541,puppet,fa38bca61f841f180f2d778949cb1d9ad809e672,"k8s: Add a central ipv6dualstack flag to enable dual stack

With k8s 1.16 we only had IPv6 dual stack enabled on kubelet.
With >=1.23 IPv6DualStack is GA and we can enable it everywhere (on
request).

Hosts: auto
Bug: T307943
Change-Id: I6d132e9a8cf96185b763b0456a0a27d4bfc57a11",https://github.com/wikimedia/puppet/commit/fa38bca61f841f180f2d778949cb1d9ad809e672,modules/profile/manifests/kubernetes/master.pp,modified
542,puppet,fa38bca61f841f180f2d778949cb1d9ad809e672,"k8s: Add a central ipv6dualstack flag to enable dual stack

With k8s 1.16 we only had IPv6 dual stack enabled on kubelet.
With >=1.23 IPv6DualStack is GA and we can enable it everywhere (on
request).

Hosts: auto
Bug: T307943
Change-Id: I6d132e9a8cf96185b763b0456a0a27d4bfc57a11",https://github.com/wikimedia/puppet/commit/fa38bca61f841f180f2d778949cb1d9ad809e672,modules/profile/manifests/kubernetes/node.pp,modified
543,puppet,00c46584feef607ee17b0eabac9b5e9e845808d7,"Remove last trace of cloudmetrics100[12]

Bug: T297444
Change-Id: I744d8044037c54654a036de24486f00390adcfbc",https://github.com/wikimedia/puppet/commit/00c46584feef607ee17b0eabac9b5e9e845808d7,manifests/site.pp,modified
544,puppet,0e3894224fc4d8e13b4827c03f14605afd822196,"elastic: change java GC options to default for ES7

Update Elastic jvm options to reflect new ES version (7) and new JDK version
(11).

We also no longer set DisableExplicitGC, since that hasn't been
the default for awhile, and also is not a great idea to be setting
regardless. See this for more context:

https://github.com/elastic/elasticsearch/commit/c63b7f8b0b0be9d9c7756fb8e002355736663575

Hosts: cloudelastic1003.wikimedia.org,relforge1003.eqiad.wmnet
Hosts: elastic2060.codfw.wmnet,elastic1060.eqiad.wmnet
Bug: T319020
Change-Id: I5ce09c50a2c21cdc85403c153ebb8cb563a405a4",https://github.com/wikimedia/puppet/commit/0e3894224fc4d8e13b4827c03f14605afd822196,modules/elasticsearch/manifests/init.pp,modified
545,puppet,0e3894224fc4d8e13b4827c03f14605afd822196,"elastic: change java GC options to default for ES7

Update Elastic jvm options to reflect new ES version (7) and new JDK version
(11).

We also no longer set DisableExplicitGC, since that hasn't been
the default for awhile, and also is not a great idea to be setting
regardless. See this for more context:

https://github.com/elastic/elasticsearch/commit/c63b7f8b0b0be9d9c7756fb8e002355736663575

Hosts: cloudelastic1003.wikimedia.org,relforge1003.eqiad.wmnet
Hosts: elastic2060.codfw.wmnet,elastic1060.eqiad.wmnet
Bug: T319020
Change-Id: I5ce09c50a2c21cdc85403c153ebb8cb563a405a4",https://github.com/wikimedia/puppet/commit/0e3894224fc4d8e13b4827c03f14605afd822196,modules/elasticsearch/manifests/instance.pp,modified
546,puppet,0e3894224fc4d8e13b4827c03f14605afd822196,"elastic: change java GC options to default for ES7

Update Elastic jvm options to reflect new ES version (7) and new JDK version
(11).

We also no longer set DisableExplicitGC, since that hasn't been
the default for awhile, and also is not a great idea to be setting
regardless. See this for more context:

https://github.com/elastic/elasticsearch/commit/c63b7f8b0b0be9d9c7756fb8e002355736663575

Hosts: cloudelastic1003.wikimedia.org,relforge1003.eqiad.wmnet
Hosts: elastic2060.codfw.wmnet,elastic1060.eqiad.wmnet
Bug: T319020
Change-Id: I5ce09c50a2c21cdc85403c153ebb8cb563a405a4",https://github.com/wikimedia/puppet/commit/0e3894224fc4d8e13b4827c03f14605afd822196,modules/elasticsearch/types/instanceparams.pp,modified
547,puppet,0e3894224fc4d8e13b4827c03f14605afd822196,"elastic: change java GC options to default for ES7

Update Elastic jvm options to reflect new ES version (7) and new JDK version
(11).

We also no longer set DisableExplicitGC, since that hasn't been
the default for awhile, and also is not a great idea to be setting
regardless. See this for more context:

https://github.com/elastic/elasticsearch/commit/c63b7f8b0b0be9d9c7756fb8e002355736663575

Hosts: cloudelastic1003.wikimedia.org,relforge1003.eqiad.wmnet
Hosts: elastic2060.codfw.wmnet,elastic1060.eqiad.wmnet
Bug: T319020
Change-Id: I5ce09c50a2c21cdc85403c153ebb8cb563a405a4",https://github.com/wikimedia/puppet/commit/0e3894224fc4d8e13b4827c03f14605afd822196,modules/profile/manifests/elasticsearch.pp,modified
548,puppet,c20d69e37b5555ccafa68f53afd9f6d94c8e97a6,"puppet_compiler: bump to 2.5.1

Change-Id: I4dccf40b6eaccb16397e934d4c635030e24fa8dc",https://github.com/wikimedia/puppet/commit/c20d69e37b5555ccafa68f53afd9f6d94c8e97a6,modules/puppet_compiler/manifests/init.pp,modified
549,puppet,70468fd5bd0085ec879268cf6f99def52804cb66,"puppet_compiler: bump version to 2.5.0

Change-Id: I543386a8ebd92dbacd56e658da996a9188ff3abf",https://github.com/wikimedia/puppet/commit/70468fd5bd0085ec879268cf6f99def52804cb66,modules/puppet_compiler/manifests/init.pp,modified
550,puppet,0b5d6ccd62451d68e3a8e3ca9c3170f8010d0e5c,"puppet_compiler: set group and bum version

Hosts: auto
Change-Id: I750917827bd781d12bdd2ecbee5a7dcc2ecf0f7f",https://github.com/wikimedia/puppet/commit/0b5d6ccd62451d68e3a8e3ca9c3170f8010d0e5c,modules/profile/manifests/puppet_compiler.pp,modified
551,puppet,0b5d6ccd62451d68e3a8e3ca9c3170f8010d0e5c,"puppet_compiler: set group and bum version

Hosts: auto
Change-Id: I750917827bd781d12bdd2ecbee5a7dcc2ecf0f7f",https://github.com/wikimedia/puppet/commit/0b5d6ccd62451d68e3a8e3ca9c3170f8010d0e5c,modules/puppet_compiler/manifests/init.pp,modified
552,puppet,76ddf7f8bf32e77d28f24466af07139033e0809c,"cp5032: update site.pp and related configs for cp role

Bug: T322048
Change-Id: I696ca0ebf80bb15c2fcd60e391ce12a5f01a67a1",https://github.com/wikimedia/puppet/commit/76ddf7f8bf32e77d28f24466af07139033e0809c,manifests/site.pp,modified
553,puppet,da0ed39fd001498e7b3ece6be308d4544977f030,"Enable profile::auto_restarts::service for Apache on deployment servers

Automatically restart Apache if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on deploy1002 following the latest expat security update.

Bug: T135991
Change-Id: Ie1cf99ed15a59bac846a0e660ff6729695dd500e",https://github.com/wikimedia/puppet/commit/da0ed39fd001498e7b3ece6be308d4544977f030,modules/profile/manifests/mediawiki/deployment/server.pp,modified
554,puppet,5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,"puppet_compiler: move clean up jobs and proxy site to db instance

Hosts: auto
Change-Id: I07d579062b894efbbb6bc39ba2bb42f4591b4de3",https://github.com/wikimedia/puppet/commit/5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,modules/profile/manifests/puppet_compiler.pp,modified
555,puppet,5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,"puppet_compiler: move clean up jobs and proxy site to db instance

Hosts: auto
Change-Id: I07d579062b894efbbb6bc39ba2bb42f4591b4de3",https://github.com/wikimedia/puppet/commit/5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,modules/profile/manifests/puppet_compiler/clean_reports.pp,modified
556,puppet,5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,"puppet_compiler: move clean up jobs and proxy site to db instance

Hosts: auto
Change-Id: I07d579062b894efbbb6bc39ba2bb42f4591b4de3",https://github.com/wikimedia/puppet/commit/5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,modules/profile/manifests/puppet_compiler/puppetdb.pp,modified
557,puppet,5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,"puppet_compiler: move clean up jobs and proxy site to db instance

Hosts: auto
Change-Id: I07d579062b894efbbb6bc39ba2bb42f4591b4de3",https://github.com/wikimedia/puppet/commit/5ee60f538e41e61f5f95eeb21c5bc9d4d5c355a0,modules/role/manifests/puppet_compiler.pp,modified
558,puppet,412c831a7a05509f2bdb59572f36305f53024249,"cfssl: change intermediate key path

Bug: T319163
Change-Id: I549dd4ed8f6fbcda676dec0be37eff72a63add3f",https://github.com/wikimedia/puppet/commit/412c831a7a05509f2bdb59572f36305f53024249,modules/profile/manifests/pki/multirootca.pp,modified
559,puppet,fecdb984854eded41f303e98f7c95ee947f86ca1,"thanos::rule: allow using without object store

Change-Id: Ic3d70e069a1c59545cc6331cb695163e83a180e6",https://github.com/wikimedia/puppet/commit/fecdb984854eded41f303e98f7c95ee947f86ca1,modules/profile/manifests/thanos/rule.pp,modified
560,puppet,fecdb984854eded41f303e98f7c95ee947f86ca1,"thanos::rule: allow using without object store

Change-Id: Ic3d70e069a1c59545cc6331cb695163e83a180e6",https://github.com/wikimedia/puppet/commit/fecdb984854eded41f303e98f7c95ee947f86ca1,modules/thanos/manifests/rule.pp,modified
561,puppet,0bab6dd24449c03eaa939723db24f8e3e8adf293,"Revert ""puppet_compiler: update to server every thing from puppetdb""

This reverts commit 0e08e0b6d440a067e79f3940edef4e0f9603d77a.

Reason for revert: still need the db proxy

Hosts: auto
Change-Id: I4835fd08927bdf51052db0bdc0f9d28cd99e3745",https://github.com/wikimedia/puppet/commit/0bab6dd24449c03eaa939723db24f8e3e8adf293,modules/profile/manifests/puppet_compiler.pp,modified
562,puppet,64d5347479a377502ada1a99bf68bd76613b5cb9,"lists: Enable profile::auto_restarts::service for Apache

Automatically restart Apache if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on lists1001 following the latest curl security update.

Bug: T135991
Change-Id: Idbca3eab36a3bf2b9e7269661583928d734483a2",https://github.com/wikimedia/puppet/commit/64d5347479a377502ada1a99bf68bd76613b5cb9,modules/profile/manifests/lists.pp,modified
563,puppet,310daedf6d926f0366d3d6e9e4a8c75713c8eb26,"puppet_compiler: fix typo

Change-Id: I3b38fe072b53acef58850dbededd9530cb50de75",https://github.com/wikimedia/puppet/commit/310daedf6d926f0366d3d6e9e4a8c75713c8eb26,modules/profile/manifests/puppet_compiler.pp,modified
564,puppet,0e08e0b6d440a067e79f3940edef4e0f9603d77a,"puppet_compiler: update to server every thing from puppetdb

all output is saved to an nfs share now so we no longer need the proxy
config

Hosts: auto
Change-Id: Ib2cfe036e5534208a5da4c13139ec83ed79acab2",https://github.com/wikimedia/puppet/commit/0e08e0b6d440a067e79f3940edef4e0f9603d77a,modules/profile/manifests/puppet_compiler.pp,modified
565,puppet,d0f11faabea95662c37a84dcf47a39c5494e02cc,"P:wmcs::metricsinfra: allow excluding projects from the sync

Change-Id: Ie13b5f9516e8c746ad7acbe0b2e24597c6c929ef",https://github.com/wikimedia/puppet/commit/d0f11faabea95662c37a84dcf47a39c5494e02cc,modules/profile/manifests/wmcs/metricsinfra/prometheus_manager.pp,modified
566,puppet,89f51e839ac58b787d8e093804ae1e27b98febd2,"P:wmcs::metricsinfra: fix user

Change-Id: I62a65d87851a3bdce64bcf6f7a65d75765fb403c",https://github.com/wikimedia/puppet/commit/89f51e839ac58b787d8e093804ae1e27b98febd2,modules/profile/manifests/wmcs/metricsinfra/prometheus_manager.pp,modified
567,puppet,fea7ddb19fcd7fd3ce902071cb1c2051dec492e3,"P:wmcs::metricsinfra: add timer to sync project list

Effectively this starts monitoring all the projects.

Depends-On: I6652b4efc554e6a1d3363957d2d69dab0625e2ef
Change-Id: I7f7302a0b37434a05c05f82ed32caea883189560",https://github.com/wikimedia/puppet/commit/fea7ddb19fcd7fd3ce902071cb1c2051dec492e3,modules/profile/manifests/wmcs/metricsinfra/prometheus_manager.pp,modified
568,puppet,83650e85ed2af1997b11667ad44b91f3fe9ea3b2,"P:wmcs::metricsinfra: use `pip install -e .`

Removes the need for an ugly PYTHONPATH hack and instead installs the
prometheus_manager package inside the venv.

Depends-On: I9660c00c23af213e776e3608874af74d567acd8b
Change-Id: I037d3e06a7ff4002a46c6280850c296f9b6c28e5",https://github.com/wikimedia/puppet/commit/83650e85ed2af1997b11667ad44b91f3fe9ea3b2,modules/profile/manifests/wmcs/metricsinfra/prometheus_manager.pp,modified
569,puppet,f887f98cfd377f31075fdf0ae80a8980af03f7fb,"cloudgw: ensure vlan package is installed

This package contains the ifupdown extensions to properly create vlan devices
in the vlanXYZW scheme.

Other profiles that use this scheme don't need to declare it because they
use the interface::tagged resource, which we don't use here..

Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: Idc706ba743f415da54c5489b68d49b090029de81",https://github.com/wikimedia/puppet/commit/f887f98cfd377f31075fdf0ae80a8980af03f7fb,modules/profile/manifests/openstack/base/cloudgw.pp,modified
570,puppet,598cdf12b1fdcd312b40c67fdd9e574dfb4e1b8f,"centrallog: add first prototype of webrequest-live with Benthos

The change adds an instance of Benthos for each centrallog node,
sending 1/128th of the traffic pulled from the webrequest_{text,upload}
Kafka topics to a new one called webrequest_128_live. The data
is enriched with Geo-location to mimic what the Data Engineering's
batch job do regularly after importing webrequest data.

The long term idea is to use k8s for Benthos, but as first step
for this use case the centrallog nodes seem a good fit. Due to how
the Kafka consumer groups work, we'll have two active instances
on both centrallog nodes handling half of the Kafka partitions.
If one of the nodes go down, the other one will pick up its partitions
transparently. Not a bullet-proof design but it should guarantee to us
a minimal redundancy in case of failures/maintenance/etc..

Bug: T314981
Change-Id: I90ec3862d483e7981e1f74f93f48bfdca0f8c963",https://github.com/wikimedia/puppet/commit/598cdf12b1fdcd312b40c67fdd9e574dfb4e1b8f,modules/role/manifests/syslog/centralserver.pp,modified
571,puppet,f791a47850fb4e4098474439b97a651055545151,"prometheus/trafficserver: Remove node_ats_config

Now that puppet cleaned the leftovers from
prometheus::node_ats_config we can remove it completely
from the catalog

Bug: T292815
Change-Id: I7f8b0045a9ea1c2fffaff3573282e4484154fdad",https://github.com/wikimedia/puppet/commit/f791a47850fb4e4098474439b97a651055545151,modules/profile/manifests/trafficserver/monitoring.pp,modified
572,puppet,f791a47850fb4e4098474439b97a651055545151,"prometheus/trafficserver: Remove node_ats_config

Now that puppet cleaned the leftovers from
prometheus::node_ats_config we can remove it completely
from the catalog

Bug: T292815
Change-Id: I7f8b0045a9ea1c2fffaff3573282e4484154fdad",https://github.com/wikimedia/puppet/commit/f791a47850fb4e4098474439b97a651055545151,modules/prometheus/manifests/node_ats_config.pp,removed
573,puppet,80644f98c9ed151a52d01e2d8e1deb48b414d5ef,"ceph: osd: factorize config read

So the code is a bit easier to follow and maintain.

Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: I7ccb08e477d114e931cde5588767e559fa20469b",https://github.com/wikimedia/puppet/commit/80644f98c9ed151a52d01e2d8e1deb48b414d5ef,modules/profile/manifests/ceph/osd.pp,modified
574,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/dirs.pp,modified
575,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/master.pp,modified
576,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/postgis.pp,modified
577,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/server.pp,modified
578,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/slave.pp,modified
579,puppet,51cbf39d399342a605a38951543d2f42e3c80ff4,"postgres: Remove support for Stretch

And add for Bullseye where it was still missing.

Change-Id: I59660e911df789dbd0320fb82062e958e490c16f
Hosts: C:postgresql::dirs",https://github.com/wikimedia/puppet/commit/51cbf39d399342a605a38951543d2f42e3c80ff4,modules/postgresql/manifests/user.pp,modified
580,puppet,68e12b322362082409a124e524a70ca03b566d9e,"cloudgw: introduce more robust vlan interface naming

Introduce support for vlan interface naming on the form `vlanXYZW` instead of
the old `nic.XYZW` which can be problematic if the base NIC has a long name (which is
the case for cloudgw1001/1002).

A hiera key is introduced to keep old behavior while servers are reimaged in the new
setup.

The first host to be migrated to the new setup is cloudgw2002-dev, and the rest will
follow soon.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: Ib274249b0935a7a818e28fc7096827f3de712234",https://github.com/wikimedia/puppet/commit/68e12b322362082409a124e524a70ca03b566d9e,modules/profile/manifests/openstack/base/cloudgw.pp,modified
581,puppet,68e12b322362082409a124e524a70ca03b566d9e,"cloudgw: introduce more robust vlan interface naming

Introduce support for vlan interface naming on the form `vlanXYZW` instead of
the old `nic.XYZW` which can be problematic if the base NIC has a long name (which is
the case for cloudgw1001/1002).

A hiera key is introduced to keep old behavior while servers are reimaged in the new
setup.

The first host to be migrated to the new setup is cloudgw2002-dev, and the rest will
follow soon.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: Ib274249b0935a7a818e28fc7096827f3de712234",https://github.com/wikimedia/puppet/commit/68e12b322362082409a124e524a70ca03b566d9e,modules/profile/manifests/openstack/codfw1dev/cloudgw.pp,modified
582,puppet,68e12b322362082409a124e524a70ca03b566d9e,"cloudgw: introduce more robust vlan interface naming

Introduce support for vlan interface naming on the form `vlanXYZW` instead of
the old `nic.XYZW` which can be problematic if the base NIC has a long name (which is
the case for cloudgw1001/1002).

A hiera key is introduced to keep old behavior while servers are reimaged in the new
setup.

The first host to be migrated to the new setup is cloudgw2002-dev, and the rest will
follow soon.

Bug: T319184
Signed-off-by: Arturo Borrero Gonzalez <aborrero@wikimedia.org>
Change-Id: Ib274249b0935a7a818e28fc7096827f3de712234",https://github.com/wikimedia/puppet/commit/68e12b322362082409a124e524a70ca03b566d9e,modules/profile/manifests/openstack/eqiad1/cloudgw.pp,modified
583,puppet,cd913827da972d4c4930c902daa12811c3907d42,"Remove bast5001

Bug: T323092
Change-Id: I5b457e57dc94ed1555bb6f056e59524027812166",https://github.com/wikimedia/puppet/commit/cd913827da972d4c4930c902daa12811c3907d42,manifests/site.pp,modified
584,puppet,f54ef79f863823ad30370f4892e16a677937885e,"k8s: Refactor profile::kubernetes::master::service_cluster_ip_range

Refactor profile::kubernetes::master::service_cluster_ip_range to
profile::kubernetes::service_cluster_cidr and make use of the
K8s::ClusterCIDR type as well.

We already have the CIDRs reserved in Netbox for all clusters so for
consistency they should be defined in hiera as well, although IPv6 CIDRs
are not used with v1.16.

Bug: T307943
Change-Id: I79b3233dea6ae37eb2279de4609adbe8cebb7cde
Hosts: auto",https://github.com/wikimedia/puppet/commit/f54ef79f863823ad30370f4892e16a677937885e,modules/k8s/manifests/apiserver.pp,modified
585,puppet,f54ef79f863823ad30370f4892e16a677937885e,"k8s: Refactor profile::kubernetes::master::service_cluster_ip_range

Refactor profile::kubernetes::master::service_cluster_ip_range to
profile::kubernetes::service_cluster_cidr and make use of the
K8s::ClusterCIDR type as well.

We already have the CIDRs reserved in Netbox for all clusters so for
consistency they should be defined in hiera as well, although IPv6 CIDRs
are not used with v1.16.

Bug: T307943
Change-Id: I79b3233dea6ae37eb2279de4609adbe8cebb7cde
Hosts: auto",https://github.com/wikimedia/puppet/commit/f54ef79f863823ad30370f4892e16a677937885e,modules/k8s/types/clustercidr.pp,modified
586,puppet,f54ef79f863823ad30370f4892e16a677937885e,"k8s: Refactor profile::kubernetes::master::service_cluster_ip_range

Refactor profile::kubernetes::master::service_cluster_ip_range to
profile::kubernetes::service_cluster_cidr and make use of the
K8s::ClusterCIDR type as well.

We already have the CIDRs reserved in Netbox for all clusters so for
consistency they should be defined in hiera as well, although IPv6 CIDRs
are not used with v1.16.

Bug: T307943
Change-Id: I79b3233dea6ae37eb2279de4609adbe8cebb7cde
Hosts: auto",https://github.com/wikimedia/puppet/commit/f54ef79f863823ad30370f4892e16a677937885e,modules/profile/manifests/kubernetes/master.pp,modified
587,puppet,cf19fa44c017bb11a056960cf41804fdd5fd0f4a,"k8s: make profile::kubernetes::cluster_cidr mandatory

kube-proxy is unable to distinguish between internal and external
traffic if the clusterCIRD is not provided. This is not always in issue
but it can be in some circumstances (see: T300500).

Adding all the missing cluster CIDRs and making the field mandatory.

Bug: T307943
Change-Id: I5a4260554a966524462c5dccfc3cb1dea8b23fd2
Hosts: auto",https://github.com/wikimedia/puppet/commit/cf19fa44c017bb11a056960cf41804fdd5fd0f4a,modules/k8s/manifests/proxy.pp,modified
588,puppet,cf19fa44c017bb11a056960cf41804fdd5fd0f4a,"k8s: make profile::kubernetes::cluster_cidr mandatory

kube-proxy is unable to distinguish between internal and external
traffic if the clusterCIRD is not provided. This is not always in issue
but it can be in some circumstances (see: T300500).

Adding all the missing cluster CIDRs and making the field mandatory.

Bug: T307943
Change-Id: I5a4260554a966524462c5dccfc3cb1dea8b23fd2
Hosts: auto",https://github.com/wikimedia/puppet/commit/cf19fa44c017bb11a056960cf41804fdd5fd0f4a,modules/profile/manifests/kubernetes/node.pp,modified
589,puppet,6740937eab37e74baed441e95a9c0821e145dce9,"k8s: Stop docker/runc spam from being written to syslog

docker/runc will spam syslog for every exec inside a container, see:
https://github.com/docker/for-linux/issues/679
Stop the messages from reaching syslog until there is a proper fix available.

Bug: T307943
Hosts: auto
Change-Id: Ieca31650efe0de281565313679112e20454f0743",https://github.com/wikimedia/puppet/commit/6740937eab37e74baed441e95a9c0821e145dce9,modules/profile/manifests/kubernetes/node.pp,modified
590,puppet,ce6737e0233d9f106b4f9c1611280619f0a702c1,"Remove leftover Puppet entry

This has been decommissioned.

Bug: T292075
Change-Id: I5d94dc9ec7aa7adfa0d4066d8846053c90696ac1",https://github.com/wikimedia/puppet/commit/ce6737e0233d9f106b4f9c1611280619f0a702c1,manifests/site.pp,modified
591,puppet,ca2d813516b0eed61c74adafbe83ebfde2dfab61,"Remove puppet leftovers

These were decommed back in April

Bug: T306840
Change-Id: Ibdb9a9401e969de4a5c9be5ca15c00485c5ece66",https://github.com/wikimedia/puppet/commit/ca2d813516b0eed61c74adafbe83ebfde2dfab61,manifests/site.pp,modified
592,puppet,75e8cc9b2ec0fe3fbc47ff189ccb7e7653bdf81b,"Remove leftover entry for bast4002

This got repurposed as ganeti4004 (which has been decommisioned by now)

Change-Id: Ideafcfb29aaf7bae537a93c89c22a57e6173d145",https://github.com/wikimedia/puppet/commit/75e8cc9b2ec0fe3fbc47ff189ccb7e7653bdf81b,manifests/site.pp,modified
593,puppet,1ff1f5e959ba848e7a9d08917069a2c70a244705,"add wmcs-securitygroup-backfill

Bug: T288108
Change-Id: I6b8ebe020bc607a174ce08755defbc6dc5090bd6",https://github.com/wikimedia/puppet/commit/1ff1f5e959ba848e7a9d08917069a2c70a244705,modules/openstack/manifests/util/admin_scripts.pp,modified
594,puppet,39bf940bbc9ea7a53cfc423598ca360eeb60da50,"phabricator: add parameter for mysql port, set it to 3323 if using slave

We need to be able to use a different port if we are using m3-slave
vs when we are using m3-master.

Bug: T280597
Change-Id: I1e7495d14ea04fc194ba218487ace6152cf071f0",https://github.com/wikimedia/puppet/commit/39bf940bbc9ea7a53cfc423598ca360eeb60da50,modules/profile/manifests/phabricator/main.pp,modified
595,puppet,23454c56c8adc51344b4b158f20e7a2317154b6e,"Add new node to site.pp and to netboot

Bug: T319428
Bug: T317894
Bug: T321128
Change-Id: I96e5a012857ea35b36299fa55a718c28b5c97b08",https://github.com/wikimedia/puppet/commit/23454c56c8adc51344b4b158f20e7a2317154b6e,manifests/site.pp,modified
596,puppet,8a31ae80e3df38d3a1de1b6317d3b6a36d84161b,"lvs4008: set as high-traffic1 primary LVS and remove lvs4005

Hosts: auto
Change-Id: I2b9301f33b46a62c21a61114117abf566762ccf2",https://github.com/wikimedia/puppet/commit/8a31ae80e3df38d3a1de1b6317d3b6a36d84161b,modules/profile/manifests/lvs/configuration.pp,modified
597,puppet,9943816a2ee487128f77c18cd2b104ebe1c0cd50,"varnish: Remove deprecated jemalloc options

While debugging T322903 we've realized that both
lg_dirty_mult and lg_chunk have been deprecated in jemalloc >=5.0

Change-Id: Ib55afb0acc28eab197c9470792a1a7f92f3f4cac",https://github.com/wikimedia/puppet/commit/9943816a2ee487128f77c18cd2b104ebe1c0cd50,modules/profile/manifests/cache/varnish/frontend.pp,modified
598,puppet,4ae068d83c5aebfc4a10bbcb718645c7b0c50b1e,"wikidata: fix for data structure manipulation

Change-Id: I306221d9f8e5567c46a12633e9063ca7a5276f4c",https://github.com/wikimedia/puppet/commit/4ae068d83c5aebfc4a10bbcb718645c7b0c50b1e,modules/profile/manifests/mediawiki/maintenance/wikidata.pp,modified
599,puppet,221d0f75a0f769c2d56c1ef53a0a86a49d9d68e9,"wikidata: fix puppet for finding load balancers after reverts

Change-Id: I83727c048460e85529b98f0e15f8a4d524732dd2",https://github.com/wikimedia/puppet/commit/221d0f75a0f769c2d56c1ef53a0a86a49d9d68e9,modules/profile/manifests/lvs/configuration.pp,modified
600,puppet,221d0f75a0f769c2d56c1ef53a0a86a49d9d68e9,"wikidata: fix puppet for finding load balancers after reverts

Change-Id: I83727c048460e85529b98f0e15f8a4d524732dd2",https://github.com/wikimedia/puppet/commit/221d0f75a0f769c2d56c1ef53a0a86a49d9d68e9,modules/profile/manifests/mediawiki/maintenance/wikidata.pp,modified
601,puppet,7556c6417783aee18798942fb6d3a02b2d862d6d,"cfssl: search intermediate key on filesystem

Support looking on the master's filesystem for intermediate keys, as
well as fallback to secret() when the former fails.

Bug: T319163
Change-Id: Ia6d5000073af379d199e26d8f85224cf857d1a4f",https://github.com/wikimedia/puppet/commit/7556c6417783aee18798942fb6d3a02b2d862d6d,modules/profile/manifests/pki/multirootca.pp,modified
602,puppet,e39825eaf413a9cb75a1cfb644c7ba1920c1a9f3,"pki: run initca for root_ca when needed

Bootstrap/initialize the root CA via its CSR if needed (i.e. ca-key.pem
isn't present)

Bug: T319163
Change-Id: Ib7fc9c28ed9cef3f3aaf35ef1f92760e6ea3439f",https://github.com/wikimedia/puppet/commit/e39825eaf413a9cb75a1cfb644c7ba1920c1a9f3,modules/profile/manifests/pki/root_ca.pp,modified
603,puppet,da55357a5b35f8259eac94cdee4d1367357c020c,"pki: generate CSR for root_ca

To bootstrap a CA (i.e. cfssl genkey -initca) we need the CSR, thus
generate one for the root CA as well.

Bug: T319163
Change-Id: I5ed5ff6d5668347eea5efe44114c2e63cf74795e",https://github.com/wikimedia/puppet/commit/da55357a5b35f8259eac94cdee4d1367357c020c,modules/profile/manifests/pki/root_ca.pp,modified
604,puppet,b324064d978999db07a2d046e33af529a10300e3,"cfssl: introduce cfssl::csr

A little wrapper/abstraction for an upcoming change to issue a CSR for
the pki root.

Bug: T319163
Change-Id: Ibb9035097a38806d2778059ea5d25ef564e83140",https://github.com/wikimedia/puppet/commit/b324064d978999db07a2d046e33af529a10300e3,modules/cfssl/manifests/cert.pp,modified
605,puppet,b324064d978999db07a2d046e33af529a10300e3,"cfssl: introduce cfssl::csr

A little wrapper/abstraction for an upcoming change to issue a CSR for
the pki root.

Bug: T319163
Change-Id: Ibb9035097a38806d2778059ea5d25ef564e83140",https://github.com/wikimedia/puppet/commit/b324064d978999db07a2d046e33af529a10300e3,modules/cfssl/manifests/csr.pp,added
606,puppet,dc972732c0f48db891e1c3f277ff7136bc774409,"pontoon: optionally act as PKI root

Add the ability for the Pontoon server to be a PKI root server as well.
The related 'pki.yaml' settings will enable the functionality and
provide some defaults.

Bug: T319163
Change-Id: I6dd15653f6910e4fb193149ca4993f5be40c67ea",https://github.com/wikimedia/puppet/commit/dc972732c0f48db891e1c3f277ff7136bc774409,modules/pontoon/manifests/pki_root.pp,added
607,puppet,dc972732c0f48db891e1c3f277ff7136bc774409,"pontoon: optionally act as PKI root

Add the ability for the Pontoon server to be a PKI root server as well.
The related 'pki.yaml' settings will enable the functionality and
provide some defaults.

Bug: T319163
Change-Id: I6dd15653f6910e4fb193149ca4993f5be40c67ea",https://github.com/wikimedia/puppet/commit/dc972732c0f48db891e1c3f277ff7136bc774409,modules/profile/manifests/puppetmaster/pontoon.pp,modified
608,puppet,f7289d36b445c8a6ffd860aa628d6a21ac319218,"prometheus::ats_node_config: remove prometheus-ats-config

Ia67b3d2d772d3fe73cb4b291856abdbb7f2c89b0 renamed the file
used to populate /usr/local/bin/prometheus-ats-config,
remove it from the file resource and force ensure to absent
to avoid puppet errors

Bug: T292815
Change-Id: Ibc9a6135871a9e653131e8f27589381144043c3f",https://github.com/wikimedia/puppet/commit/f7289d36b445c8a6ffd860aa628d6a21ac319218,modules/prometheus/manifests/node_ats_config.pp,modified
609,puppet,a56547e5b6c6b6674e3a8b4c71473dd175ddb4c0,"prometheus: Rename ats_ metrics to trafficserver_

The metric names weren't consistent with existing ones. All the previous
metrics are named using the prefix trafficserver so the new metrics
should follow suit.

Fixes an issue that triggered a revert after merging
I06388a6a8731a884a703f56802cbb650b1b2db2b. In that CR
prometheus::node_trafficserver_config was defined as a class
and it should be a define

Bug: T292815
Change-Id: Ia67b3d2d772d3fe73cb4b291856abdbb7f2c89b0",https://github.com/wikimedia/puppet/commit/a56547e5b6c6b6674e3a8b4c71473dd175ddb4c0,modules/profile/manifests/trafficserver/monitoring.pp,modified
610,puppet,a56547e5b6c6b6674e3a8b4c71473dd175ddb4c0,"prometheus: Rename ats_ metrics to trafficserver_

The metric names weren't consistent with existing ones. All the previous
metrics are named using the prefix trafficserver so the new metrics
should follow suit.

Fixes an issue that triggered a revert after merging
I06388a6a8731a884a703f56802cbb650b1b2db2b. In that CR
prometheus::node_trafficserver_config was defined as a class
and it should be a define

Bug: T292815
Change-Id: Ia67b3d2d772d3fe73cb4b291856abdbb7f2c89b0",https://github.com/wikimedia/puppet/commit/a56547e5b6c6b6674e3a8b4c71473dd175ddb4c0,modules/prometheus/manifests/node_trafficserver_config.pp,added
611,puppet,c0219e9ef456842183067814bcc51b7609b9507a,"Remove leftover entry for centrallog2001

Bug: T298994
Change-Id: I24983f4b6883b444e8098788efb6d84b41a8d584",https://github.com/wikimedia/puppet/commit/c0219e9ef456842183067814bcc51b7609b9507a,manifests/site.pp,modified
612,puppet,bc76a375051fa8a0426baea0656eb5d743584d05,"Remove puppet leftovers of old ELK5 hosts

Bug: T281266
Change-Id: I7b2731c900b7324e46055e7478cd0e3cfb9a3835",https://github.com/wikimedia/puppet/commit/bc76a375051fa8a0426baea0656eb5d743584d05,manifests/site.pp,modified
613,puppet,4d29c707f653a5e4e15e01708c522aac3061b906,"dispatch: sync user role and info from LDAP

Inspired by the equivalent script for Grafana: periodically sync user
role based on LDAP group ownership and real names based on 'cn'
attribute. Unlike Grafana, users are automatically created on first
login (hence we don't have to create users).

Bug: T313229
Change-Id: I70c8a6c88aaaaf9b5b166c14db4115ed9abf8f74",https://github.com/wikimedia/puppet/commit/4d29c707f653a5e4e15e01708c522aac3061b906,modules/dispatch/manifests/ldap_sync.pp,added
614,puppet,4d29c707f653a5e4e15e01708c522aac3061b906,"dispatch: sync user role and info from LDAP

Inspired by the equivalent script for Grafana: periodically sync user
role based on LDAP group ownership and real names based on 'cn'
attribute. Unlike Grafana, users are automatically created on first
login (hence we don't have to create users).

Bug: T313229
Change-Id: I70c8a6c88aaaaf9b5b166c14db4115ed9abf8f74",https://github.com/wikimedia/puppet/commit/4d29c707f653a5e4e15e01708c522aac3061b906,modules/dispatch/manifests/web.pp,modified
615,puppet,517f2118876186a87b8cc1c77e1a77d236eb7648,"acme-chief: Switch to systemd::sysuser

And drop a require on the the User resource, with Puppet 5 all resources
within a class are processed in sequential order, so this is no longer
needed.

Hosts: C:acme_chief::server
Change-Id: I60bb7b7059b53b6bc66619b3b7841163a8c51b12",https://github.com/wikimedia/puppet/commit/517f2118876186a87b8cc1c77e1a77d236eb7648,modules/acme_chief/manifests/server.pp,modified
616,puppet,de7fd6aa998fbc4ca8adca8b0d0d82177d004184,"Fix up comments

Bug: T273673
Change-Id: I119269330ffb2c9d81e17b4e0e74408eec2ce303",https://github.com/wikimedia/puppet/commit/de7fd6aa998fbc4ca8adca8b0d0d82177d004184,modules/logster/manifests/init.pp,modified
617,puppet,de7fd6aa998fbc4ca8adca8b0d0d82177d004184,"Fix up comments

Bug: T273673
Change-Id: I119269330ffb2c9d81e17b4e0e74408eec2ce303",https://github.com/wikimedia/puppet/commit/de7fd6aa998fbc4ca8adca8b0d0d82177d004184,modules/logster/manifests/job.pp,modified
618,puppet,de7fd6aa998fbc4ca8adca8b0d0d82177d004184,"Fix up comments

Bug: T273673
Change-Id: I119269330ffb2c9d81e17b4e0e74408eec2ce303",https://github.com/wikimedia/puppet/commit/de7fd6aa998fbc4ca8adca8b0d0d82177d004184,modules/profile/manifests/librenms.pp,modified
619,puppet,ab72b2b5dbb778b8b6f4f3a714ba3a47ec2462cd,"P:idm add missing directories for static and media content.

Change-Id: I669760f904d916d9606fa820869c97f41e86901a",https://github.com/wikimedia/puppet/commit/ab72b2b5dbb778b8b6f4f3a714ba3a47ec2462cd,modules/profile/manifests/idm.pp,modified
620,puppet,432f18659188086d8ea8d4045adabd49506a9144,"C:spamassassin disable email notification on failure.

Spamassassin will periodically fail to update definitions.
We have collected the relevant error information, and the
emailing can be disabled.

Change-Id: I85416da56c33c7b4d754772fe5eec180f9696b83",https://github.com/wikimedia/puppet/commit/432f18659188086d8ea8d4045adabd49506a9144,modules/spamassassin/manifests/init.pp,modified
621,puppet,b5a6440e1c40e4a5fded938a71201fba6765e726,"Enable profile::auto_restarts::service for jwt-authorizer on docker registry

Automatically restart docker-registry-ha-jwt if underlying runtime library dependencies
have been upgraded (e.g. libc). The restart is splayed across each day (on Mo-Fr).

Tested on registry2003 following the latest glibc security update.

Bug: T135991
Change-Id: Ifa6284042a8de3c8d3845e5e570c09ee5971c398",https://github.com/wikimedia/puppet/commit/b5a6440e1c40e4a5fded938a71201fba6765e726,modules/docker_registry_ha/manifests/web.pp,modified
622,puppet,9e647bfcd85a7d208a2c1f39320d3c09e216b727,"P:idm fix service fqdn variable naming.

Change-Id: I1abcb80150fdc4103707a58e50d0d78dad6f3cca",https://github.com/wikimedia/puppet/commit/9e647bfcd85a7d208a2c1f39320d3c09e216b727,modules/profile/manifests/idm.pp,modified
623,puppet,1c2ac2dd6d60d5e0310e7691939ba715def2cd1e,"C:idm::deployment logrotation for Django logs.

Bug: T320431
Change-Id: Ifcad5a36b52d4495c4afe3fa799cc8e5cc1d2c3b",https://github.com/wikimedia/puppet/commit/1c2ac2dd6d60d5e0310e7691939ba715def2cd1e,modules/idm/manifests/deployment.pp,modified
624,puppet,c69b9aab17bd90e502b50423550a5180db9a9a72,"Add a basic puppetization for Benthos

Basic Benthos puppetization. The idea is to avoid over-complicated
Benthos configs for multiple streams, and create separate
instances for each stream to work on. This is not a complete
and bullet proof configuration for Benthos, but we'd like to:
1) Start using Benthos on real use cases to get more info about
   how it works and performs.
2) Understand what is the best way to run it (if we'll choose
   it as preferred stream processor for simple use cases).

Bug: T314981
Change-Id: I881326be20c50dc59fdd7c3c46e9f6c6e7968ca6",https://github.com/wikimedia/puppet/commit/c69b9aab17bd90e502b50423550a5180db9a9a72,modules/benthos/manifests/init.pp,added
625,puppet,c69b9aab17bd90e502b50423550a5180db9a9a72,"Add a basic puppetization for Benthos

Basic Benthos puppetization. The idea is to avoid over-complicated
Benthos configs for multiple streams, and create separate
instances for each stream to work on. This is not a complete
and bullet proof configuration for Benthos, but we'd like to:
1) Start using Benthos on real use cases to get more info about
   how it works and performs.
2) Understand what is the best way to run it (if we'll choose
   it as preferred stream processor for simple use cases).

Bug: T314981
Change-Id: I881326be20c50dc59fdd7c3c46e9f6c6e7968ca6",https://github.com/wikimedia/puppet/commit/c69b9aab17bd90e502b50423550a5180db9a9a72,modules/benthos/manifests/instance.pp,added
626,puppet,c69b9aab17bd90e502b50423550a5180db9a9a72,"Add a basic puppetization for Benthos

Basic Benthos puppetization. The idea is to avoid over-complicated
Benthos configs for multiple streams, and create separate
instances for each stream to work on. This is not a complete
and bullet proof configuration for Benthos, but we'd like to:
1) Start using Benthos on real use cases to get more info about
   how it works and performs.
2) Understand what is the best way to run it (if we'll choose
   it as preferred stream processor for simple use cases).

Bug: T314981
Change-Id: I881326be20c50dc59fdd7c3c46e9f6c6e7968ca6",https://github.com/wikimedia/puppet/commit/c69b9aab17bd90e502b50423550a5180db9a9a72,modules/profile/manifests/benthos.pp,added
627,puppet,11d45550cefe124ef913f602afc5936dad67915a,"phabricator/aphlict: pass through ensure parameter

follow-up to I602b6a1ea9a06c and I42fafc2ce21ac

Pass through the $ensure parameter so that auto_restarts
can be applied only on hosts that actually have aphlict.

The special case is that 2 different roles use the same
profile.

role(aphlict) is a standlone aphlict server and role(phabricator)
CAN include aphlict but we don't enable it anymore.

Right now this is about fixing Icinga false alerts on phab hosts
because code assumes there should be aphlict there but it's not.

CRITICAL - degraded: The following units failed: wmf_auto_restart_aphlict.service

Bug: T135991
Change-Id: Ibca844f6f45ad9ede851e3e01909ae6e1a727629",https://github.com/wikimedia/puppet/commit/11d45550cefe124ef913f602afc5936dad67915a,modules/profile/manifests/phabricator/aphlict.pp,modified
628,puppet,b22062638e0640bfb59bf4c5c6679daf20288049,"site: update role for cp4052

Change-Id: I29b46f3b6a2a2bf49d98a9194c1b54eed38e89ec",https://github.com/wikimedia/puppet/commit/b22062638e0640bfb59bf4c5c6679daf20288049,manifests/site.pp,modified
629,puppet,1c65956c4502766ef2595dcb2967114f0885f04b,"site.pp: Fix db1206's owner

db1206 will belong to Data Persistence

Change-Id: I163563a4e7245263ec0522047374645a03271f52",https://github.com/wikimedia/puppet/commit/1c65956c4502766ef2595dcb2967114f0885f04b,manifests/site.pp,modified
630,puppet,6d9216c5e04abd4d541331903726f51bac12f527,"haproxy: concurrency tracking as discussed

Bug: T306580
Change-Id: I72192f5c7958c94aed8ef02935060300a82616bd",https://github.com/wikimedia/puppet/commit/6d9216c5e04abd4d541331903726f51bac12f527,modules/haproxy/types/action.pp,modified
631,puppet,59f9066288c0f919a4b718bc2f93dc5d4cb0194c,"No-op change. Replace the idea of stickycounters with actions

'actions' are more flexible and freeform.  They can go before or
after ACLs are defined, fixing another limitation of stickycounters
as it was first defined.

Remove stickycounters.

Bug: T306580
Change-Id: I217586316ebcaa8831aa8f45daee25410077021c",https://github.com/wikimedia/puppet/commit/59f9066288c0f919a4b718bc2f93dc5d4cb0194c,modules/haproxy/manifests/tls_terminator.pp,modified
632,puppet,59f9066288c0f919a4b718bc2f93dc5d4cb0194c,"No-op change. Replace the idea of stickycounters with actions

'actions' are more flexible and freeform.  They can go before or
after ACLs are defined, fixing another limitation of stickycounters
as it was first defined.

Remove stickycounters.

Bug: T306580
Change-Id: I217586316ebcaa8831aa8f45daee25410077021c",https://github.com/wikimedia/puppet/commit/59f9066288c0f919a4b718bc2f93dc5d4cb0194c,modules/haproxy/types/action.pp,added
633,puppet,59f9066288c0f919a4b718bc2f93dc5d4cb0194c,"No-op change. Replace the idea of stickycounters with actions

'actions' are more flexible and freeform.  They can go before or
after ACLs are defined, fixing another limitation of stickycounters
as it was first defined.

Remove stickycounters.

Bug: T306580
Change-Id: I217586316ebcaa8831aa8f45daee25410077021c",https://github.com/wikimedia/puppet/commit/59f9066288c0f919a4b718bc2f93dc5d4cb0194c,modules/haproxy/types/stickycounter.pp,removed
634,puppet,59f9066288c0f919a4b718bc2f93dc5d4cb0194c,"No-op change. Replace the idea of stickycounters with actions

'actions' are more flexible and freeform.  They can go before or
after ACLs are defined, fixing another limitation of stickycounters
as it was first defined.

Remove stickycounters.

Bug: T306580
Change-Id: I217586316ebcaa8831aa8f45daee25410077021c",https://github.com/wikimedia/puppet/commit/59f9066288c0f919a4b718bc2f93dc5d4cb0194c,modules/profile/manifests/cache/haproxy.pp,modified
635,puppet,cd6d4fd9e9a80ff2c06700095b8d47c3424c059f,"P::lvs::configuration: update lvs4008 config for recent reverts

Hosts: lvs4008.ulsfo.wmnet
Change-Id: Id12646878e3e2c7ab3415f102521b30080b81022",https://github.com/wikimedia/puppet/commit/cd6d4fd9e9a80ff2c06700095b8d47c3424c059f,modules/profile/manifests/lvs/configuration.pp,modified
636,puppet,0ad867a5789d766f30b704bab8af4ef36c7c030b,"Revert ""P:lvs::configueration: move classification to hiera and add error checks""

This reverts commit 920672f979083e2e99f1a1426d30af8e2db96541.

Bug: T264132
Change-Id: Ifc571730fae5ef7476583dac36566b5090eee2d6",https://github.com/wikimedia/puppet/commit/0ad867a5789d766f30b704bab8af4ef36c7c030b,modules/profile/manifests/lvs/configuration.pp,modified
637,puppet,0ad867a5789d766f30b704bab8af4ef36c7c030b,"Revert ""P:lvs::configueration: move classification to hiera and add error checks""

This reverts commit 920672f979083e2e99f1a1426d30af8e2db96541.

Bug: T264132
Change-Id: Ifc571730fae5ef7476583dac36566b5090eee2d6",https://github.com/wikimedia/puppet/commit/0ad867a5789d766f30b704bab8af4ef36c7c030b,modules/profile/types/lvs/class_hosts.pp,removed
638,puppet,0ad867a5789d766f30b704bab8af4ef36c7c030b,"Revert ""P:lvs::configueration: move classification to hiera and add error checks""

This reverts commit 920672f979083e2e99f1a1426d30af8e2db96541.

Bug: T264132
Change-Id: Ifc571730fae5ef7476583dac36566b5090eee2d6",https://github.com/wikimedia/puppet/commit/0ad867a5789d766f30b704bab8af4ef36c7c030b,modules/profile/types/lvs/classes.pp,removed
639,puppet,78144a7053d2ac5b5b792e93bd0804cfe776bc9a,"Revert ""P:lvs::configuration: Dont alert for missing lvs definitions""

This reverts commit 671a4b34809185e290c918b958fa9c9ffef2d9e1.

Bug: T264132
Change-Id: I01591f4e237d98cc0802907ef7715021515e93b5",https://github.com/wikimedia/puppet/commit/78144a7053d2ac5b5b792e93bd0804cfe776bc9a,modules/profile/manifests/lvs/configuration.pp,modified
640,puppet,f3f77e4360edf473f45695dd5cead913de290576,"Revert ""profile::lvs::configuration: Fix typo""

This reverts commit 97513f3313f3c5c31e3e1511341f1736ac8bbf7c.

Bug: T264132
Change-Id: I2ff792002f7bdccf4ffcea859caf9e955181900b",https://github.com/wikimedia/puppet/commit/f3f77e4360edf473f45695dd5cead913de290576,modules/profile/manifests/lvs/configuration.pp,modified
641,puppet,b296b17c3537a2568c4341200c1e0990c2a4390a,"Revert ""P:lvs::configuration: Store all site data in an accessible structure""

This reverts commit 361e7361d1aa5ff118397972a8179fd78c00856c.

Bug: T264132
Change-Id: Ifb1d3e06d1c3a844c0c9a74472ff61d8ebb1323a",https://github.com/wikimedia/puppet/commit/b296b17c3537a2568c4341200c1e0990c2a4390a,modules/profile/manifests/lvs/configuration.pp,modified
642,puppet,3ba6245e572d925ca9d4af54208e7d60c50ff84c,"Revert ""P:cumin::master: Add aliases for lvs traffic classes""

This reverts commit 43c0d145609f0be94179399c6f8708bf3ddb1d25.

Bug: T264132
Change-Id: Ib4d8bfd57622b953e935a5a8b0d550874410db6f",https://github.com/wikimedia/puppet/commit/3ba6245e572d925ca9d4af54208e7d60c50ff84c,modules/profile/manifests/lvs/configuration.pp,modified
643,puppet,f33a2449cbbffc5985ab34228a6e6ecbdf16ccd8,"site: remove phab2001

This node has been decom'ed.

Bug: T322250
Change-Id: I47705635b8536ebd202ac5dbb0b346cc86cd2b71",https://github.com/wikimedia/puppet/commit/f33a2449cbbffc5985ab34228a6e6ecbdf16ccd8,manifests/site.pp,modified
644,puppet,7d5ea065eef7a48cb6e9f2c9a7bd7804ba85d92f,"phabricator::aphlict: Pass the ensure to the auto restart

Not all Phabricator hosts have aphlict running.

Change-Id: I42fafc2ce21ac1e4383021b23488c61593d77611",https://github.com/wikimedia/puppet/commit/7d5ea065eef7a48cb6e9f2c9a7bd7804ba85d92f,modules/phabricator/manifests/aphlict.pp,modified
645,puppet,7efa13fa2890f1265a71620a6ad14384045880a7,"P:pybal: add lvs4008 to bpg-peer-address

Hosts: lvs4008.ulsfo.wmnet
Change-Id: I4e111dbc95e37f4dbb6d32247b556a45eb27329f",https://github.com/wikimedia/puppet/commit/7efa13fa2890f1265a71620a6ad14384045880a7,modules/profile/manifests/pybal.pp,modified
646,puppet,1128eb062fbf3648dd13985bdfcfaeae8f0bf8fa,"GrowthExperiments: Use job queue for refreshUserImpact script

Depends-On: I1a5c333fc42e7dd274378b0254ebeace7b87aa73
Bug: T322706
Bug: T322541
Hosts: mwmaint1002.eqiad.wmnet
Change-Id: I5f8ad643cacb353799cc6d3a146be866b52c9723",https://github.com/wikimedia/puppet/commit/1128eb062fbf3648dd13985bdfcfaeae8f0bf8fa,modules/profile/manifests/mediawiki/maintenance/growthexperiments.pp,modified
647,puppet,ef070873a74def6cef895fe655bfa4a24408c7ff,"Add GrowthExperiments periodic maintenance scripts for user impact

Runs the following scripts daily:
* refreshUserImpactData.php --registeredWithin 2week
  --ignoreIfUpdatedWithin 6hour
* refreshUserImpactData.php --registeredWithin 1year
  --editedWithin 2week --ignoreIfUpdatedWithin 6hour
* deleteExpiredUserImpactData.php --expiry 2days

See T322706 and I5f8ad643cacb353799cc6d3a146be866b52c9723 which proposes
to use the job queue.

Bug: T322541
Hosts: mwmaint1002.eqiad.wmnet
Change-Id: Id09567de7477b0095645397ab03d21fcf9b59310",https://github.com/wikimedia/puppet/commit/ef070873a74def6cef895fe655bfa4a24408c7ff,modules/profile/manifests/mediawiki/maintenance/growthexperiments.pp,modified
648,puppet,e54e5af1d8fb31a8d40729656fc23dabe5e3504f,"Remove cache::(text|upload)_envoy remnants

Change-Id: I02cbf279c655a8f86175e670572943cba2b7e077",https://github.com/wikimedia/puppet/commit/e54e5af1d8fb31a8d40729656fc23dabe5e3504f,modules/profile/manifests/prometheus/ops.pp,modified
649,puppet,e54e5af1d8fb31a8d40729656fc23dabe5e3504f,"Remove cache::(text|upload)_envoy remnants

Change-Id: I02cbf279c655a8f86175e670572943cba2b7e077",https://github.com/wikimedia/puppet/commit/e54e5af1d8fb31a8d40729656fc23dabe5e3504f,modules/role/manifests/cache/text_envoy.pp,removed
650,puppet,e54e5af1d8fb31a8d40729656fc23dabe5e3504f,"Remove cache::(text|upload)_envoy remnants

Change-Id: I02cbf279c655a8f86175e670572943cba2b7e077",https://github.com/wikimedia/puppet/commit/e54e5af1d8fb31a8d40729656fc23dabe5e3504f,modules/role/manifests/cache/upload_envoy.pp,removed
651,puppet,a04ebde4ba93fafa156183081ce371fe532be842,"Clean up trafficserver::tls and related

Change-Id: Ibf46ab346dfd15a74e2844ab91b18c77ee971d41",https://github.com/wikimedia/puppet/commit/a04ebde4ba93fafa156183081ce371fe532be842,modules/profile/manifests/prometheus/ops.pp,modified
652,puppet,a04ebde4ba93fafa156183081ce371fe532be842,"Clean up trafficserver::tls and related

Change-Id: Ibf46ab346dfd15a74e2844ab91b18c77ee971d41",https://github.com/wikimedia/puppet/commit/a04ebde4ba93fafa156183081ce371fe532be842,modules/profile/manifests/trafficserver/tls.pp,removed
653,puppet,a04ebde4ba93fafa156183081ce371fe532be842,"Clean up trafficserver::tls and related

Change-Id: Ibf46ab346dfd15a74e2844ab91b18c77ee971d41",https://github.com/wikimedia/puppet/commit/a04ebde4ba93fafa156183081ce371fe532be842,modules/profile/manifests/trafficserver/tls_material.pp,removed
654,puppet,0e946d51cb79ce85ddd46a22afe57be81042ce39,"lvs4008: commission new LVS host (ulsfo hardware refresh)

Bug: T317247
Change-Id: I2106e07e7f034784d5a16c770aaaed958004746f",https://github.com/wikimedia/puppet/commit/0e946d51cb79ce85ddd46a22afe57be81042ce39,manifests/site.pp,modified
655,puppet,643926a1958d39d58db71f951f5b33023e7086bd,"k8s: Use systemd cgroup (v2) driver with 1.23

Turn on unified cgroup hirarcy (cgroupv2, Debian default) on Kubernetes
nodes and configure kubelet to use systemd as cgroup driver. Docker will
follow automatically as it selects systemd on nodes with cgroupv2
support by default.

Bug: T313473
Hosts: auto
Change-Id: I29fc6e10c5ef4ee5e45dd02720f514f5419976ee",https://github.com/wikimedia/puppet/commit/643926a1958d39d58db71f951f5b33023e7086bd,modules/k8s/manifests/kubelet.pp,modified
656,puppet,643926a1958d39d58db71f951f5b33023e7086bd,"k8s: Use systemd cgroup (v2) driver with 1.23

Turn on unified cgroup hirarcy (cgroupv2, Debian default) on Kubernetes
nodes and configure kubelet to use systemd as cgroup driver. Docker will
follow automatically as it selects systemd on nodes with cgroupv2
support by default.

Bug: T313473
Hosts: auto
Change-Id: I29fc6e10c5ef4ee5e45dd02720f514f5419976ee",https://github.com/wikimedia/puppet/commit/643926a1958d39d58db71f951f5b33023e7086bd,modules/profile/manifests/kubernetes/node.pp,modified
657,puppet,6b92e753e24f608e2fe91bd71e959dfb0816619a,"calico: Allow different versions, drop pre bullseye support

Calico 3.17 on bullseye is the only combination we currently have, so we
make that the default and allow switching to 3.23.

Bug: T307943
Hosts: auto
Change-Id: I4c9fc95aa482ce39c98f70d19844ef842a18e273",https://github.com/wikimedia/puppet/commit/6b92e753e24f608e2fe91bd71e959dfb0816619a,modules/calico/manifests/init.pp,modified
658,puppet,6b92e753e24f608e2fe91bd71e959dfb0816619a,"calico: Allow different versions, drop pre bullseye support

Calico 3.17 on bullseye is the only combination we currently have, so we
make that the default and allow switching to 3.23.

Bug: T307943
Hosts: auto
Change-Id: I4c9fc95aa482ce39c98f70d19844ef842a18e273",https://github.com/wikimedia/puppet/commit/6b92e753e24f608e2fe91bd71e959dfb0816619a,modules/calico/types/calicoversion.pp,added
659,puppet,6b92e753e24f608e2fe91bd71e959dfb0816619a,"calico: Allow different versions, drop pre bullseye support

Calico 3.17 on bullseye is the only combination we currently have, so we
make that the default and allow switching to 3.23.

Bug: T307943
Hosts: auto
Change-Id: I4c9fc95aa482ce39c98f70d19844ef842a18e273",https://github.com/wikimedia/puppet/commit/6b92e753e24f608e2fe91bd71e959dfb0816619a,modules/profile/manifests/calico/kubernetes.pp,modified
660,puppet,7f055a95b8e68eba448a8bde0add0f3749bcd88a,"varnish::common: set Python version for bullseye

Currently the Python version for buster is hardcoded and set to 3.7. In
preparation for the bullseye upgrade, add Python 3.9 as well.

Additionally, remove absented resources that are no longer required.

Bug: T321309
Hosts: cp4051.ulsfo.wmnet, cp2038.codfw.wmnet
Change-Id: I6177e0ae85e2f3d5a32d87ae2ad17625c90e76ad",https://github.com/wikimedia/puppet/commit/7f055a95b8e68eba448a8bde0add0f3749bcd88a,modules/varnish/manifests/common.pp,modified
661,puppet,94143fa2ace72dfa1831d312ad741c038f7a317a,"profile::java: Add support for bookworm

Bug: T321783
Change-Id: Id45ab82c9d131bda55785a3630e92c75de8f5afd",https://github.com/wikimedia/puppet/commit/94143fa2ace72dfa1831d312ad741c038f7a317a,modules/profile/manifests/java.pp,modified
662,puppet,66907aa2ca6844aee08815c4b5815b35a0291686,"elastic: finish decom of elastic2049

Remove elastic2049 from site.pp as prescribed at
https://wikitech.wikimedia.org/wiki/Server_Lifecycle#Reclaim_to_Spares_OR_Decommission

Bug: T313842
Change-Id: I47cf87a52510462211dceb67cbc43dc1cbec246e",https://github.com/wikimedia/puppet/commit/66907aa2ca6844aee08815c4b5815b35a0291686,manifests/site.pp,modified
663,puppet,527bb1d22fa34cef903fe4afad7626247a804032,"R:rsync::manifests::server::module: add type validation

Hosts: cumin:R:rsync::manifests::server::module
Change-Id: I2ec8b52548b8f070874f2563364889cd75be57ee",https://github.com/wikimedia/puppet/commit/527bb1d22fa34cef903fe4afad7626247a804032,modules/rsync/manifests/server/module.pp,modified
664,puppet,97d65ae64aa6019332825da2387ea196c99f8203,"site: move contint2002 from insetup::unowned to insetup::serviceops

I noticed contint2002 on https://puppetboard.wikimedia.org when
looking for something different.

Puppet failed there because it:

Could not find class ::role::insetup::unowned

The ""unowned"" class comes from Ie258de985c39a1.

Since 43b0c2d6467 the ci/master role is serviceops-collab
so make it match that and unbreak the puppet run.

Bug: T294276
Change-Id: Ib4fbb05dd98a5243bcd3f2e4d480d331604e7d65",https://github.com/wikimedia/puppet/commit/97d65ae64aa6019332825da2387ea196c99f8203,manifests/site.pp,modified
665,puppet,f92a48b332390c9851feded0b22d2cb311a738cf,"site.pp update for ganeti103[34]

adding two new ganeti hosts to site.pp

Bug: T314303
Change-Id: I64c9337ce7af0ae4846b25c54e2dc14bb4d97745",https://github.com/wikimedia/puppet/commit/f92a48b332390c9851feded0b22d2cb311a738cf,manifests/site.pp,modified
666,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/barbican/service/victoria.pp,removed
667,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/cinder/config/victoria.pp,removed
668,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/cinder/service/victoria.pp,removed
669,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/victoria/bullseye.pp,removed
670,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/victoria/buster.pp,removed
671,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/victoria/stretch.pp,removed
672,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/vms/victoria/bullseye.pp,removed
673,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/vms/victoria/buster.pp,removed
674,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/clientpackages/vms/victoria/stretch.pp,removed
675,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/designate/service/victoria.pp,removed
676,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/glance/service/victoria.pp,removed
677,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/keystone/service/victoria.pp,removed
678,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/keystone/service/victoria/bullseye.pp,removed
679,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/keystone/service/victoria/buster.pp,removed
680,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/common/victoria.pp,removed
681,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/common/victoria/bullseye.pp,removed
682,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/common/victoria/buster.pp,removed
683,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/dhcp_agent/victoria.pp,removed
684,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/dhcp_agent/victoria/bullseye.pp,removed
685,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/dhcp_agent/victoria/buster.pp,removed
686,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/l3_agent/victoria.pp,removed
687,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/l3_agent/victoria/bullseye.pp,removed
688,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/l3_agent/victoria/buster.pp,removed
689,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/linuxbridge_agent/victoria.pp,removed
690,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/linuxbridge_agent/victoria/bullseye.pp,removed
691,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/linuxbridge_agent/victoria/buster.pp,removed
692,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/metadata_agent/victoria.pp,removed
693,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/metadata_agent/victoria/bullseye.pp,removed
694,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/metadata_agent/victoria/buster.pp,removed
695,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/neutron/service/victoria.pp,removed
696,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/api/service/victoria.pp,removed
697,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/common/victoria/bullseye.pp,removed
698,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/common/victoria/buster.pp,removed
699,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/compute/service/victoria/bullseye.pp,removed
700,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/compute/service/victoria/buster.pp,removed
701,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/conductor/service/victoria.pp,removed
702,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/nova/scheduler/service/victoria.pp,removed
703,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/placement/service/victoria.pp,removed
704,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/serverpackages/victoria/bullseye.pp,removed
705,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/serverpackages/victoria/buster.pp,removed
706,puppet,56c93e88fb048ad1d461ca027a8d961858952c6f,"Remove obsolete files for OpenStack version Victoria

Change-Id: I6c63a76602e0dc480c255a1d67686b669d0dc038",https://github.com/wikimedia/puppet/commit/56c93e88fb048ad1d461ca027a8d961858952c6f,modules/openstack/manifests/trove/service/victoria.pp,removed
707,puppet,0b0e0b9fc5dab554879d57b1bb4c4b36e5c718ef,"Enable profile::auto_restarts::service for aphlict

Automatically restart aphlict if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on aphlict1001 following the latest nodejs security update.

Bug: T135991
Change-Id: I602b6a1ea9a06cd88cb18e6ace41798bcca4c0ce",https://github.com/wikimedia/puppet/commit/0b0e0b9fc5dab554879d57b1bb4c4b36e5c718ef,modules/phabricator/manifests/aphlict.pp,modified
708,puppet,9deed448dbbaa03072d16f47be141888d630c9f6,"Revert ""prometheus: Rename ats_ metrics to trafficserver_""

This reverts commit 2269e1a07999ba28aa413e162467a6f36489e7fb.

Reason for revert: Error 500 on SERVER: Server Error: Evaluation Error:
Error while evaluating a Resource Statement, Evaluation Error: Error
while evaluating a Resource Statement, Unknown resource type:
'prometheus::node_trafficserver_config'

Change-Id: I46e9887714279736567a166f958c4d4ff0475118",https://github.com/wikimedia/puppet/commit/9deed448dbbaa03072d16f47be141888d630c9f6,modules/profile/manifests/trafficserver/monitoring.pp,modified
709,puppet,9deed448dbbaa03072d16f47be141888d630c9f6,"Revert ""prometheus: Rename ats_ metrics to trafficserver_""

This reverts commit 2269e1a07999ba28aa413e162467a6f36489e7fb.

Reason for revert: Error 500 on SERVER: Server Error: Evaluation Error:
Error while evaluating a Resource Statement, Evaluation Error: Error
while evaluating a Resource Statement, Unknown resource type:
'prometheus::node_trafficserver_config'

Change-Id: I46e9887714279736567a166f958c4d4ff0475118",https://github.com/wikimedia/puppet/commit/9deed448dbbaa03072d16f47be141888d630c9f6,modules/prometheus/manifests/node_trafficserver_config.pp,removed
710,puppet,2269e1a07999ba28aa413e162467a6f36489e7fb,"prometheus: Rename ats_ metrics to trafficserver_

The metric names weren't consistent with existing ones. All the previous
metrics are named using the prefix trafficserver so the new metrics
should follow suit.

Bug: T292815
Change-Id: I06388a6a8731a884a703f56802cbb650b1b2db2b",https://github.com/wikimedia/puppet/commit/2269e1a07999ba28aa413e162467a6f36489e7fb,modules/profile/manifests/trafficserver/monitoring.pp,modified
711,puppet,2269e1a07999ba28aa413e162467a6f36489e7fb,"prometheus: Rename ats_ metrics to trafficserver_

The metric names weren't consistent with existing ones. All the previous
metrics are named using the prefix trafficserver so the new metrics
should follow suit.

Bug: T292815
Change-Id: I06388a6a8731a884a703f56802cbb650b1b2db2b",https://github.com/wikimedia/puppet/commit/2269e1a07999ba28aa413e162467a6f36489e7fb,modules/prometheus/manifests/node_trafficserver_config.pp,added
712,puppet,5673274f072f59b8ea58ac3bb441bff8ec726c93,"puppet_compiler: allow for storing pson files with gzip

This config allows us to store pson files as gzips and have the browser
decompress them.

Change-Id: I4ce88a02234c0e05c175fe43e1dfb80ea9b4e9ff",https://github.com/wikimedia/puppet/commit/5673274f072f59b8ea58ac3bb441bff8ec726c93,modules/profile/manifests/puppet_compiler.pp,modified
713,puppet,5054f13fa15228d1508b89e1bb8e83236e6dbe96,"puppet_compiler: bump to 4.2.2

Change-Id: I528972616cc17e766f6b05bcdc369f7d49a22703",https://github.com/wikimedia/puppet/commit/5054f13fa15228d1508b89e1bb8e83236e6dbe96,modules/puppet_compiler/manifests/init.pp,modified
714,puppet,e1f9fd3bfa4bb16ad59b09ef06feed72eae93ebe,"Bootstrap new AQS Cassandra nodes (eqiad)

Hosts: aqs1010.eqiad.wmnet
Hosts: aqs2001.codfw.wmnet
Bug: T307802
Change-Id: I7532fdab95479e2315d87d0cf0c18a61b4823de9",https://github.com/wikimedia/puppet/commit/e1f9fd3bfa4bb16ad59b09ef06feed72eae93ebe,manifests/site.pp,modified
715,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/access_new_install.pp,modified
716,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/auto_restarts.pp,modified
717,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/auto_restarts/service.pp,modified
718,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/failoid.pp,modified
719,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/fastnetmon.pp,modified
720,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/flowspec.pp,modified
721,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/homer.pp,modified
722,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/ipmi/mgmt.pp,modified
723,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/locales/all.pp,modified
724,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/locales/extended.pp,modified
725,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/logoutd.pp,modified
726,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/logoutd/script.pp,modified
727,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/netbox.pp,modified
728,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/netbox/automation.pp,modified
729,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/netbox/db.pp,modified
730,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/netbox/host.pp,modified
731,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/netbox/scripts.pp,modified
732,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/package_builder.pp,modified
733,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/puppet_compiler.pp,modified
734,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/puppet_compiler/clean_reports.pp,modified
735,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/puppet_compiler/puppetdb.pp,modified
736,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/puppetboard.pp,modified
737,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/pwstore.pp,modified
738,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/python37.pp,modified
739,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/rancid.pp,modified
740,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/samplicator.pp,modified
741,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/spicerack.pp,modified
742,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/spicerack/reposync.pp,modified
743,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/sretest.pp,modified
744,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/manifests/systemtap/devserver.pp,modified
745,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/types/netbox/ganeti_sync_profile.pp,modified
746,puppet,227923cf9565395e2e7683df59c86635e921559b,"Add SPDX headers to various IF profiles

Bug: T308013
Change-Id: I69cf2b7d3689d4f8ecd168b9b3612f2f34775337",https://github.com/wikimedia/puppet/commit/227923cf9565395e2e7683df59c86635e921559b,modules/profile/types/netbox/report_check.pp,modified
747,puppet,9964df11d43cbb72c1b63b1aa3ae573314fec93c,"netmon: Add regex to match all the netmon instances.

This regex configures the netmon role in all of the netmon
instances.

Bug: T315523
Change-Id: I4d1e56b42486bbaafc96248fd0d4871555e64d2d",https://github.com/wikimedia/puppet/commit/9964df11d43cbb72c1b63b1aa3ae573314fec93c,manifests/site.pp,modified
748,puppet,cb816cd0af843d610ced1d1acd0b3df72d9f1234,"calico: Align formatting with k8s module and profiles

Bug: T307943
Change-Id: I453c7eb52e2bcbfc24629efd6934465c21b4a6b0",https://github.com/wikimedia/puppet/commit/cb816cd0af843d610ced1d1acd0b3df72d9f1234,modules/calico/manifests/init.pp,modified
749,puppet,cb816cd0af843d610ced1d1acd0b3df72d9f1234,"calico: Align formatting with k8s module and profiles

Bug: T307943
Change-Id: I453c7eb52e2bcbfc24629efd6934465c21b4a6b0",https://github.com/wikimedia/puppet/commit/cb816cd0af843d610ced1d1acd0b3df72d9f1234,modules/profile/manifests/calico/kubernetes.pp,modified
750,puppet,b9249bfb6d806938a74ff48417b15fd3ea3072f6,"toil::ganeti_ifupdown: fix systemctl path

Bug: T273026
Change-Id: I8ee7ff2def8057f53589d8d17c0197f1c1437498",https://github.com/wikimedia/puppet/commit/b9249bfb6d806938a74ff48417b15fd3ea3072f6,modules/toil/manifests/ganeti_ifupdown.pp,modified
751,puppet,4254d1a099c6b14ae49efbb02b2fd91067af39c3,"Enable profile::auto_restarts::service for prometheus-ganeti-exporter

Automatically restart the exporter if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on ganeti2023 following the latest glibc security update.

Bug: T135991
Change-Id: If63cd3a9ae5cec021da630e3ac00aac4e954ad76",https://github.com/wikimedia/puppet/commit/4254d1a099c6b14ae49efbb02b2fd91067af39c3,modules/ganeti/manifests/prometheus.pp,modified
752,puppet,7a8823d5dc482643a121b6747dc6c952f85fd8cf,"grafana: Add SPDX headers

Bug: T308013
Change-Id: I1dea28f15f0496744c5d8a93332254da2737bd44",https://github.com/wikimedia/puppet/commit/7a8823d5dc482643a121b6747dc6c952f85fd8cf,modules/profile/manifests/grafana/grizzly.pp,modified
753,puppet,7a8823d5dc482643a121b6747dc6c952f85fd8cf,"grafana: Add SPDX headers

Bug: T308013
Change-Id: I1dea28f15f0496744c5d8a93332254da2737bd44",https://github.com/wikimedia/puppet/commit/7a8823d5dc482643a121b6747dc6c952f85fd8cf,modules/profile/manifests/grafana/production.pp,modified
754,puppet,875afa0bde181847a66987c85495d67c6f514489,"Enable profile::auto_restarts::service for haveged

Automatically restart nginx if underlying runtime library dependencies
have been upgraded (e.g. openssl). The restart is splayed across
each day (on Mo-Fr).

Tested on registry2003 following the latest glibc security update.

Bug: T135991
Change-Id: Ic52fe5cca4efd6d5afd2b596fe91583551b98625",https://github.com/wikimedia/puppet/commit/875afa0bde181847a66987c85495d67c6f514489,modules/haveged/manifests/init.pp,modified
755,puppet,24774e3e64a6d09f2669fb72bad7719b025d7df5,"toil: add bandaid for ifupdown race

Can be removed once we move away from ifupdown.

Bug: T273026
Change-Id: I6cface829523297e2aa31c95d4f1b78ee4331064",https://github.com/wikimedia/puppet/commit/24774e3e64a6d09f2669fb72bad7719b025d7df5,modules/profile/manifests/base/production.pp,modified
756,puppet,24774e3e64a6d09f2669fb72bad7719b025d7df5,"toil: add bandaid for ifupdown race

Can be removed once we move away from ifupdown.

Bug: T273026
Change-Id: I6cface829523297e2aa31c95d4f1b78ee4331064",https://github.com/wikimedia/puppet/commit/24774e3e64a6d09f2669fb72bad7719b025d7df5,modules/toil/manifests/ganeti_ifupdown.pp,added
757,puppet,b9eb1c0d367d2f1f8034713dde4ad67f846f0f0a,"swift: Ensure that bzip2 is installed

while bumping the swift cluster running on
deployment-prep every instance failed to deploy
the ring tarball till I manually installed bzip2:

Nov  7 16:14:32 deployment-ms-fe04 puppet-agent[14316]: Execution of
'/usr/local/bin/swift_check_ring_tarball.sh
/var/spool/swift_ring/rings.tar.bz220221107-14316-obhrob' returned 2:
tar (child): lbzip2: Cannot exec: No such file or directory
Nov  7 16:14:32 deployment-ms-fe04 puppet-agent[14316]:
(/Stage[main]/Swift::Ring/File[/var/spool/swift_ring/rings.tar.bz2]/ensure)
change from 'absent' to 'file' failed: Execution of
'/usr/local/bin/swift_check_ring_tarball.sh
/var/spool/swift_ring/rings.tar.bz220221107-14316-obhrob' returned 2:
tar (child): lbzip2: Cannot exec: No such file or directory

Change-Id: I18162b0769e7b2227a163817e6a0db40cdad94bf",https://github.com/wikimedia/puppet/commit/b9eb1c0d367d2f1f8034713dde4ad67f846f0f0a,modules/swift/manifests/ring.pp,modified
758,puppet,a486d4f7f5b680b820715760b04002c14a752afa,"P:kubernetes::deployment_server: fix absenting

Remove the helmfile if there's no data

Bug: T322298
Hosts: P:kubernetes::deployment_server::helmfile
Change-Id: I608874ffd033eae46a954a7eedd6a7268dd775af",https://github.com/wikimedia/puppet/commit/a486d4f7f5b680b820715760b04002c14a752afa,modules/profile/manifests/kubernetes/deployment_server/helmfile.pp,modified
759,puppet,aee2efa80ffa3c5bb117876085b11ef6b39aa9f6,"postgresql: move CLI to pg- namespace and dashes

Move the pg-specific commands to pg- namespace, also use dashes as
common convention for CLI binaries.  Keep compat symlink resync_replica
around for a while as a convenience for muscle memory.

Change-Id: I0bc01b5be719054a2b8f3c396f1b5234c3f0ee5c",https://github.com/wikimedia/puppet/commit/aee2efa80ffa3c5bb117876085b11ef6b39aa9f6,modules/postgresql/manifests/backup.pp,modified
760,puppet,aee2efa80ffa3c5bb117876085b11ef6b39aa9f6,"postgresql: move CLI to pg- namespace and dashes

Move the pg-specific commands to pg- namespace, also use dashes as
common convention for CLI binaries.  Keep compat symlink resync_replica
around for a while as a convenience for muscle memory.

Change-Id: I0bc01b5be719054a2b8f3c396f1b5234c3f0ee5c",https://github.com/wikimedia/puppet/commit/aee2efa80ffa3c5bb117876085b11ef6b39aa9f6,modules/postgresql/manifests/slave.pp,modified
761,puppet,caf47d4edebdfecff540be14f27ae7b15172efa9,"Retire generic insetup role

Also update Cumin aliases and sync up Hiera settings to disable notifications.

Change-Id: I5b4fb2b679a1a05de61cc1311fb9b469eef13ace",https://github.com/wikimedia/puppet/commit/caf47d4edebdfecff540be14f27ae7b15172efa9,modules/role/manifests/insetup.pp,removed
762,puppet,86755b13d25d692e3a9e060d35330c6bff050a81,"apereo_cas: Install libmemcached-tools

Ran into the following traceback on idp1002, I guess on Buster the packaged
was pulled in via transitive dependencies:

File ""/usr/lib/python3.9/subprocess.py"", line 1823, in _execute_child
  raise child_exception_type(errno_num, err_msg, err_filename)
  FileNotFoundError: [Errno 2] No such file or directory: '/usr/bin/memcdump'

Change-Id: I45f8cf2487ea18c469ae32b05d67292255fb400a",https://github.com/wikimedia/puppet/commit/86755b13d25d692e3a9e060d35330c6bff050a81,modules/apereo_cas/manifests/init.pp,modified
763,puppet,9f8466bd66f7b9bcbbed44486760751b767b674e,"puppetdb::database: Add support for bookworm

Bug: T321783
Change-Id: I72c0665c3f2d8c2b4662801fe890322b3b20f004",https://github.com/wikimedia/puppet/commit/9f8466bd66f7b9bcbbed44486760751b767b674e,modules/profile/manifests/puppetdb/database.pp,modified
764,puppet,335a9ea99ba9fb4b7d37b40c30f3f9a5c3d4db66,"k8s: Use the K8s::Core::V1Taint type

Make use of the type K8s::Core::V1Taint which will be required from
kubernetes 1.23 onwards.

Hosts: auto
Bug: T307943
Change-Id: I99209516c363c0de2d73d58565befc2bec107997",https://github.com/wikimedia/puppet/commit/335a9ea99ba9fb4b7d37b40c30f3f9a5c3d4db66,modules/k8s/manifests/kubelet.pp,modified
765,puppet,335a9ea99ba9fb4b7d37b40c30f3f9a5c3d4db66,"k8s: Use the K8s::Core::V1Taint type

Make use of the type K8s::Core::V1Taint which will be required from
kubernetes 1.23 onwards.

Hosts: auto
Bug: T307943
Change-Id: I99209516c363c0de2d73d58565befc2bec107997",https://github.com/wikimedia/puppet/commit/335a9ea99ba9fb4b7d37b40c30f3f9a5c3d4db66,modules/profile/manifests/kubernetes/node.pp,modified
766,puppet,757e635f41a034a78da48d585d3be59bd0e228e2,"k8s: Add version switching where needed

Use the appropriate apiVersion for config files and if guard all
deprecated config/command line flags.

Hosts: auto
Bug: T307943
Change-Id: I474d4c1f659ebb14172c6cacd6b6409ee6cfa166",https://github.com/wikimedia/puppet/commit/757e635f41a034a78da48d585d3be59bd0e228e2,modules/k8s/manifests/apiserver.pp,modified
767,puppet,757e635f41a034a78da48d585d3be59bd0e228e2,"k8s: Add version switching where needed

Use the appropriate apiVersion for config files and if guard all
deprecated config/command line flags.

Hosts: auto
Bug: T307943
Change-Id: I474d4c1f659ebb14172c6cacd6b6409ee6cfa166",https://github.com/wikimedia/puppet/commit/757e635f41a034a78da48d585d3be59bd0e228e2,modules/k8s/manifests/base_dirs.pp,modified
768,puppet,757e635f41a034a78da48d585d3be59bd0e228e2,"k8s: Add version switching where needed

Use the appropriate apiVersion for config files and if guard all
deprecated config/command line flags.

Hosts: auto
Bug: T307943
Change-Id: I474d4c1f659ebb14172c6cacd6b6409ee6cfa166",https://github.com/wikimedia/puppet/commit/757e635f41a034a78da48d585d3be59bd0e228e2,modules/k8s/manifests/kubelet.pp,modified
769,puppet,757e635f41a034a78da48d585d3be59bd0e228e2,"k8s: Add version switching where needed

Use the appropriate apiVersion for config files and if guard all
deprecated config/command line flags.

Hosts: auto
Bug: T307943
Change-Id: I474d4c1f659ebb14172c6cacd6b6409ee6cfa166",https://github.com/wikimedia/puppet/commit/757e635f41a034a78da48d585d3be59bd0e228e2,modules/k8s/manifests/scheduler.pp,modified
770,puppet,bc50cc8b811df100b0203ef14c19f4b73f329edb,"Add --service-account* flags for TokenRequest

TokenRequest and TokenRequestProjection are now GA features.
The following flags are required by the API server:
 --service-account-issuer, should be set to a URL identifying the API
   server that will be stable over the cluster lifetime.
 --service-account-key-file, set to one or more files containing one or
   more public keys used to verify tokens.
 --service-account-signing-key-file, set to a file containing a private
   key to use to sign service account tokens. Can be the same file given
   to kube-controller-manager with --service-account-private-key-file.

Bug: T307943
Change-Id: I166b594aa14b274e181bcf4f9d87c45362649d19",https://github.com/wikimedia/puppet/commit/bc50cc8b811df100b0203ef14c19f4b73f329edb,modules/k8s/manifests/apiserver.pp,modified
771,puppet,bc50cc8b811df100b0203ef14c19f4b73f329edb,"Add --service-account* flags for TokenRequest

TokenRequest and TokenRequestProjection are now GA features.
The following flags are required by the API server:
 --service-account-issuer, should be set to a URL identifying the API
   server that will be stable over the cluster lifetime.
 --service-account-key-file, set to one or more files containing one or
   more public keys used to verify tokens.
 --service-account-signing-key-file, set to a file containing a private
   key to use to sign service account tokens. Can be the same file given
   to kube-controller-manager with --service-account-private-key-file.

Bug: T307943
Change-Id: I166b594aa14b274e181bcf4f9d87c45362649d19",https://github.com/wikimedia/puppet/commit/bc50cc8b811df100b0203ef14c19f4b73f329edb,modules/k8s/manifests/controller.pp,modified
772,puppet,bc50cc8b811df100b0203ef14c19f4b73f329edb,"Add --service-account* flags for TokenRequest

TokenRequest and TokenRequestProjection are now GA features.
The following flags are required by the API server:
 --service-account-issuer, should be set to a URL identifying the API
   server that will be stable over the cluster lifetime.
 --service-account-key-file, set to one or more files containing one or
   more public keys used to verify tokens.
 --service-account-signing-key-file, set to a file containing a private
   key to use to sign service account tokens. Can be the same file given
   to kube-controller-manager with --service-account-private-key-file.

Bug: T307943
Change-Id: I166b594aa14b274e181bcf4f9d87c45362649d19",https://github.com/wikimedia/puppet/commit/bc50cc8b811df100b0203ef14c19f4b73f329edb,modules/profile/manifests/kubernetes/master.pp,modified
773,puppet,545196729ea29fd109a92913fe6d353526359e91,"access_new_install: use install-console and compat symlink

CLI commands have historically and overwhelmingly used dashes, not
underscores.

The script in question used to be deployed with a dash and was converted
to underscore, bring the original name back.

Change-Id: I6990e115e117e8bc1ee0188fb96d45b7fe89441a",https://github.com/wikimedia/puppet/commit/545196729ea29fd109a92913fe6d353526359e91,modules/profile/manifests/access_new_install.pp,modified
774,puppet,6ed9cdb21facedd14cea71205511d567428c36d4,"site/phabricator: move phab2001 from prod to insetup role

Preparing this host for decom by moving it from production
role back to insetup role.

Then will run the decom cookbook on it later.

Bug: T322250
Change-Id: I204fc72c8e472d5f02202416898d61c7e7788575",https://github.com/wikimedia/puppet/commit/6ed9cdb21facedd14cea71205511d567428c36d4,manifests/site.pp,modified
775,puppet,adef89f48939c83a69b05271951eeda2aea895f3,"site: add dispatch-be2001

Bug: T322556
Change-Id: I6d355f81d4b122b7280787f7a2f90f888ff99b36",https://github.com/wikimedia/puppet/commit/adef89f48939c83a69b05271951eeda2aea895f3,manifests/site.pp,modified
776,puppet,6df0fae188a8785343c90e697d90140a56d24c8b,"P:kubernetes::deployment_server: absent services

Add the ability to set a service absent in profile::kubernetes::deployment_server::service

Bug: T322298
Hosts: P:kubernetes::deployment_server::helmfile
Change-Id: I47659c4673f0922bf385d27b402ff5d54b4cf3b5",https://github.com/wikimedia/puppet/commit/6df0fae188a8785343c90e697d90140a56d24c8b,modules/profile/manifests/kubernetes/deployment_server.pp,modified
777,puppet,6df0fae188a8785343c90e697d90140a56d24c8b,"P:kubernetes::deployment_server: absent services

Add the ability to set a service absent in profile::kubernetes::deployment_server::service

Bug: T322298
Hosts: P:kubernetes::deployment_server::helmfile
Change-Id: I47659c4673f0922bf385d27b402ff5d54b4cf3b5",https://github.com/wikimedia/puppet/commit/6df0fae188a8785343c90e697d90140a56d24c8b,modules/profile/manifests/kubernetes/deployment_server/helmfile.pp,modified
778,puppet,6df0fae188a8785343c90e697d90140a56d24c8b,"P:kubernetes::deployment_server: absent services

Add the ability to set a service absent in profile::kubernetes::deployment_server::service

Bug: T322298
Hosts: P:kubernetes::deployment_server::helmfile
Change-Id: I47659c4673f0922bf385d27b402ff5d54b4cf3b5",https://github.com/wikimedia/puppet/commit/6df0fae188a8785343c90e697d90140a56d24c8b,modules/profile/types/kubernetes/services.pp,modified
779,puppet,ce1796acc035446e069d3bbcea30b9c1c2a92c91,"prometheus: probe SSH on mgmt network

The probes will be initiated by Prometheus hosts on the same site (i.e.
not crossing the WAN)

Probe interval is set to four minutes (Icinga is five now ATM). The
upper bound here is five minutes, longer than that it'd trigger
Prometheus to consider the metrics stale:
https://www.robustperception.io/staleness-and-promql

Bug: T310266
Change-Id: Ia3f5def55e6dfa05673e3888d462b018bac19206",https://github.com/wikimedia/puppet/commit/ce1796acc035446e069d3bbcea30b9c1c2a92c91,modules/profile/manifests/prometheus/ops.pp,modified
780,puppet,ce1796acc035446e069d3bbcea30b9c1c2a92c91,"prometheus: probe SSH on mgmt network

The probes will be initiated by Prometheus hosts on the same site (i.e.
not crossing the WAN)

Probe interval is set to four minutes (Icinga is five now ATM). The
upper bound here is five minutes, longer than that it'd trigger
Prometheus to consider the metrics stale:
https://www.robustperception.io/staleness-and-promql

Bug: T310266
Change-Id: Ia3f5def55e6dfa05673e3888d462b018bac19206",https://github.com/wikimedia/puppet/commit/ce1796acc035446e069d3bbcea30b9c1c2a92c91,modules/prometheus/manifests/targets/mgmt.pp,added
781,puppet,1fe8249c42e2bb225d39f3894dd0882ffca0fda3,"prometheus: Alter node_ats_config class to include

Defining as a class will make puppet fail if several instances of
profile::trafficserver::monitoring are defined on the same server.

Bug: T292815
Change-Id: I8a5c9a32a6a3d12c604717557e1bd3d48d8570ba",https://github.com/wikimedia/puppet/commit/1fe8249c42e2bb225d39f3894dd0882ffca0fda3,modules/profile/manifests/trafficserver/monitoring.pp,modified
782,puppet,1fe8249c42e2bb225d39f3894dd0882ffca0fda3,"prometheus: Alter node_ats_config class to include

Defining as a class will make puppet fail if several instances of
profile::trafficserver::monitoring are defined on the same server.

Bug: T292815
Change-Id: I8a5c9a32a6a3d12c604717557e1bd3d48d8570ba",https://github.com/wikimedia/puppet/commit/1fe8249c42e2bb225d39f3894dd0882ffca0fda3,modules/prometheus/manifests/node_ats_config.pp,modified
783,puppet,504df83bf60a6b2e22396a102a0fccad07d355ee,"Remove obsolete spicerack hook

For Stretch/Buster we needed some backports in component/spicerack, but
since bullseye we build against unmodified packages from bullseye and
cumin* hosts are on Bullseye, so remove the hook.

Change-Id: Ic34eeba99da4964b49d937acb487d23b8383a979",https://github.com/wikimedia/puppet/commit/504df83bf60a6b2e22396a102a0fccad07d355ee,modules/package_builder/manifests/pbuilder_hook.pp,modified
784,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/aptly/manifests/client.pp,modified
785,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/kubeadm/manifests/helm.pp,modified
786,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/labs_bootstrapvz/manifests/init.pp,modified
787,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/ldap/manifests/config/labs.pp,modified
788,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/analytics/jupyterhub.pp,modified
789,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/analytics/refinery.pp,modified
790,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/hadoop/backup/namenode.pp,modified
791,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/hadoop/yarn_proxy.pp,modified
792,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/kafka/broker.pp,modified
793,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/openstack/eqiad1/cumin/master.pp,modified
794,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/bastion.pp,modified
795,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/bastion/resourcecontrol.pp,modified
796,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/checker.pp,modified
797,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/grid/base.pp,modified
798,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/grid/cronrunner.pp,modified
799,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/grid/node/compute.pp,modified
800,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/infrastructure.pp,modified
801,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/jobs_framework_cli.pp,modified
802,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/prometheus.pp,modified
803,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/proxy.pp,modified
804,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/toolforge/toolviews.pp,modified
805,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/wmcs/instance.pp,modified
806,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/wmcs/nfs/standalone.pp,modified
807,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/wmcs/nfsclient.pp,modified
808,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/profile/manifests/wmcs/paws/prometheus.pp,modified
809,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/role/manifests/aptly/client.pp,modified
810,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/role/manifests/aptly/server.pp,modified
811,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/sonofgridengine/manifests/exec_host.pp,modified
812,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/sonofgridengine/manifests/init.pp,modified
813,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/sonofgridengine/manifests/join.pp,modified
814,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/sonofgridengine/manifests/submit_host.pp,modified
815,puppet,e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,"global: replace labsproject by wmcs_project

This changes all instances of labsproject usage.
Should be seamless.

Change-Id: I52bde77bb7686bff458fad6b11d9dda0098e78a4",https://github.com/wikimedia/puppet/commit/e46e55aaede4cdf5f48dcaf30fe3f5c7887d1917,modules/toolforge/manifests/bastion_proc_management.pp,modified
816,puppet,097570e931e6ef18a85b5de52bcb0dd3d49afaea,"Remove hook for icu63

This was only needed for the ICU63 transition, we are using mediawiki on
buster currently, so this is obsolete and can be removed.

Change-Id: Iaf9acc5993f88bfd3319ac20b6b517847e01e46a",https://github.com/wikimedia/puppet/commit/097570e931e6ef18a85b5de52bcb0dd3d49afaea,modules/package_builder/manifests/pbuilder_hook.pp,modified
817,puppet,c8e8169b1ac8f4f0f68729b2faa56f3cb902432f,"Remove obsolete vp9 hook

We used this to build VP9-enabled packages for the video scalers on stretch,
but the video scalers are on Buster for quite a while now.

Change-Id: Ibf9a9304e8f3d93f2fd26017f07b0c4bad1bf527",https://github.com/wikimedia/puppet/commit/c8e8169b1ac8f4f0f68729b2faa56f3cb902432f,modules/package_builder/manifests/pbuilder_hook.pp,modified
818,puppet,927e9462ab725752cc414ddc14754bd2736978c6,"growthexperiments.pp: Run updateMetrics.php daily

The Growth team needs to monitor a couple of metrics
that are hard to calculate in an event-driven way
(because they depend on number of new users registered,
or because there are many events that can change
the metric value).

For those metrics, we decided to calculate them daily
via a maintenance script, stored in
extensions/GrowthExperiments/maintenance/updateMetrics.php.
The script makes necessary queries and sends the calculated
value to the statsd server.

The --verbose flag is there to log the calculated values
via syslog as well (this can be used to verify the Grafana
dashboard provides the expected numbers).

Bug: T318684
Depends-On: Ie6c43d1877c5e06750487e982d00f091f00f4592
Hosts: mwmaint1002.eqiad.wmnet
Change-Id: I242715d8faaabc4fde94ded899d7a2659d4f7a54",https://github.com/wikimedia/puppet/commit/927e9462ab725752cc414ddc14754bd2736978c6,modules/profile/manifests/mediawiki/maintenance/growthexperiments.pp,modified
819,puppet,84c650f4e23c0a632d584a4ae8a6c722ce4f867f,"paws: Add SPDX headers

Bug: T308013
Change-Id: If544e7b8fb7fea11a2dc0f2ac1d33255e7ea7456",https://github.com/wikimedia/puppet/commit/84c650f4e23c0a632d584a4ae8a6c722ce4f867f,modules/profile/manifests/wmcs/paws/common.pp,modified
820,puppet,84c650f4e23c0a632d584a4ae8a6c722ce4f867f,"paws: Add SPDX headers

Bug: T308013
Change-Id: If544e7b8fb7fea11a2dc0f2ac1d33255e7ea7456",https://github.com/wikimedia/puppet/commit/84c650f4e23c0a632d584a4ae8a6c722ce4f867f,modules/profile/manifests/wmcs/paws/k8s/control.pp,modified
821,puppet,84c650f4e23c0a632d584a4ae8a6c722ce4f867f,"paws: Add SPDX headers

Bug: T308013
Change-Id: If544e7b8fb7fea11a2dc0f2ac1d33255e7ea7456",https://github.com/wikimedia/puppet/commit/84c650f4e23c0a632d584a4ae8a6c722ce4f867f,modules/profile/manifests/wmcs/paws/k8s/haproxy.pp,modified
822,puppet,84c650f4e23c0a632d584a4ae8a6c722ce4f867f,"paws: Add SPDX headers

Bug: T308013
Change-Id: If544e7b8fb7fea11a2dc0f2ac1d33255e7ea7456",https://github.com/wikimedia/puppet/commit/84c650f4e23c0a632d584a4ae8a6c722ce4f867f,modules/profile/manifests/wmcs/paws/prometheus.pp,modified
823,puppet,84c650f4e23c0a632d584a4ae8a6c722ce4f867f,"paws: Add SPDX headers

Bug: T308013
Change-Id: If544e7b8fb7fea11a2dc0f2ac1d33255e7ea7456",https://github.com/wikimedia/puppet/commit/84c650f4e23c0a632d584a4ae8a6c722ce4f867f,modules/profile/manifests/wmcs/paws/trove/backup.pp,modified
824,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/backup.pp,modified
825,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/castor/server.pp,modified
826,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/data_rsync.pp,modified
827,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/docker.pp,modified
828,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/dockervolume.pp,modified
829,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/firewall.pp,modified
830,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/gitcache.pp,modified
831,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/httpd.pp,modified
832,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/jenkins.pp,modified
833,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/package_builder.pp,modified
834,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/pipeline/publisher.pp,modified
835,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/proxy_jenkins.pp,modified
836,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/proxy_zuul.pp,modified
837,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/qemu.pp,modified
838,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/shipyard.pp,modified
839,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/slave.pp,modified
840,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/slave/labs/common.pp,modified
841,puppet,5047472f21581b788d9924e546fca997c57b3bef,"ci: Add SPDX headers

Bug: T308013
Change-Id: I7ac980d43a0bb4028b0e28d0b4c2ec3b5afd594e",https://github.com/wikimedia/puppet/commit/5047472f21581b788d9924e546fca997c57b3bef,modules/profile/manifests/ci/website.pp,modified
842,puppet,ef3a07ded546323a621afad82757ecee1a5a8cd7,"Cinder: cinder-api-uwsgi.ini is a file, not a template

Bug: T305828
Change-Id: I3657d9ab3cf523a1e405ad93f63f749b74c820a2",https://github.com/wikimedia/puppet/commit/ef3a07ded546323a621afad82757ecee1a5a8cd7,modules/openstack/manifests/cinder/service/yoga.pp,modified
843,puppet,17aad96c482706b4f51598f25f4782eb6e753e63,"Cinder: add cinder-api-uwsgi.ini from X-version cinder package

For some reason this file isn't included in the Yoga-version package
and we need it!

Bug: T305828
Change-Id: Icfcb8711a5c044f492d9cc500323152f43edc8b7",https://github.com/wikimedia/puppet/commit/17aad96c482706b4f51598f25f4782eb6e753e63,modules/openstack/manifests/cinder/service/yoga.pp,modified
844,puppet,5e25af8980824f08ff4572043d89b7126c04a278,"add cinder_seed.sh.erb

This serves as quasi-documentation of the proper cinder endpoint name,
which is wrong in the upstream docs (at least for Y and later)

Change-Id: Ic2eecd5787ecf40d5305c8a4796b1bf4bdb64cb4",https://github.com/wikimedia/puppet/commit/5e25af8980824f08ff4572043d89b7126c04a278,modules/openstack/manifests/cinder/bootstrap.pp,added
845,puppet,6b09056573290fe9529f5e7ecfbd640743288c8d,"ml-staging: fix wrong role assignment of staging workers

Change-Id: I57def9ce23dbffb2d98ba6b2e8a4236f089669e7",https://github.com/wikimedia/puppet/commit/6b09056573290fe9529f5e7ecfbd640743288c8d,manifests/site.pp,modified
846,puppet,30bc273bfc6b3ebf5a2af2bc51d39e0408c0d6fe,"swift: add moss-fe[12]001 to swift frontends

Bug: T322424
Change-Id: I7b2b23a644639912dd8ad1972134b7623a442770",https://github.com/wikimedia/puppet/commit/30bc273bfc6b3ebf5a2af2bc51d39e0408c0d6fe,manifests/site.pp,modified
847,puppet,0c5966377c6914bb59ba8b21f9e18b03621950be,"C:idm::deployment add required packages for testing.

Lock the django package to the Debian backsports to
get the latest LTS release.

Bug: T320428
Change-Id: Ia4fad60aa8cb1ee34bd890c2be9dda8b982e2bd2",https://github.com/wikimedia/puppet/commit/0c5966377c6914bb59ba8b21f9e18b03621950be,modules/idm/manifests/deployment.pp,modified
848,puppet,5facef4f4b4aacfd711ea04545f9ff4b52fca268,"pontoon: Make poonton lb a central DNS server for the stack

This makes dnsmasq listen on the primary IP of the pontoon lb as well,
so it can be used as a central DNS server within the pontoon stack.

Change-Id: I00fcbf16d6df2d497572abac6cd6967142e76b60",https://github.com/wikimedia/puppet/commit/5facef4f4b4aacfd711ea04545f9ff4b52fca268,modules/pontoon/manifests/lb.pp,modified
849,puppet,7528f20bdf0b4347e98a86797f6ac6b98c68fe8b,"bacula: Add missing fileset definition dispatch-postgres

Dispatch DB (postgres) referenced a fileset called:
""dispatch-postgres"". This fileset was not defined. Declare it
on the filesets file so backups can actually start for
dispatch-be1001.

Bug: T313229
Change-Id: I6b4ed8f4ebc7d445d25d53ff0b49d8a8fb0f22cf",https://github.com/wikimedia/puppet/commit/7528f20bdf0b4347e98a86797f6ac6b98c68fe8b,modules/profile/manifests/backup/filesets.pp,modified
850,puppet,3a99eb0af7880464eac1f0784f14035c52830141,"P:spicerack: remove whitespace in package name

Change-Id: If768c90d3cc333c9b31ff0be886b7bc94ce1b3ca",https://github.com/wikimedia/puppet/commit/3a99eb0af7880464eac1f0784f14035c52830141,modules/profile/manifests/spicerack.pp,modified
851,puppet,e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,"Rename ml_k8s staging roles to match naming scheme

Change-Id: Ib70e04fdc274a1427548f0a7a18d0e04f358edaa",https://github.com/wikimedia/puppet/commit/e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,manifests/site.pp,modified
852,puppet,e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,"Rename ml_k8s staging roles to match naming scheme

Change-Id: Ib70e04fdc274a1427548f0a7a18d0e04f358edaa",https://github.com/wikimedia/puppet/commit/e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,modules/role/manifests/ml_k8s/staging/master.pp,renamed
853,puppet,e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,"Rename ml_k8s staging roles to match naming scheme

Change-Id: Ib70e04fdc274a1427548f0a7a18d0e04f358edaa",https://github.com/wikimedia/puppet/commit/e7253a67f374bc2aec69c0a7ef7c1a5cd4ae7916,modules/role/manifests/ml_k8s/staging/worker.pp,renamed
854,puppet,4c1d77cacb6a17d647cc0709a97dd0cb93fbaf44,"gitlab_runner: enable restrict_firewall for Shared Runners

This change enables restrict_firewall for Shared Runners in WMCS.
Similar to the firewall for Trusted Runners, only access to the
internal wmf network is blocked and needs to be explitly added to
profile::gitlab::runner::allowed_services.
Traffic to public destinations (internet) is not affected by this
change.
It was discussed that traffic from gitlab-runner CI jobs should
not be able to contact other WMCS services by default.

This change also adds NAT rules for the default docker network
172.17.0.0/16. That is needed to ensure containers on Shared
Runners can access external resources.

Bug: T317341
Change-Id: I1f1a112b37d308ffa10ab8a95205815250c9b7ec",https://github.com/wikimedia/puppet/commit/4c1d77cacb6a17d647cc0709a97dd0cb93fbaf44,modules/gitlab_runner/manifests/firewall.pp,modified
855,puppet,4c1d77cacb6a17d647cc0709a97dd0cb93fbaf44,"gitlab_runner: enable restrict_firewall for Shared Runners

This change enables restrict_firewall for Shared Runners in WMCS.
Similar to the firewall for Trusted Runners, only access to the
internal wmf network is blocked and needs to be explitly added to
profile::gitlab::runner::allowed_services.
Traffic to public destinations (internet) is not affected by this
change.
It was discussed that traffic from gitlab-runner CI jobs should
not be able to contact other WMCS services by default.

This change also adds NAT rules for the default docker network
172.17.0.0/16. That is needed to ensure containers on Shared
Runners can access external resources.

Bug: T317341
Change-Id: I1f1a112b37d308ffa10ab8a95205815250c9b7ec",https://github.com/wikimedia/puppet/commit/4c1d77cacb6a17d647cc0709a97dd0cb93fbaf44,modules/profile/manifests/gitlab/runner.pp,modified
856,puppet,d65aec49aac9754abbe9c704a3617969e27837e4,"Move kube-scheduler config to file

Drop --leader-elect=true default.

Bug: T300499
Change-Id: I23b841da3d67aea28e2c6b78c6370edd2320b524",https://github.com/wikimedia/puppet/commit/d65aec49aac9754abbe9c704a3617969e27837e4,modules/k8s/manifests/scheduler.pp,modified
857,puppet,3f5d1df6fa95bb24872131b1c5359757c1b76f26,"k8s::package: only install the apt source once

Hosts: auto
Bug: T270271
Change-Id: I65f10cb6df1b9038272f26fe925f9539adaf039a",https://github.com/wikimedia/puppet/commit/3f5d1df6fa95bb24872131b1c5359757c1b76f26,modules/k8s/manifests/package.pp,modified
858,puppet,3be0877ebae4160049207a2e6645529ec550bee2,"kibana: remove resource needed only for kibana 5

Hosts: relforge1003.eqiad.wmnet
Bug: T322358
Bug: T192279
Change-Id: Ifbb3807ba1e8718e58b4f77ba7d0c4ef92ea574f",https://github.com/wikimedia/puppet/commit/3be0877ebae4160049207a2e6645529ec550bee2,modules/kibana/manifests/init.pp,modified
859,puppet,fdb42be9b3fb9a0d36c47f8cf5ce0256b9adc4e0,"dumps: datasets/fetcher, add data types to parameters

Change-Id: I8ffa49952659540ed8eca30f95211dd3e97f4516",https://github.com/wikimedia/puppet/commit/fdb42be9b3fb9a0d36c47f8cf5ce0256b9adc4e0,modules/profile/manifests/dumps/distribution/datasets/fetcher.pp,modified
860,puppet,684f545fde79106bcebfdf561debe2d1504bfa8a,"wikilabels: Cleanup old DB proxy information

Bug: T307389
Change-Id: Iaeb0504350abd5bab35e94789b3a2e3ee62258b1",https://github.com/wikimedia/puppet/commit/684f545fde79106bcebfdf561debe2d1504bfa8a,modules/profile/manifests/wikilabels.pp,modified
861,puppet,0dc88d7231c78ad079423c3cfe0b891e7e91f1db,"mail: Add SPDX headers

Bug: T308013
Change-Id: Idcc750aaa96361e51821d26a93c4941e7eb2782d",https://github.com/wikimedia/puppet/commit/0dc88d7231c78ad079423c3cfe0b891e7e91f1db,modules/profile/manifests/mail/default_mail_relay.pp,modified
862,puppet,0dc88d7231c78ad079423c3cfe0b891e7e91f1db,"mail: Add SPDX headers

Bug: T308013
Change-Id: Idcc750aaa96361e51821d26a93c4941e7eb2782d",https://github.com/wikimedia/puppet/commit/0dc88d7231c78ad079423c3cfe0b891e7e91f1db,modules/profile/manifests/mail/mx.pp,modified
863,puppet,0dc88d7231c78ad079423c3cfe0b891e7e91f1db,"mail: Add SPDX headers

Bug: T308013
Change-Id: Idcc750aaa96361e51821d26a93c4941e7eb2782d",https://github.com/wikimedia/puppet/commit/0dc88d7231c78ad079423c3cfe0b891e7e91f1db,modules/profile/manifests/mail/smarthost.pp,modified
864,puppet,0dc88d7231c78ad079423c3cfe0b891e7e91f1db,"mail: Add SPDX headers

Bug: T308013
Change-Id: Idcc750aaa96361e51821d26a93c4941e7eb2782d",https://github.com/wikimedia/puppet/commit/0dc88d7231c78ad079423c3cfe0b891e7e91f1db,modules/profile/manifests/mail/smarthost/wmcs.pp,modified
865,puppet,1335aa2aad9ce3fe22511d80d018efbf4fa8e2f2,"webservice: add toolforge-* link for it

That allows to use the toolforge-cli to run it, and allows easy
discovery.

Change-Id: Ic8c3d15108970f837f16b673226069c1a561512c
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/1335aa2aad9ce3fe22511d80d018efbf4fa8e2f2,modules/profile/manifests/toolforge/k8s/client.pp,modified
866,puppet,bbeecdd30a9d45e8a58df922f91a585b2cc0d202,"P:idm Apache2 modules are named with _ not -

Bug: T320428
Change-Id: Ie1f277dc2b15ba7209fa7a33ae0ec8e8e15122b9",https://github.com/wikimedia/puppet/commit/bbeecdd30a9d45e8a58df922f91a585b2cc0d202,modules/profile/manifests/idm.pp,modified
867,puppet,6efbda8f5fc9fcf70359c10fa4d0125764d7437f,"P:idm Fix missing configuration dir.

Also enable correct Apache2 module for uwsgi.

Bug: T320428
Change-Id: Ia9676ab6e40638fdf255627758786ab634fc0087",https://github.com/wikimedia/puppet/commit/6efbda8f5fc9fcf70359c10fa4d0125764d7437f,modules/idm/manifests/deployment.pp,modified
868,puppet,6efbda8f5fc9fcf70359c10fa4d0125764d7437f,"P:idm Fix missing configuration dir.

Also enable correct Apache2 module for uwsgi.

Bug: T320428
Change-Id: Ia9676ab6e40638fdf255627758786ab634fc0087",https://github.com/wikimedia/puppet/commit/6efbda8f5fc9fcf70359c10fa4d0125764d7437f,modules/profile/manifests/idm.pp,modified
869,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/client.pp,modified
870,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server.pp,modified
871,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/global_config.pp,modified
872,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/helmfile.pp,modified
873,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/mediawiki.pp,modified
874,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/mediawiki/builder.pp,modified
875,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/mediawiki/config.pp,modified
876,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/mediawiki/mwdebug_deploy.pp,modified
877,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/deployment_server/mediawiki/release.pp,modified
878,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/kubeconfig/admin.pp,modified
879,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/master.pp,modified
880,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/manifests/kubernetes/node.pp,modified
881,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/types/kubernetes/user_defaults.pp,modified
882,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/types/kubernetes/user_token.pp,modified
883,puppet,44683df11f1aa178f2f07511e262a1ddc2f9820b,"kubernetes: Add SPDX headers

There is one commit by an author not in CONTRIBUTORS
(6cbb15149b9f163a46226b36ac801d56a9aad4c3), but the code in question is
no longer present.

Bug: T308013
Change-Id: I144a374248cba0ce0c51f50ffdc103a295ebdae8",https://github.com/wikimedia/puppet/commit/44683df11f1aa178f2f07511e262a1ddc2f9820b,modules/profile/types/kubernetes/user_tokens.pp,modified
884,puppet,92335deb368dc09ff220e06bbb76d16ffc03e6e6,"P:idm Add missing project variable.

Bug: T320428
Change-Id: I92bd97af8e667f2e2309c65eb989c6ca32b95eb4",https://github.com/wikimedia/puppet/commit/92335deb368dc09ff220e06bbb76d16ffc03e6e6,modules/profile/manifests/idm.pp,modified
885,puppet,abd2ca520e83603cd5e423782e6301db38426055,"puppetmaster::standalone: Sync swift rings

Production performs this task on puppetmaster::frontend servers
but enviroments like deployment-prep where a puppetmaster::standalone
is present need this as well

Bug: T322231
Change-Id: I84f4c4d32910c6c8a088c6d64e20ae9fb4da887b",https://github.com/wikimedia/puppet/commit/abd2ca520e83603cd5e423782e6301db38426055,modules/profile/manifests/puppetmaster/fetch_swift_rings.pp,added
886,puppet,abd2ca520e83603cd5e423782e6301db38426055,"puppetmaster::standalone: Sync swift rings

Production performs this task on puppetmaster::frontend servers
but enviroments like deployment-prep where a puppetmaster::standalone
is present need this as well

Bug: T322231
Change-Id: I84f4c4d32910c6c8a088c6d64e20ae9fb4da887b",https://github.com/wikimedia/puppet/commit/abd2ca520e83603cd5e423782e6301db38426055,modules/profile/manifests/puppetmaster/frontend.pp,modified
887,puppet,abd2ca520e83603cd5e423782e6301db38426055,"puppetmaster::standalone: Sync swift rings

Production performs this task on puppetmaster::frontend servers
but enviroments like deployment-prep where a puppetmaster::standalone
is present need this as well

Bug: T322231
Change-Id: I84f4c4d32910c6c8a088c6d64e20ae9fb4da887b",https://github.com/wikimedia/puppet/commit/abd2ca520e83603cd5e423782e6301db38426055,modules/role/manifests/puppetmaster/frontend.pp,modified
888,puppet,abd2ca520e83603cd5e423782e6301db38426055,"puppetmaster::standalone: Sync swift rings

Production performs this task on puppetmaster::frontend servers
but enviroments like deployment-prep where a puppetmaster::standalone
is present need this as well

Bug: T322231
Change-Id: I84f4c4d32910c6c8a088c6d64e20ae9fb4da887b",https://github.com/wikimedia/puppet/commit/abd2ca520e83603cd5e423782e6301db38426055,modules/role/manifests/puppetmaster/standalone.pp,modified
889,puppet,78d02efb0692734f7ef7e2a365427b5af64336e7,"R:swift::label_filesystem: jst check that any lable is on the disk

We dont want to relable them if they come up with a different device
name

Bug: T308677
Change-Id: Ied23fc330e793e69943d28e6f9465eb371d334f5",https://github.com/wikimedia/puppet/commit/78d02efb0692734f7ef7e2a365427b5af64336e7,modules/swift/manifests/label_filesystem.pp,modified
890,puppet,8707e333c2046ec2019b83376b99992b2a77f5bf,"P:spicerack: add python3-packaging

Required for updates to the firmware upgrade cookbook

Relates-To: I470392a1cd6eb4ef7e82e1770dbcdfff3d06b20d

Change-Id: I4a66f101cf454ea6d80fb2b6a2cfcdeee403cb33",https://github.com/wikimedia/puppet/commit/8707e333c2046ec2019b83376b99992b2a77f5bf,modules/profile/manifests/spicerack.pp,modified
891,puppet,9efa7b6e4ae9a2185062e0f86e8f0351668f405b,"C:idm:deployment add django configuration.

Also enable logging to file.

Bug: T320428
Change-Id: Ic622f85083648fd89502375207f6a2ccedf5aaaf",https://github.com/wikimedia/puppet/commit/9efa7b6e4ae9a2185062e0f86e8f0351668f405b,modules/idm/manifests/deployment.pp,modified
892,puppet,9efa7b6e4ae9a2185062e0f86e8f0351668f405b,"C:idm:deployment add django configuration.

Also enable logging to file.

Bug: T320428
Change-Id: Ic622f85083648fd89502375207f6a2ccedf5aaaf",https://github.com/wikimedia/puppet/commit/9efa7b6e4ae9a2185062e0f86e8f0351668f405b,modules/profile/manifests/idm.pp,modified
893,puppet,28d031f9e0f481b4c8ce511f3b201358135d42f1,"Move kube-proxy config to file

While at it remove the currently unused (e.g. all clusters use the same)
parameter kubeproxy_metrics_bind_address and masquerade_all.

Bug: T300499
Change-Id: I259cdb4a6ac29d6257275e4a1ad9d7adff81315a",https://github.com/wikimedia/puppet/commit/28d031f9e0f481b4c8ce511f3b201358135d42f1,modules/k8s/manifests/kubelet.pp,modified
894,puppet,28d031f9e0f481b4c8ce511f3b201358135d42f1,"Move kube-proxy config to file

While at it remove the currently unused (e.g. all clusters use the same)
parameter kubeproxy_metrics_bind_address and masquerade_all.

Bug: T300499
Change-Id: I259cdb4a6ac29d6257275e4a1ad9d7adff81315a",https://github.com/wikimedia/puppet/commit/28d031f9e0f481b4c8ce511f3b201358135d42f1,modules/k8s/manifests/proxy.pp,modified
895,puppet,28d031f9e0f481b4c8ce511f3b201358135d42f1,"Move kube-proxy config to file

While at it remove the currently unused (e.g. all clusters use the same)
parameter kubeproxy_metrics_bind_address and masquerade_all.

Bug: T300499
Change-Id: I259cdb4a6ac29d6257275e4a1ad9d7adff81315a",https://github.com/wikimedia/puppet/commit/28d031f9e0f481b4c8ce511f3b201358135d42f1,modules/profile/manifests/kubernetes/node.pp,modified
896,puppet,d9807b891d220c2236328b4d4002297fb22bed62,"dispatch: refactor/simplify db profile

Functionality-wise this should be equivalent, but a little more clear

Bug: T313229
Change-Id: Ib501684c7b5951fb9e8e6c6dffb4cc645128e9c9",https://github.com/wikimedia/puppet/commit/d9807b891d220c2236328b4d4002297fb22bed62,modules/profile/manifests/dispatch/db.pp,modified
897,puppet,b273671a124e9a3765732246939f911139a8e310,"install_server: remove db2183, db2184 from db recipe, correct owner

These two hosts are already installed, but were labeled as being
owned by data engineering.

Change-Id: Id847df72bd30a7960ed95896e3fa76c2a0e083da",https://github.com/wikimedia/puppet/commit/b273671a124e9a3765732246939f911139a8e310,manifests/site.pp,modified
898,puppet,22542800fb33424f583883b761639e028ea0296e,"C:idm:deployment Git checkout should be in a subdir.

Bug: T320428
Change-Id: If7db2d91e0c553faf35eb2939f883b82c7e84844",https://github.com/wikimedia/puppet/commit/22542800fb33424f583883b761639e028ea0296e,modules/idm/manifests/deployment.pp,modified
899,puppet,f53f7eae73c7c306caed35e2770f465aa5acf21a,"C:idm::uwsgi_processes do not create directory twice.

It's an error in Puppet to attempt to create the same
directory twice, which seems a little weird.

Bug: T320428
Change-Id: Ia7cb173b9ac99af14eecabf4d8e9782690b999d0",https://github.com/wikimedia/puppet/commit/f53f7eae73c7c306caed35e2770f465aa5acf21a,modules/idm/manifests/uwsgi_processes.pp,modified
900,puppet,2528191f6d7a3b469e59dd6824c9dbca427de224,"C:idm::deployment of IDM.

Initially deployment to development only.

Bug: T320428
Change-Id: I65b9d45a1fba1167afc3f92acc61234822013b98",https://github.com/wikimedia/puppet/commit/2528191f6d7a3b469e59dd6824c9dbca427de224,modules/idm/manifests/deployment.pp,added
901,puppet,2528191f6d7a3b469e59dd6824c9dbca427de224,"C:idm::deployment of IDM.

Initially deployment to development only.

Bug: T320428
Change-Id: I65b9d45a1fba1167afc3f92acc61234822013b98",https://github.com/wikimedia/puppet/commit/2528191f6d7a3b469e59dd6824c9dbca427de224,modules/idm/manifests/uwsgi_processes.pp,modified
902,puppet,2528191f6d7a3b469e59dd6824c9dbca427de224,"C:idm::deployment of IDM.

Initially deployment to development only.

Bug: T320428
Change-Id: I65b9d45a1fba1167afc3f92acc61234822013b98",https://github.com/wikimedia/puppet/commit/2528191f6d7a3b469e59dd6824c9dbca427de224,modules/profile/manifests/idm.pp,modified
903,puppet,30ffd02ab4613bb215fe06c16fa6bdd5c1cf5435,"site.pp: Change spare with data_engineering

Change-Id: Ia8bfedfd3b556c3a979712c01af0a960168ed29c",https://github.com/wikimedia/puppet/commit/30ffd02ab4613bb215fe06c16fa6bdd5c1cf5435,manifests/site.pp,modified
904,puppet,c43399072719e76d626237db886ded4a990018ac,"mariadb: Add spare db1206

This is a new host

Bug: T322256
Change-Id: I6f7288e632bd2800d24f523983b5f819d19af548",https://github.com/wikimedia/puppet/commit/c43399072719e76d626237db886ded4a990018ac,manifests/site.pp,modified
905,puppet,8de4b1a103c422beae164f559788a7282f2e392d,"Openstack: Add manifests for Barbican version Yoga

Bug: T305828
Change-Id: I2eced9a130b3abbdf3dfb0e6d468cd412e1abf23",https://github.com/wikimedia/puppet/commit/8de4b1a103c422beae164f559788a7282f2e392d,modules/openstack/manifests/barbican/service/yoga.pp,added
906,puppet,8dd7023952517a606d287f1ad193064f2e7e26b9,"Openstack: Add manifests for Cinder version Yoga

Bug: T305828
Change-Id: I71eab2d125588c887379e3709125998d2d0fc038",https://github.com/wikimedia/puppet/commit/8dd7023952517a606d287f1ad193064f2e7e26b9,modules/openstack/manifests/cinder/config/yoga.pp,added
907,puppet,8dd7023952517a606d287f1ad193064f2e7e26b9,"Openstack: Add manifests for Cinder version Yoga

Bug: T305828
Change-Id: I71eab2d125588c887379e3709125998d2d0fc038",https://github.com/wikimedia/puppet/commit/8dd7023952517a606d287f1ad193064f2e7e26b9,modules/openstack/manifests/cinder/service/yoga.pp,added
908,puppet,e1d1e659ba672068c4c765f08e380e0e81599516,"Openstack: Add manifests for Heat and Magnum version Yoga

Bug: T305828
Change-Id: Ib6440ead68787ce8158210859bf7a628bc7c4d66",https://github.com/wikimedia/puppet/commit/e1d1e659ba672068c4c765f08e380e0e81599516,modules/openstack/manifests/heat/service/yoga.pp,added
909,puppet,e1d1e659ba672068c4c765f08e380e0e81599516,"Openstack: Add manifests for Heat and Magnum version Yoga

Bug: T305828
Change-Id: Ib6440ead68787ce8158210859bf7a628bc7c4d66",https://github.com/wikimedia/puppet/commit/e1d1e659ba672068c4c765f08e380e0e81599516,modules/openstack/manifests/magnum/service/yoga.pp,added
910,puppet,fde6c400169af3775005e0dcd3276cc49c2a8494,"Openstack: Add manifests for Trove version Yoga

Bug: T305828
Change-Id: Id9903d20dea6bfc841f4c19b10316bce8154a23c",https://github.com/wikimedia/puppet/commit/fde6c400169af3775005e0dcd3276cc49c2a8494,modules/openstack/manifests/trove/service/yoga.pp,added
911,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/common/yoga.pp,added
912,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/common/yoga/bullseye.pp,added
913,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/dhcp_agent/yoga.pp,added
914,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/dhcp_agent/yoga/bullseye.pp,added
915,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/l3_agent/yoga.pp,added
916,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/l3_agent/yoga/bullseye.pp,added
917,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/linuxbridge_agent/yoga.pp,added
918,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/linuxbridge_agent/yoga/bullseye.pp,added
919,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/metadata_agent/yoga.pp,added
920,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/metadata_agent/yoga/bullseye.pp,added
921,puppet,38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,"Openstack: Add manifests for Neutron version Yoga

Bug: T305828
Change-Id: Iea2abfd94b81f1c26a7a0cb692be1885997068f9",https://github.com/wikimedia/puppet/commit/38c90cc553b3cbbb2b2936a16f1c28303bdd84ff,modules/openstack/manifests/neutron/service/yoga.pp,added
922,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/glance/service/yoga.pp,added
923,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/keystone/service/yoga.pp,added
924,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/keystone/service/yoga/bullseye.pp,added
925,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/nova/api/service/yoga.pp,added
926,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/nova/common/yoga/bullseye.pp,added
927,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/nova/compute/service/yoga/bullseye.pp,added
928,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/nova/conductor/service/yoga.pp,added
929,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/nova/scheduler/service/yoga.pp,added
930,puppet,f3b75dc0c714f17b21267d3254c12afb9aae245a,"Openstack: manifests for glance, nova, keystone, placement version Y

Bug: T305828
Change-Id: I34b3ffec5c21113f7f173c2413d0a86cc15cf195",https://github.com/wikimedia/puppet/commit/f3b75dc0c714f17b21267d3254c12afb9aae245a,modules/openstack/manifests/placement/service/yoga.pp,added
931,puppet,6ee31249bdb982a138c23cc67e9b369dbaa02df8,"change cp4052 role in site.pp

Bug: T322238
Change-Id: I25207322485013de4ee65e8d1f7d5963b2a2f57a",https://github.com/wikimedia/puppet/commit/6ee31249bdb982a138c23cc67e9b369dbaa02df8,manifests/site.pp,modified
932,puppet,19c93e10d4d455d611d83c512db0db11c60aa2be,"clouddumps/phabricator: rename rsync module to fix dumps sync

The rsync module on the remote side has been renamed from srvdumps
to srv-dumps to match other rsync module names.

This broke syncing of Phabricator dumps from clouddumps servers.

also see T322221#8364095

Bug: T322221
Change-Id: I97aab8b6774c04a4e5c634c9ffdc93eed4132c51",https://github.com/wikimedia/puppet/commit/19c93e10d4d455d611d83c512db0db11c60aa2be,modules/profile/manifests/dumps/distribution/datasets/fetcher.pp,modified
933,puppet,7da900a7acb6fcd640a617e075d501f67cbec226,"kafkatee::webrequests::ops: install stats script

* Add a new script to gather aggregated statistics from an extract of
  the sampled-1000.json webrequests file. See the script's docstring for
  all the details.

Change-Id: Ia64903e0a1558249f4b301217218e514fd5818c7",https://github.com/wikimedia/puppet/commit/7da900a7acb6fcd640a617e075d501f67cbec226,modules/profile/manifests/kafkatee/webrequest/ops.pp,modified
934,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,manifests/site.pp,modified
935,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/core_platform.pp,modified
936,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/data_engineering.pp,modified
937,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/data_persistence.pp,modified
938,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/infrastructure_foundations.pp,modified
939,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/machine_learning.pp,modified
940,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/observability.pp,modified
941,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/search_platform.pp,modified
942,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/serviceops.pp,modified
943,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/traffic.pp,modified
944,puppet,da7b3424fb2867b3057c0036fce8af37fc18bcc0,"Unroll role::insetup

Change-Id: Ie258de985c39a1f80f6591514c3f16c7cd4c7448",https://github.com/wikimedia/puppet/commit/da7b3424fb2867b3057c0036fce8af37fc18bcc0,modules/role/manifests/insetup/wmcs.pp,modified
945,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/certificates.pp,modified
946,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/cuminunpriv.pp,modified
947,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/firewall.pp,modified
948,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/firewall/extra.pp,modified
949,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/firewall/log.pp,modified
950,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/labs.pp,modified
951,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/linux510.pp,modified
952,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/memory_cgroup.pp,modified
953,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/netbase.pp,modified
954,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/no_firewall.pp,modified
955,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/production.pp,modified
956,puppet,8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,"base: Add SPDX headers

Bug: T308013
Change-Id: I630f6a979d9563038aa99ba1d29ae843d4950820",https://github.com/wikimedia/puppet/commit/8678e0ab8bd9dbceeba7e27f5b9d2cc80a8ab773,modules/profile/manifests/base/systemd.pp,modified
957,puppet,6bf2819e7665b610b0b94868d678a0e92b5dfee9,"puppetdb: On bookworm install from component/puppetdb7

Bug: T321783
Change-Id: Iffaec7a6409edcb41ee9ec940b2a6f96b5964780",https://github.com/wikimedia/puppet/commit/6bf2819e7665b610b0b94868d678a0e92b5dfee9,modules/puppetdb/manifests/app.pp,modified
958,puppet,5846c823d25d3cc0a7cd311a9bc672680ce50edc,"dispatch: move frontend to its own module

Better reflect the guidelines, and useful to not pollute 'profile'
namespace.

Bug: T313229
Change-Id: Iaa00ea29a004c623b8e74d1725f3c6c291bfa719",https://github.com/wikimedia/puppet/commit/5846c823d25d3cc0a7cd311a9bc672680ce50edc,modules/dispatch/manifests/web.pp,added
959,puppet,5846c823d25d3cc0a7cd311a9bc672680ce50edc,"dispatch: move frontend to its own module

Better reflect the guidelines, and useful to not pollute 'profile'
namespace.

Bug: T313229
Change-Id: Iaa00ea29a004c623b8e74d1725f3c6c291bfa719",https://github.com/wikimedia/puppet/commit/5846c823d25d3cc0a7cd311a9bc672680ce50edc,modules/profile/manifests/dispatch.pp,modified
960,puppet,572caf4c0ca5f16422f2501b57be0f4548236e68,"acme_chief: use force to absent cert directory

Puppet won't absent the directory otherwise:

Notice:
/Stage[main]/Smokeping::Web/Acme_chief::Cert[smokeping]/File[/etc/acmecerts/smokeping]:
Not removing directory; use 'force' to override Notice:
/Stage[main]/Smokeping::Web/Acme_chief::Cert[smokeping]/File[/etc/acmecerts/smokeping]/ensure:
removed (corrective)

Change-Id: Iba6d5e2caf26cf8a96c9adcccec158e4102f3e2b",https://github.com/wikimedia/puppet/commit/572caf4c0ca5f16422f2501b57be0f4548236e68,modules/acme_chief/manifests/cert.pp,modified
961,puppet,5ec6628a305fdba402c28c71c0d616334183bd1c,"trafficserver: Clean up after ATS 9.x upgrade

Merge with puppet disabled in cp and deployment-cache nodes.
Remove the old trafficserver9 component, re-import trafficserver 9.x
packages to buster-wikimedia main and enable puppet

Bug: T321776
Change-Id: I395d6d195f0d1794a84be11d90b910ccfdd0f815",https://github.com/wikimedia/puppet/commit/5ec6628a305fdba402c28c71c0d616334183bd1c,modules/profile/manifests/trafficserver/backend.pp,modified
962,puppet,5ec6628a305fdba402c28c71c0d616334183bd1c,"trafficserver: Clean up after ATS 9.x upgrade

Merge with puppet disabled in cp and deployment-cache nodes.
Remove the old trafficserver9 component, re-import trafficserver 9.x
packages to buster-wikimedia main and enable puppet

Bug: T321776
Change-Id: I395d6d195f0d1794a84be11d90b910ccfdd0f815",https://github.com/wikimedia/puppet/commit/5ec6628a305fdba402c28c71c0d616334183bd1c,modules/trafficserver/manifests/init.pp,modified
963,puppet,5ec6628a305fdba402c28c71c0d616334183bd1c,"trafficserver: Clean up after ATS 9.x upgrade

Merge with puppet disabled in cp and deployment-cache nodes.
Remove the old trafficserver9 component, re-import trafficserver 9.x
packages to buster-wikimedia main and enable puppet

Bug: T321776
Change-Id: I395d6d195f0d1794a84be11d90b910ccfdd0f815",https://github.com/wikimedia/puppet/commit/5ec6628a305fdba402c28c71c0d616334183bd1c,modules/trafficserver/manifests/instance.pp,modified
964,puppet,5ec6628a305fdba402c28c71c0d616334183bd1c,"trafficserver: Clean up after ATS 9.x upgrade

Merge with puppet disabled in cp and deployment-cache nodes.
Remove the old trafficserver9 component, re-import trafficserver 9.x
packages to buster-wikimedia main and enable puppet

Bug: T321776
Change-Id: I395d6d195f0d1794a84be11d90b910ccfdd0f815",https://github.com/wikimedia/puppet/commit/5ec6628a305fdba402c28c71c0d616334183bd1c,modules/trafficserver/types/mapping_rule.pp,modified
965,puppet,284fa1e37bbe504f835b76862e2bde2627d8f640,"kerberos: Add SPDX headers

Bug: T308013
Change-Id: I22fc91b3bd58805f7ddc3f08f78d831d927ce066",https://github.com/wikimedia/puppet/commit/284fa1e37bbe504f835b76862e2bde2627d8f640,modules/profile/manifests/kerberos/client.pp,modified
966,puppet,284fa1e37bbe504f835b76862e2bde2627d8f640,"kerberos: Add SPDX headers

Bug: T308013
Change-Id: I22fc91b3bd58805f7ddc3f08f78d831d927ce066",https://github.com/wikimedia/puppet/commit/284fa1e37bbe504f835b76862e2bde2627d8f640,modules/profile/manifests/kerberos/kadminserver.pp,modified
967,puppet,284fa1e37bbe504f835b76862e2bde2627d8f640,"kerberos: Add SPDX headers

Bug: T308013
Change-Id: I22fc91b3bd58805f7ddc3f08f78d831d927ce066",https://github.com/wikimedia/puppet/commit/284fa1e37bbe504f835b76862e2bde2627d8f640,modules/profile/manifests/kerberos/kdc.pp,modified
968,puppet,284fa1e37bbe504f835b76862e2bde2627d8f640,"kerberos: Add SPDX headers

Bug: T308013
Change-Id: I22fc91b3bd58805f7ddc3f08f78d831d927ce066",https://github.com/wikimedia/puppet/commit/284fa1e37bbe504f835b76862e2bde2627d8f640,modules/profile/manifests/kerberos/keytabs.pp,modified
969,puppet,284fa1e37bbe504f835b76862e2bde2627d8f640,"kerberos: Add SPDX headers

Bug: T308013
Change-Id: I22fc91b3bd58805f7ddc3f08f78d831d927ce066",https://github.com/wikimedia/puppet/commit/284fa1e37bbe504f835b76862e2bde2627d8f640,modules/profile/manifests/kerberos/replication.pp,modified
970,puppet,6abc157a896e3d45fd236e30d5aec1fa823baa44,"kubelet: Re-enable readOnlyPort (tcp/10255) for prometheus

Prometheus scrapes kubelet and cadvisor metrics from the kubelet
readOnlyPort so we need to re-enable it.

Bug: T300499
Change-Id: I248841be8fe1798bac52bb5b1d7adba4ba963edd",https://github.com/wikimedia/puppet/commit/6abc157a896e3d45fd236e30d5aec1fa823baa44,modules/k8s/manifests/kubelet.pp,modified
971,puppet,b1f75836f8bb67ed0dac73370ea14fbb9e7859a6,"puppet_compiler: bump version

Change-Id: I3ff67c6ae72ee33573fd0e22b98bcd2bf06c5417",https://github.com/wikimedia/puppet/commit/b1f75836f8bb67ed0dac73370ea14fbb9e7859a6,modules/puppet_compiler/manifests/init.pp,modified
972,puppet,f6a85e40b1d75203d9cbe0be655eea635026f86b,"statistics::rsyncd: use nogroup for gid instead of nobody

Hosts: auto
Bug: T322149
Change-Id: Ic543c82d33168510d1648bc1e589d725e7b50cfc",https://github.com/wikimedia/puppet/commit/f6a85e40b1d75203d9cbe0be655eea635026f86b,modules/statistics/manifests/rsyncd.pp,modified
973,puppet,90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,"haproxy: Produce valid configs for HAProxy 2.6.x

nbproc has been deprecated in HAProxy >= 2.5.x
matching method (-m) is now mandatory when using
var() sample fetchs

Bug: T321775
Change-Id: I580ae8a903540a703179456147e0a31d4fb54794",https://github.com/wikimedia/puppet/commit/90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,modules/haproxy/manifests/tls_terminator.pp,modified
974,puppet,90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,"haproxy: Produce valid configs for HAProxy 2.6.x

nbproc has been deprecated in HAProxy >= 2.5.x
matching method (-m) is now mandatory when using
var() sample fetchs

Bug: T321775
Change-Id: I580ae8a903540a703179456147e0a31d4fb54794",https://github.com/wikimedia/puppet/commit/90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,modules/haproxy/types/version.pp,added
975,puppet,90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,"haproxy: Produce valid configs for HAProxy 2.6.x

nbproc has been deprecated in HAProxy >= 2.5.x
matching method (-m) is now mandatory when using
var() sample fetchs

Bug: T321775
Change-Id: I580ae8a903540a703179456147e0a31d4fb54794",https://github.com/wikimedia/puppet/commit/90ff4ecccc920ddd488761f721e97fa6f2ab0bc4,modules/profile/manifests/cache/haproxy.pp,modified
976,puppet,058323fa3696d4e2ba01b079c58b23077f54d321,"Drop toolschecker checks for the wikilabels database

No longer a service maintained by us.

Bug: T307389
Change-Id: I612f8cfe0aad5e8a40604cee70f1e7015f9cf927",https://github.com/wikimedia/puppet/commit/058323fa3696d4e2ba01b079c58b23077f54d321,modules/icinga/manifests/monitor/toollabs.pp,modified
977,puppet,058323fa3696d4e2ba01b079c58b23077f54d321,"Drop toolschecker checks for the wikilabels database

No longer a service maintained by us.

Bug: T307389
Change-Id: I612f8cfe0aad5e8a40604cee70f1e7015f9cf927",https://github.com/wikimedia/puppet/commit/058323fa3696d4e2ba01b079c58b23077f54d321,modules/profile/manifests/toolforge/checker.pp,modified
978,puppet,79937211e1a7c720ede73cede1dd6f28a9fa160b,"Move kubelet configuration to file

The following hiera keys have only one values for all clusters so I
removed the definition from hiera and set a proper default:
* profile::kubernetes::infra_pod: docker-registry.discovery.wmnet/pause
* profile::kubernetes::node::kubelet_cluster_domain: cluster.local

Also --pod-infra-container-image is not really an optional flag in our
infrastructure as the default will simply not work (k8s.gcr.io/pause).

The kubelet port could not be configured via the node role anyways, so I
removed the parameter.

Remove the listen_address from kubelet resouce as it is the default.

Bug T300499

Change-Id: Ieb905505b720a4629278cca6147cbdac70418119",https://github.com/wikimedia/puppet/commit/79937211e1a7c720ede73cede1dd6f28a9fa160b,modules/k8s/manifests/kubelet.pp,modified
979,puppet,79937211e1a7c720ede73cede1dd6f28a9fa160b,"Move kubelet configuration to file

The following hiera keys have only one values for all clusters so I
removed the definition from hiera and set a proper default:
* profile::kubernetes::infra_pod: docker-registry.discovery.wmnet/pause
* profile::kubernetes::node::kubelet_cluster_domain: cluster.local

Also --pod-infra-container-image is not really an optional flag in our
infrastructure as the default will simply not work (k8s.gcr.io/pause).

The kubelet port could not be configured via the node role anyways, so I
removed the parameter.

Remove the listen_address from kubelet resouce as it is the default.

Bug T300499

Change-Id: Ieb905505b720a4629278cca6147cbdac70418119",https://github.com/wikimedia/puppet/commit/79937211e1a7c720ede73cede1dd6f28a9fa160b,modules/k8s/types/core/v1taint.pp,added
980,puppet,79937211e1a7c720ede73cede1dd6f28a9fa160b,"Move kubelet configuration to file

The following hiera keys have only one values for all clusters so I
removed the definition from hiera and set a proper default:
* profile::kubernetes::infra_pod: docker-registry.discovery.wmnet/pause
* profile::kubernetes::node::kubelet_cluster_domain: cluster.local

Also --pod-infra-container-image is not really an optional flag in our
infrastructure as the default will simply not work (k8s.gcr.io/pause).

The kubelet port could not be configured via the node role anyways, so I
removed the parameter.

Remove the listen_address from kubelet resouce as it is the default.

Bug T300499

Change-Id: Ieb905505b720a4629278cca6147cbdac70418119",https://github.com/wikimedia/puppet/commit/79937211e1a7c720ede73cede1dd6f28a9fa160b,modules/profile/manifests/kubernetes/node.pp,modified
981,puppet,71403e4cad231da495656277a73246863185bc0e,"cache::haproxy: Allow choosing between HAProxy 2.4 and 2.6

Bug: T321775
Change-Id: I1c707448e1b1a72f501845611732ad5ca05d8b06",https://github.com/wikimedia/puppet/commit/71403e4cad231da495656277a73246863185bc0e,modules/profile/manifests/cache/haproxy.pp,modified
982,puppet,52de3a6ad74b90b0d06dcc261544270ee472e780,"smokeping: remove ancillary data

Bug: T169860
Change-Id: Ifb1f520a9377c400b0829367a10befd1888ca24c",https://github.com/wikimedia/puppet/commit/52de3a6ad74b90b0d06dcc261544270ee472e780,modules/profile/manifests/backup/filesets.pp,modified
983,puppet,86e164458d4b9d8ad3f48c0fd3f661b6415a5331,"smokeping: remove module and profile

Bug: T169860
Change-Id: I98a226857fbc0fccd7581c9fed2aa8d864402bec",https://github.com/wikimedia/puppet/commit/86e164458d4b9d8ad3f48c0fd3f661b6415a5331,modules/profile/manifests/smokeping.pp,removed
984,puppet,86e164458d4b9d8ad3f48c0fd3f661b6415a5331,"smokeping: remove module and profile

Bug: T169860
Change-Id: I98a226857fbc0fccd7581c9fed2aa8d864402bec",https://github.com/wikimedia/puppet/commit/86e164458d4b9d8ad3f48c0fd3f661b6415a5331,modules/role/manifests/netmon.pp,modified
985,puppet,86e164458d4b9d8ad3f48c0fd3f661b6415a5331,"smokeping: remove module and profile

Bug: T169860
Change-Id: I98a226857fbc0fccd7581c9fed2aa8d864402bec",https://github.com/wikimedia/puppet/commit/86e164458d4b9d8ad3f48c0fd3f661b6415a5331,modules/smokeping/manifests/init.pp,removed
986,puppet,86e164458d4b9d8ad3f48c0fd3f661b6415a5331,"smokeping: remove module and profile

Bug: T169860
Change-Id: I98a226857fbc0fccd7581c9fed2aa8d864402bec",https://github.com/wikimedia/puppet/commit/86e164458d4b9d8ad3f48c0fd3f661b6415a5331,modules/smokeping/manifests/web.pp,removed
987,puppet,fc3570f259be21e22e8687cdc62952ac61558193,"profile: absent smokeping

Bug: T169860
Change-Id: Id757baa9e35c14712275d6a3818975a1c2e85734",https://github.com/wikimedia/puppet/commit/fc3570f259be21e22e8687cdc62952ac61558193,modules/profile/manifests/smokeping.pp,modified
988,puppet,4c4a479433e296b3855250a49c290b214a7722df,"smokeping: add ensure parameter, set to present

Bug: T169860
Change-Id: I5b1f26b975b4c692d2f7f47beea486fe59f84cc6",https://github.com/wikimedia/puppet/commit/4c4a479433e296b3855250a49c290b214a7722df,modules/profile/manifests/smokeping.pp,modified
989,puppet,4c4a479433e296b3855250a49c290b214a7722df,"smokeping: add ensure parameter, set to present

Bug: T169860
Change-Id: I5b1f26b975b4c692d2f7f47beea486fe59f84cc6",https://github.com/wikimedia/puppet/commit/4c4a479433e296b3855250a49c290b214a7722df,modules/smokeping/manifests/init.pp,modified
990,puppet,4c4a479433e296b3855250a49c290b214a7722df,"smokeping: add ensure parameter, set to present

Bug: T169860
Change-Id: I5b1f26b975b4c692d2f7f47beea486fe59f84cc6",https://github.com/wikimedia/puppet/commit/4c4a479433e296b3855250a49c290b214a7722df,modules/smokeping/manifests/web.pp,modified
991,puppet,a336dcb712be070710ffa9cd5b52d32c54d3a6aa,"aux-k8s: add LVS config for API server

Bug: T321137
Hosts: P:lvs::realserver
Change-Id: Icb3214a64b01a1f0db84df9eb393c7cf46684c3c",https://github.com/wikimedia/puppet/commit/a336dcb712be070710ffa9cd5b52d32c54d3a6aa,modules/role/manifests/aux_k8s/master.pp,modified
992,puppet,dcd44ab84c5aff0f1947321a8b4276c7c715f032,"esitest: do not require on obsoleted file resource (attempt 2)

Change-Id: Ia7a6fa4d836bd7b639e7f6b3d0efb253580717cf",https://github.com/wikimedia/puppet/commit/dcd44ab84c5aff0f1947321a8b4276c7c715f032,modules/esitest/manifests/init.pp,modified
993,puppet,e061a32969bbad76b75601bb67f2065a01a9afaf,"esitest: do not require on obsoleted file resource

File['/run/esitest'] is now deprecated in favour of
Systemd::Tmpfile['/run/esitest'].

Change-Id: I5c45c2bdd2dcc597d9646d0ed234c7340179ca94",https://github.com/wikimedia/puppet/commit/e061a32969bbad76b75601bb67f2065a01a9afaf,modules/esitest/manifests/init.pp,modified
994,puppet,eb49ced507b8dc1516f3b131dabdc0462942f2b0,"haproxy: use systemd::tmpfile to create /run/haproxy (and esitest)

This will ensure that the directory is created and exists when we need
it to, avoiding multiple Puppet runs to fix the issue, such as when
reimaging/rebooting the cp hosts:

    owner changed 'haproxy' to 'root' (corrective)
    mode changed '2775' to '0775' (corrective)

Hosts: auto
Change-Id: I8f5500926a316763fa9e4bed90597f49d89984d0",https://github.com/wikimedia/puppet/commit/eb49ced507b8dc1516f3b131dabdc0462942f2b0,modules/esitest/manifests/init.pp,modified
995,puppet,eb49ced507b8dc1516f3b131dabdc0462942f2b0,"haproxy: use systemd::tmpfile to create /run/haproxy (and esitest)

This will ensure that the directory is created and exists when we need
it to, avoiding multiple Puppet runs to fix the issue, such as when
reimaging/rebooting the cp hosts:

    owner changed 'haproxy' to 'root' (corrective)
    mode changed '2775' to '0775' (corrective)

Hosts: auto
Change-Id: I8f5500926a316763fa9e4bed90597f49d89984d0",https://github.com/wikimedia/puppet/commit/eb49ced507b8dc1516f3b131dabdc0462942f2b0,modules/haproxy/manifests/init.pp,modified
996,puppet,37e2cbfc1be868d862c3bacfb9966d5eced003fc,"esitest: add explicit require on /run/esitest

Improves the earlier commit, 21ac454d9 by requiring explicit requires on
the socket directory creation.

Change-Id: Ibac3cf003258c49477781285a65690f2838b4d92",https://github.com/wikimedia/puppet/commit/37e2cbfc1be868d862c3bacfb9966d5eced003fc,modules/esitest/manifests/init.pp,modified
997,puppet,dfd1974cb70f659cc27cbecd6596c5ff09cfeae5,"Add a few more package cleanups for bullseye->bookworm ABI changes

Change-Id: If4fae0d71d338ae84efffc1eb1ff920054525c74",https://github.com/wikimedia/puppet/commit/dfd1974cb70f659cc27cbecd6596c5ff09cfeae5,modules/base/manifests/standard_packages.pp,modified
998,puppet,a139c25c90e8c4e8bcd8df550aa7f60663a64373,"p::wmcs:nfs: Fix typo in the hiera lookup

wcms -> wmcs

Change-Id: Id68e17ce50049c9674448eff7da0a81d9a472830
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/a139c25c90e8c4e8bcd8df550aa7f60663a64373,modules/profile/manifests/wmcs/nfs/primary.pp,modified
999,puppet,a139c25c90e8c4e8bcd8df550aa7f60663a64373,"p::wmcs:nfs: Fix typo in the hiera lookup

wcms -> wmcs

Change-Id: Id68e17ce50049c9674448eff7da0a81d9a472830
Signed-off-by: David Caro <dcaro@wikimedia.org>",https://github.com/wikimedia/puppet/commit/a139c25c90e8c4e8bcd8df550aa7f60663a64373,modules/profile/manifests/wmcs/nfs/standalone.pp,modified
1000,puppet,21ac454d9a878e0bbbb482a283917503fca3e02d,"esitest: add config file dependency on /run/esitest creation

During a reimage or reboot of the cp hosts, we have a Puppet failure in
some cases that results from the config file creation and haproxy
starting before the /run/esitest/ directory is created. The error log
from esitest.service:

Nov 01 14:57:15 cp4042 haproxy[2154]: [ALERT]    (2154) : Starting
frontend GLOBAL: cannot bind UNIX socket (No such file or directory)
[/run/esitest/esitest.sock]

Running Puppet again clears this error but for a proper fix, add a
require to the config file so that the socket directory is created
before the config file is applied.

Additional notes:

From /etc/haproxy/esitest.cfg,

    # we need to expose FDs to achieve hitless reload
    stats socket /run/esitest/esitest.sock mode [...]

Hosts: auto
Change-Id: Ic9d5034c143c1e727c2acdf59a7294b5c3cca15e",https://github.com/wikimedia/puppet/commit/21ac454d9a878e0bbbb482a283917503fca3e02d,modules/esitest/manifests/init.pp,modified
1001,puppet,15aa842a88efa7bf98513a4ae5212f5f07750236,"dispatch: configure http header auth provider

Bug: T313229
Change-Id: I74979028e365f4f3710cf2b05c5cd9d926ca0046",https://github.com/wikimedia/puppet/commit/15aa842a88efa7bf98513a4ae5212f5f07750236,modules/profile/manifests/dispatch.pp,modified
1002,puppet,9c5d37a36e89ce4510ced748777a8daa028a919f,"dispatch: run wrapper with interactive/tty support

As expected from an command line application: e.g. confirmation prompts
will do the right thing and wait for user input.

Bug: T313229
Change-Id: I83a561ad2cad50d752954873f0b1091af30ef753",https://github.com/wikimedia/puppet/commit/9c5d37a36e89ce4510ced748777a8daa028a919f,modules/profile/manifests/dispatch.pp,modified
1003,puppet,6926fdfd8dfe5c22ef2cd4c40be6d4ae0dbd583d,"Cleanup obsolete binary packages after bookworm dist-upgrade

Remove various old binary packages which won't see further updates:
Boost, Wireshark, ICU, Perl, Python, Ruby

Change-Id: I7343fb8fa2c7834336461afecc8a1b747b40df89",https://github.com/wikimedia/puppet/commit/6926fdfd8dfe5c22ef2cd4c40be6d4ae0dbd583d,modules/base/manifests/standard_packages.pp,modified
1004,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/dhcp.pp,modified
1005,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/http.pp,modified
1006,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/http_light.pp,modified
1007,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/migration.pp,modified
1008,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/preseed.pp,modified
1009,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/proxy.pp,modified
1010,puppet,c23e992d984b58a2c4a2151df1abe92466efe20a,"installserver: Add SPDX headers

Bug: T308013
Change-Id: Idfeac91fd831bff8bc4234da6edc85a616375e77",https://github.com/wikimedia/puppet/commit/c23e992d984b58a2c4a2151df1abe92466efe20a,modules/profile/manifests/installserver/tftp.pp,modified
1011,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/datasets/cleanup.pp,modified
1012,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/datasets/dumpstatusfiles_sync.pp,modified
1013,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/datasets/fetcher.pp,modified
1014,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/datasets/rsync_config.pp,modified
1015,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/ferm.pp,modified
1016,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/mirrors/rsync_config.pp,modified
1017,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/monitoring.pp,modified
1018,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/nfs.pp,modified
1019,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/rsync.pp,modified
1020,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/server.pp,modified
1021,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/distribution/web.pp,modified
1022,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/nfs.pp,modified
1023,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/rsyncer_peer.pp,modified
1024,puppet,023568661222f170f5741ced10791cb34dff1063,"dumps: Add SPDX headers

Bug: T308013
Change-Id: I86c74cfcf994397a13e3288718fd6e286738cb1b",https://github.com/wikimedia/puppet/commit/023568661222f170f5741ced10791cb34dff1063,modules/profile/manifests/dumps/web/htmldumps.pp,modified
1025,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/bucket_web.pp,modified
1026,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/compact.pp,modified
1027,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/httpd.pp,modified
1028,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/query.pp,modified
1029,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/query_frontend.pp,modified
1030,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/rule.pp,modified
1031,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/sidecar.pp,modified
1032,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/store.pp,modified
1033,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/swift/backend.pp,modified
1034,puppet,ebaa4864f69d05905cf376397d5c137138d8eda0,"thanos: Add SPDX headers

Bug: T308013
Change-Id: I8b7ffdeec4cc926d5812f6dedf77aa897073ca40",https://github.com/wikimedia/puppet/commit/ebaa4864f69d05905cf376397d5c137138d8eda0,modules/profile/manifests/thanos/swift/frontend.pp,modified
1035,puppet,d10a34a6d39b02b556b83d61488907f246c5dfc7,"prometheus: use default for ignored_devices

The option is mutually exclusive with
--collector.diskstats.device-exclude in node-exporter 1.4, and we're not
using the default anywhere anyway.

Bug: T321783
Change-Id: Iffafe79801beba74774c666c20d2f62342b9b67b",https://github.com/wikimedia/puppet/commit/d10a34a6d39b02b556b83d61488907f246c5dfc7,modules/prometheus/manifests/node_exporter.pp,modified
